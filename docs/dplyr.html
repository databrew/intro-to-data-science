<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 18 Dataframe wrangling | DataBOOM: the canon for data science</title>
  <meta name="description" content="Data science is just data and science. But it’s better with pizza." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 18 Dataframe wrangling | DataBOOM: the canon for data science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Data science is just data and science. But it’s better with pizza." />
  <meta name="github-repo" content="databrew/intro-to-data-science" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 18 Dataframe wrangling | DataBOOM: the canon for data science" />
  
  <meta name="twitter:description" content="Data science is just data and science. But it’s better with pizza." />
  

<meta name="author" content="Databrew" />


<meta name="date" content="2021-09-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="ggplot.html"/>
<link rel="next" href="distributions-histograms.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DataBOOM: the canon for data science </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-this-is-and-what-it-isnt"><i class="fa fa-check"></i>What this is, and what it isn’t</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-this-is-for"><i class="fa fa-check"></i>Who this is for</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-will-learn"><i class="fa fa-check"></i>What you will learn</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
</ul></li>
<li class="part"><span><b>I Core theory</b></span></li>
<li class="chapter" data-level="2" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html"><i class="fa fa-check"></i><b>2</b> Principles of data science</a><ul>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#what-is-data-science"><i class="fa fa-check"></i>What is data science?</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#what-is-the-data-life-cycle"><i class="fa fa-check"></i>What is the data life cycle?</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#data-science-in-the-wild"><i class="fa fa-check"></i>Data science ‘in the wild’</a></li>
<li><a href="principles-of-data-science.html#why-r">Why <code>R</code>?</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#the-reproducibility-crisis"><i class="fa fa-check"></i>The reproducibility crisis</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-reproducibility-crisis-1.html"><a href="the-reproducibility-crisis-1.html"><i class="fa fa-check"></i><b>3</b> The reproducibility crisis</a><ul>
<li class="chapter" data-level="" data-path="the-reproducibility-crisis-1.html"><a href="the-reproducibility-crisis-1.html#what-is-reproducible-research"><i class="fa fa-check"></i>What is ‘reproducible research’?</a></li>
<li class="chapter" data-level="" data-path="the-reproducibility-crisis-1.html"><a href="the-reproducibility-crisis-1.html#why-does-reproducible-research-matter"><i class="fa fa-check"></i>Why does reproducible research matter?</a></li>
<li class="chapter" data-level="" data-path="the-reproducibility-crisis-1.html"><a href="the-reproducibility-crisis-1.html#how-to-carry-out-reproducible-research"><i class="fa fa-check"></i>How to carry out reproducible research</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-ethics.html"><a href="data-ethics.html"><i class="fa fa-check"></i><b>4</b> Data ethics</a></li>
<li class="chapter" data-level="5" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>5</b> Visualizing data</a><ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#the-importance-of-visualization"><i class="fa fa-check"></i>The importance of visualization</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#bad-examples"><i class="fa fa-check"></i>Bad examples</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#good-examples"><i class="fa fa-check"></i>Good examples</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#video-examples"><i class="fa fa-check"></i>Video examples</a></li>
</ul></li>
<li class="part"><span><b>II Getting sta<code>r</code>ted</b></span></li>
<li class="chapter" data-level="6" data-path="setting-up-rstudio.html"><a href="setting-up-rstudio.html"><i class="fa fa-check"></i><b>6</b> Setting up <code>RStudio</code></a></li>
<li class="chapter" data-level="7" data-path="running-r-code.html"><a href="running-r-code.html"><i class="fa fa-check"></i><b>7</b> Running R code</a><ul>
<li><a href="running-r-code.html#running-code-in-the-console">Running code in the <em>Console</em></a></li>
<li class="chapter" data-level="" data-path="running-r-code.html"><a href="running-r-code.html#use-r-like-a-calculator"><i class="fa fa-check"></i>Use R like a calculator</a></li>
<li><a href="running-r-code.html#getting-along-with-r">Getting along with <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html"><i class="fa fa-check"></i><b>8</b> Using <code>RStudio</code> &amp; <code>R</code> scripts</a><ul>
<li><a href="using-rstudio-r-scripts.html#r-and-rstudio-whats-the-difference"><code>R</code> and <code>RStudio</code>: what’s the difference?</a></li>
<li><a href="using-rstudio-r-scripts.html#two-minute-tour-of-rstudio">Two-minute tour of <code>RStudio</code></a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#scripts"><i class="fa fa-check"></i>Scripts</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#wd"><i class="fa fa-check"></i>Your working directory</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#typical-workflows"><i class="fa fa-check"></i>Typical workflows</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="variables.html"><a href="variables.html"><i class="fa fa-check"></i><b>9</b> Variables</a><ul>
<li class="chapter" data-level="" data-path="variables.html"><a href="variables.html#introducing-variables"><i class="fa fa-check"></i>Introducing variables</a></li>
<li><a href="variables.html#types-of-data-in-r">Types of data in <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>10</b> Vectors</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#declaring-and-using-vectors"><i class="fa fa-check"></i>Declaring and using vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#math-with-two-vectors"><i class="fa fa-check"></i>Math with two vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#functions-for-handling-vectors"><i class="fa fa-check"></i>Functions for handling vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#subsetting-vectors"><i class="fa fa-check"></i>Subsetting vectors</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="calling-functions.html"><a href="calling-functions.html"><i class="fa fa-check"></i><b>11</b> Calling functions</a></li>
<li class="chapter" data-level="12" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html"><i class="fa fa-check"></i><b>12</b> Subsetting &amp; filtering</a><ul>
<li class="chapter" data-level="" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html#subsetting-with-indices"><i class="fa fa-check"></i>Subsetting with indices</a></li>
<li class="chapter" data-level="" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html#subsetting-with-booleans"><i class="fa fa-check"></i>Subsetting with booleans</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>13</b> Dataframes</a><ul>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#subsetting-exploring-dataframes"><i class="fa fa-check"></i>Subsetting &amp; exploring dataframes</a></li>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#creating-dataframes"><i class="fa fa-check"></i>Creating dataframes</a></li>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#modifying-dataframes"><i class="fa fa-check"></i>Modifying dataframes</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>14</b> Packages</a><ul>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#packages-you-already-have"><i class="fa fa-check"></i>Packages you already have</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#installing-a-new-package"><i class="fa fa-check"></i>Installing a new package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#loading-an-installed-package"><i class="fa fa-check"></i>Loading an installed package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#calling-functions-from-a-package"><i class="fa fa-check"></i>Calling functions from a package</a></li>
</ul></li>
<li class="part"><span><b>III Basic <code>R</code> workflow</b></span></li>
<li class="chapter" data-level="15" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>15</b> Importing data</a><ul>
<li><a href="importing-data.html#csv-files"><code>.csv</code> files</a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#data-format-requirements"><i class="fa fa-check"></i>Data format requirements</a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#reading-in-data"><i class="fa fa-check"></i>Reading in data</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="base-plots.html"><a href="base-plots.html"><i class="fa fa-check"></i><b>16</b> Base plots</a><ul>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#create-a-basic-plot"><i class="fa fa-check"></i>Create a basic plot</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#most-common-types-of-plots"><i class="fa fa-check"></i>Most common types of plots</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#basic-plot-formatting"><i class="fa fa-check"></i>Basic plot formatting</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#plotting-with-data-frames"><i class="fa fa-check"></i>Plotting with data frames</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>17</b> <code>ggplot</code></a><ul>
<li><a href="ggplot.html#what-is-ggplot2">What is <code>ggplot2</code>?</a></li>
<li class="chapter" data-level="" data-path="ggplot.html"><a href="ggplot.html#the-name-and-concept"><i class="fa fa-check"></i>The name and concept</a></li>
<li class="chapter" data-level="" data-path="ggplot.html"><a href="ggplot.html#scatter-plot"><i class="fa fa-check"></i>Scatter plot</a></li>
<li class="chapter" data-level="" data-path="ggplot.html"><a href="ggplot.html#bar-plot"><i class="fa fa-check"></i>Bar plot</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>18</b> Dataframe wrangling</a><ul>
<li><a href="dplyr.html#the-dplyr-package">The <code>dplyr</code> package</a></li>
<li><a href="dplyr.html#the-pipe">The <code>%&gt;%</code> pipe</a></li>
<li><a href="dplyr.html#dplyr-verbs"><code>dplyr</code> verbs</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="distributions-histograms.html"><a href="distributions-histograms.html"><i class="fa fa-check"></i><b>19</b> Distributions &amp; histograms</a><ul>
<li class="chapter" data-level="" data-path="distributions-histograms.html"><a href="distributions-histograms.html#exploring-distributions"><i class="fa fa-check"></i>Exploring distributions</a></li>
<li class="chapter" data-level="" data-path="distributions-histograms.html"><a href="distributions-histograms.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="significance-statistics.html"><a href="significance-statistics.html"><i class="fa fa-check"></i><b>20</b> Significance statistics</a><ul>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#p-values"><i class="fa fa-check"></i>p-values</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#tests-for-different-data-types"><i class="fa fa-check"></i>Tests for different data types</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#comparison-tests"><i class="fa fa-check"></i>Comparison tests</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#tests-of-association"><i class="fa fa-check"></i>Tests of association</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#reporting-results"><i class="fa fa-check"></i>Reporting results</a></li>
</ul></li>
<li class="part"><span><b>IV Review exercises</b></span></li>
<li class="chapter" data-level="21" data-path="a-dplyr-mystery.html"><a href="a-dplyr-mystery.html"><i class="fa fa-check"></i><b>21</b> A <code>dplyr</code> mystery</a></li>
<li class="chapter" data-level="22" data-path="a-dplyr-survey.html"><a href="a-dplyr-survey.html"><i class="fa fa-check"></i><b>22</b> A <code>dplyr</code> survey</a></li>
<li class="chapter" data-level="23" data-path="global-health-ggplot.html"><a href="global-health-ggplot.html"><i class="fa fa-check"></i><b>23</b> Global health &amp; <code>ggplot</code></a></li>
<li class="chapter" data-level="24" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html"><i class="fa fa-check"></i><b>24</b> Cleaning messy data</a></li>
<li class="chapter" data-level="25" data-path="shakespeare-text-mining.html"><a href="shakespeare-text-mining.html"><i class="fa fa-check"></i><b>25</b> Shakespeare text mining</a></li>
<li class="chapter" data-level="26" data-path="trump.html"><a href="trump.html"><i class="fa fa-check"></i><b>26</b> Trump tweets</a></li>
<li class="chapter" data-level="27" data-path="sewanees-climate.html"><a href="sewanees-climate.html"><i class="fa fa-check"></i><b>27</b> Sewanee’s climate</a></li>
<li class="part"><span><b>V Reproducible research</b></span></li>
<li class="chapter" data-level="28" data-path="markdown-documentation.html"><a href="markdown-documentation.html"><i class="fa fa-check"></i><b>28</b> <code>Markdown</code> documentation</a><ul>
<li><a href="markdown-documentation.html#documentation-with-markdown">Documentation with <code>Markdown</code></a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>29</b> <code>R Markdown</code></a></li>
<li class="chapter" data-level="30" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>30</b> Interactive dashboards</a><ul>
<li class="chapter" data-level="" data-path="shiny.html"><a href="shiny.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="" data-path="shiny.html"><a href="shiny.html#an-easy-example"><i class="fa fa-check"></i>An easy example</a></li>
<li class="chapter" data-level="" data-path="shiny.html"><a href="shiny.html#exercise"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>31</b> Git</a><ul>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#there-is-a-better-way"><i class="fa fa-check"></i>There is a better way</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#what-is-git"><i class="fa fa-check"></i>What is git?</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#why"><i class="fa fa-check"></i>Why?</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#get-ready-for-git"><i class="fa fa-check"></i>Get ready for git</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#getting-to-know-git-bash"><i class="fa fa-check"></i>Getting to know git bash</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#configuration"><i class="fa fa-check"></i>Configuration</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#github"><i class="fa fa-check"></i>Github</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#a-bit-more-practice"><i class="fa fa-check"></i>A bit more practice</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#advanced-git"><i class="fa fa-check"></i>Advanced git</a></li>
</ul></li>
<li class="chapter" data-level="32" data-path="trump-shiny-git.html"><a href="trump-shiny-git.html"><i class="fa fa-check"></i><b>32</b> Trump, <code>Shiny</code>, &amp; <code>Git</code></a></li>
<li class="part"><span><b>VI Presenting research</b></span></li>
<li class="chapter" data-level="33" data-path="writing-a-report.html"><a href="writing-a-report.html"><i class="fa fa-check"></i><b>33</b> Writing a report</a><ul>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#overall-structure"><i class="fa fa-check"></i>Overall structure</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#abstract"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#results"><i class="fa fa-check"></i>Results</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#discussion"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#other-elements-of-a-report"><i class="fa fa-check"></i>Other elements of a report</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="style.html"><a href="style.html"><i class="fa fa-check"></i><b>34</b> Good research writing</a><ul>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#core-principles"><i class="fa fa-check"></i>Core principles</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#further-considerations"><i class="fa fa-check"></i>Further considerations</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#logistics-of-scientific-writing"><i class="fa fa-check"></i>Logistics of scientific writing</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#formatting-tables"><i class="fa fa-check"></i>Formatting tables</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#formatting-figures"><i class="fa fa-check"></i>Formatting figures</a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="research-talks.html"><a href="research-talks.html"><i class="fa fa-check"></i><b>35</b> Research talks</a></li>
<li class="part"><span><b>VII Deep <code>R</code></b></span></li>
<li class="chapter" data-level="36" data-path="saving-data-plots.html"><a href="saving-data-plots.html"><i class="fa fa-check"></i><b>36</b> Saving data &amp; plots</a><ul>
<li><a href="saving-data-plots.html#write.csv"><code>write.csv()</code></a></li>
<li><a href="saving-data-plots.html#saverds"><code>saveRDS()</code></a></li>
<li><a href="saving-data-plots.html#pdf-and-png"><code>pdf()</code> and <code>png()</code></a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="joining-datasets.html"><a href="joining-datasets.html"><i class="fa fa-check"></i><b>37</b> Joining datasets</a><ul>
<li><a href="joining-datasets.html#joining-with-dplyr">Joining with <code>dplyr</code></a></li>
</ul></li>
<li class="chapter" data-level="38" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>38</b> Working with text</a><ul>
<li class="chapter" data-level="" data-path="text.html"><a href="text.html#basics"><i class="fa fa-check"></i>Basics</a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="dates.html"><a href="dates.html"><i class="fa fa-check"></i><b>39</b> Working with dates &amp; times</a><ul>
<li><a href="dates.html#the-lubridate-package">The <code>lubridate()</code> package</a></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#common-tasks"><i class="fa fa-check"></i>Common tasks</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>40</b> Writing functions</a><ul>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#first-steps"><i class="fa fa-check"></i>First steps</a></li>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#next-steps"><i class="fa fa-check"></i>Next steps</a></li>
<li class="chapter" data-level="40.1" data-path="writing-functions.html"><a href="writing-functions.html#using-dplyr-and-ggplot-in-custom-functions"><i class="fa fa-check"></i><b>40.1</b> Using dplyr and ggplot in custom functions</a></li>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#exercise-3"><i class="fa fa-check"></i>Exercise</a></li>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#sourcing-functions"><i class="fa fa-check"></i>Sourcing functions</a></li>
</ul></li>
<li class="chapter" data-level="41" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>41</b> <code>for</code> loops</a><ul>
<li class="chapter" data-level="" data-path="for-loops.html"><a href="for-loops.html#basics-1"><i class="fa fa-check"></i>Basics</a></li>
<li><a href="for-loops.html#for-loop-exercises"><code>for</code> loop exercises</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="conditional-statements.html"><a href="conditional-statements.html"><i class="fa fa-check"></i><b>42</b> Conditional statements</a><ul>
<li class="chapter" data-level="" data-path="conditional-statements.html"><a href="conditional-statements.html#first-steps-1"><i class="fa fa-check"></i>First steps</a></li>
<li class="chapter" data-level="" data-path="conditional-statements.html"><a href="conditional-statements.html#next-steps-1"><i class="fa fa-check"></i>Next steps</a></li>
</ul></li>
<li class="chapter" data-level="43" data-path="matrices-lists.html"><a href="matrices-lists.html"><i class="fa fa-check"></i><b>43</b> Matrices &amp; lists</a><ul>
<li class="chapter" data-level="" data-path="matrices-lists.html"><a href="matrices-lists.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="matrices-lists.html"><a href="matrices-lists.html#matrices"><i class="fa fa-check"></i>Matrices</a></li>
</ul></li>
<li class="chapter" data-level="44" data-path="advanced-base-plots-in-r.html"><a href="advanced-base-plots-in-r.html"><i class="fa fa-check"></i><b>44</b> Advanced base plots in <code>R</code></a></li>
<li class="chapter" data-level="45" data-path="geographic-computing-gis.html"><a href="geographic-computing-gis.html"><i class="fa fa-check"></i><b>45</b> Geographic computing &amp; GIS</a><ul>
<li class="chapter" data-level="" data-path="geographic-computing-gis.html"><a href="geographic-computing-gis.html#exercise-5"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="46" data-path="mapping.html"><a href="mapping.html"><i class="fa fa-check"></i><b>46</b> Mapping</a></li>
<li class="chapter" data-level="47" data-path="randomization-statistics.html"><a href="randomization-statistics.html"><i class="fa fa-check"></i><b>47</b> Randomization statistics</a><ul>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#basic-idea"><i class="fa fa-check"></i>Basic idea</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#common-use-cases"><i class="fa fa-check"></i>Common use cases</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#review-assignment-5"><i class="fa fa-check"></i>Review assignment</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#c-do-social-bonds-relate-to-kinship"><i class="fa fa-check"></i>(c) Do social bonds relate to kinship?</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/databrew/intro-to-data-science" target="blank">Databrew LLC</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><code>DataBOOM</code>: the canon for data science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr" class="section level1">
<h1><span class="header-section-number">Module 18</span> Dataframe wrangling</h1>
<div id="learning-goals-10" class="section level4 unnumbered">
<h4>Learning goals</h4>
<ul>
<li>Understand the importance of <em>tidy</em> dataframes</li>
<li>Understand what the <code>tidyverse</code> is and why it is awesome</li>
<li>Feel comfortable working with dataframes using <code>dplyr</code> functions.</li>
</ul>
</div>
<div id="the-dplyr-package" class="section level2 unnumbered">
<h2>The <code>dplyr</code> package</h2>
<p>Data scientists largely work in data frames and <em>do things</em> to data. This is what the package <code>dplyr</code> is optimized for. It consists of a series of “verbs” which cover 95% of what you need to do for most basic data processing tasks.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="dplyr.html#cb241-1"></a><span class="kw">install.packages</span>(<span class="st">&#39;dplyr&#39;</span>) <span class="co"># if you haven&#39;t yet</span></span></code></pre></div>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="dplyr.html#cb242-1"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<p>The <code>dplyr</code> package contains a set of <code>verbs</code>: things you do to dataframes. Those verbs are:</p>
<ul>
<li><strong><code>filter()</code></strong><br />
</li>
<li><strong><code>arrange()</code></strong><br />
</li>
<li><strong><code>select()</code></strong><br />
</li>
<li><strong><code>rename()</code></strong><br />
</li>
<li><strong><code>distinct()</code></strong><br />
</li>
<li><strong><code>mutate()</code></strong><br />
</li>
<li><strong><code>summarise()</code></strong></li>
</ul>
</div>
<div id="the-pipe" class="section level2 unnumbered">
<h2>The <code>%&gt;%</code> pipe</h2>
<p><strong><code>%&gt;%</code></strong> is a “pipe”. It is a way to write code without so many parentheses. For example, what if I want to find the square root of the sum of the first six elements of a sequence of 10 to 20 by 2?</p>
<p>Here’s what that command would look like in base <code>R</code>:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="dplyr.html#cb243-1"></a><span class="kw">sqrt</span>(<span class="kw">sum</span>(<span class="kw">head</span>(<span class="kw">seq</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">2</span>))))</span>
<span id="cb243-2"><a href="dplyr.html#cb243-2"></a>[<span class="dv">1</span>] <span class="fl">9.486833</span></span></code></pre></div>
<p>Pretty overwhelming, and pretty easy to make errors in writing it out.</p>
<p>But the above could also be written a simpler way:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="dplyr.html#cb244-1"></a><span class="kw">seq</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span>head <span class="op">%&gt;%</span><span class="st"> </span>sum <span class="op">%&gt;%</span><span class="st"> </span>sqrt</span>
<span id="cb244-2"><a href="dplyr.html#cb244-2"></a>[<span class="dv">1</span>] <span class="fl">9.486833</span></span></code></pre></div>
<p>When you see the <strong><code>%&gt;%</code></strong> pipe symbol, think of the word <strong>“then”</strong>.</p>
<p>The above code could be read aloud like so: “First, get a sequence of every second number between 10 and 20. <strong>Then</strong>, take the first six values. <strong>Then</strong>, sum those samples together. <strong>Then</strong>, take the square root of that sum.”</p>
<p>Using the <code>%&gt;%</code> pipe framework, your code turns from a nonlinear series of parentheses and brackets to a linear progression of steps, which is a closer fit to how we tend to think about working with data. Instead of working from the inside of a command outward, we thinking linearly: take the data, <strong>then</strong> do things with it, <strong>then</strong> do more things with it, etc.</p>
<p>Here’s another example:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="dplyr.html#cb245-1"></a><span class="kw">mean</span>(<span class="kw">sd</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>))</span>
<span id="cb245-2"><a href="dplyr.html#cb245-2"></a>[<span class="dv">1</span>] <span class="fl">29.01149</span></span></code></pre></div>
<p>… could also be written as:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="dplyr.html#cb246-1"></a><span class="dv">1</span><span class="op">:</span><span class="dv">100</span> <span class="op">%&gt;%</span><span class="st"> </span>sd <span class="op">%&gt;%</span><span class="st"> </span>mean</span>
<span id="cb246-2"><a href="dplyr.html#cb246-2"></a>[<span class="dv">1</span>] <span class="fl">29.01149</span></span></code></pre></div>
</div>
<div id="dplyr-verbs" class="section level2 unnumbered">
<h2><code>dplyr</code> verbs</h2>
<p>To practice the <code>dplyr</code> verbs, let’s make a small dataframe named <code>people</code>:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="dplyr.html#cb247-1"></a>people &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">who =</span> <span class="kw">c</span>(<span class="st">&#39;Joe&#39;</span>, <span class="st">&#39;Ben&#39;</span>, <span class="st">&#39;Xing&#39;</span>, <span class="st">&#39;Coloma&#39;</span>),</span>
<span id="cb247-2"><a href="dplyr.html#cb247-2"></a>                    <span class="dt">sex =</span> <span class="kw">c</span>(<span class="st">&#39;Male&#39;</span>, <span class="st">&#39;Male&#39;</span>, <span class="st">&#39;Female&#39;</span>, <span class="st">&#39;Female&#39;</span>),</span>
<span id="cb247-3"><a href="dplyr.html#cb247-3"></a>                    <span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">35</span>, <span class="dv">33</span>, <span class="dv">32</span>, <span class="dv">34</span>))</span>
<span id="cb247-4"><a href="dplyr.html#cb247-4"></a>people</span>
<span id="cb247-5"><a href="dplyr.html#cb247-5"></a>     who    sex age</span>
<span id="cb247-6"><a href="dplyr.html#cb247-6"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span></span>
<span id="cb247-7"><a href="dplyr.html#cb247-7"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb247-8"><a href="dplyr.html#cb247-8"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb247-9"><a href="dplyr.html#cb247-9"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span></span></code></pre></div>
<div id="filter" class="section level3 unnumbered">
<h3><code>filter()</code></h3>
<p>The <code>filter()</code> function is used to subset a dataframe, retaining all rows that satisfy your conditions. To be retained, the row must produce a value of <code>TRUE</code> for all conditions.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="dplyr.html#cb248-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Male&#39;</span>)</span>
<span id="cb248-2"><a href="dplyr.html#cb248-2"></a>  who  sex age</span>
<span id="cb248-3"><a href="dplyr.html#cb248-3"></a><span class="dv">1</span> Joe Male  <span class="dv">35</span></span>
<span id="cb248-4"><a href="dplyr.html#cb248-4"></a><span class="dv">2</span> Ben Male  <span class="dv">33</span></span></code></pre></div>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="dplyr.html#cb249-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Female&#39;</span>)</span>
<span id="cb249-2"><a href="dplyr.html#cb249-2"></a>     who    sex age</span>
<span id="cb249-3"><a href="dplyr.html#cb249-3"></a><span class="dv">1</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb249-4"><a href="dplyr.html#cb249-4"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span></code></pre></div>
<p>You can also filter according to multiple conditions. Here are three ways to acheive the same thing:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="dplyr.html#cb250-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Female&#39;</span> <span class="op">&amp;</span><span class="st"> </span>age <span class="op">&lt;</span><span class="st"> </span><span class="dv">33</span>)</span>
<span id="cb250-2"><a href="dplyr.html#cb250-2"></a>   who    sex age</span>
<span id="cb250-3"><a href="dplyr.html#cb250-3"></a><span class="dv">1</span> Xing Female  <span class="dv">32</span></span></code></pre></div>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="dplyr.html#cb251-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Female&#39;</span>, age <span class="op">&lt;</span><span class="st"> </span><span class="dv">33</span>)</span>
<span id="cb251-2"><a href="dplyr.html#cb251-2"></a>   who    sex age</span>
<span id="cb251-3"><a href="dplyr.html#cb251-3"></a><span class="dv">1</span> Xing Female  <span class="dv">32</span></span></code></pre></div>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="dplyr.html#cb252-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &#39;Female&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(age <span class="op">&lt;</span><span class="st"> </span><span class="dv">33</span>)</span>
<span id="cb252-2"><a href="dplyr.html#cb252-2"></a>   who    sex age</span>
<span id="cb252-3"><a href="dplyr.html#cb252-3"></a><span class="dv">1</span> Xing Female  <span class="dv">32</span></span></code></pre></div>
<p>Note that when a condition evaluates to <code>NA</code>, its row will be dropped. This differ from the base subsetting works with <code>[ ... ]</code>.</p>
</div>
<div id="arrange" class="section level3 unnumbered">
<h3><code>arrange()</code></h3>
<p>Arrange means putting things in order. That is, <code>arrange()</code> orders the rows of a data frame by the values of selected columns.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="dplyr.html#cb253-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(age)</span>
<span id="cb253-2"><a href="dplyr.html#cb253-2"></a>     who    sex age</span>
<span id="cb253-3"><a href="dplyr.html#cb253-3"></a><span class="dv">1</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb253-4"><a href="dplyr.html#cb253-4"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb253-5"><a href="dplyr.html#cb253-5"></a><span class="dv">3</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb253-6"><a href="dplyr.html#cb253-6"></a><span class="dv">4</span>    Joe   Male  <span class="dv">35</span></span></code></pre></div>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="dplyr.html#cb254-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(sex)</span>
<span id="cb254-2"><a href="dplyr.html#cb254-2"></a>     who    sex age</span>
<span id="cb254-3"><a href="dplyr.html#cb254-3"></a><span class="dv">1</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb254-4"><a href="dplyr.html#cb254-4"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb254-5"><a href="dplyr.html#cb254-5"></a><span class="dv">3</span>    Joe   Male  <span class="dv">35</span></span>
<span id="cb254-6"><a href="dplyr.html#cb254-6"></a><span class="dv">4</span>    Ben   Male  <span class="dv">33</span></span></code></pre></div>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="dplyr.html#cb255-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(who)</span>
<span id="cb255-2"><a href="dplyr.html#cb255-2"></a>     who    sex age</span>
<span id="cb255-3"><a href="dplyr.html#cb255-3"></a><span class="dv">1</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb255-4"><a href="dplyr.html#cb255-4"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb255-5"><a href="dplyr.html#cb255-5"></a><span class="dv">3</span>    Joe   Male  <span class="dv">35</span></span>
<span id="cb255-6"><a href="dplyr.html#cb255-6"></a><span class="dv">4</span>   Xing Female  <span class="dv">32</span></span></code></pre></div>
<p>To reverse the order, use <code>desc()</code>:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="dplyr.html#cb256-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(age))</span>
<span id="cb256-2"><a href="dplyr.html#cb256-2"></a>     who    sex age</span>
<span id="cb256-3"><a href="dplyr.html#cb256-3"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span></span>
<span id="cb256-4"><a href="dplyr.html#cb256-4"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb256-5"><a href="dplyr.html#cb256-5"></a><span class="dv">3</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb256-6"><a href="dplyr.html#cb256-6"></a><span class="dv">4</span>   Xing Female  <span class="dv">32</span></span></code></pre></div>
<p>You can also arrange by multiple levels:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="dplyr.html#cb257-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(sex, age)</span>
<span id="cb257-2"><a href="dplyr.html#cb257-2"></a>     who    sex age</span>
<span id="cb257-3"><a href="dplyr.html#cb257-3"></a><span class="dv">1</span>   Xing Female  <span class="dv">32</span></span>
<span id="cb257-4"><a href="dplyr.html#cb257-4"></a><span class="dv">2</span> Coloma Female  <span class="dv">34</span></span>
<span id="cb257-5"><a href="dplyr.html#cb257-5"></a><span class="dv">3</span>    Ben   Male  <span class="dv">33</span></span>
<span id="cb257-6"><a href="dplyr.html#cb257-6"></a><span class="dv">4</span>    Joe   Male  <span class="dv">35</span></span></code></pre></div>
</div>
<div id="select" class="section level3 unnumbered">
<h3><code>select()</code></h3>
<p>Select only certain variables in a data frame, making the dataframe skinnier (fewer columns).</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="dplyr.html#cb258-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(age)</span>
<span id="cb258-2"><a href="dplyr.html#cb258-2"></a>  age</span>
<span id="cb258-3"><a href="dplyr.html#cb258-3"></a><span class="dv">1</span>  <span class="dv">35</span></span>
<span id="cb258-4"><a href="dplyr.html#cb258-4"></a><span class="dv">2</span>  <span class="dv">33</span></span>
<span id="cb258-5"><a href="dplyr.html#cb258-5"></a><span class="dv">3</span>  <span class="dv">32</span></span>
<span id="cb258-6"><a href="dplyr.html#cb258-6"></a><span class="dv">4</span>  <span class="dv">34</span></span></code></pre></div>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="dplyr.html#cb259-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(sex, age)</span>
<span id="cb259-2"><a href="dplyr.html#cb259-2"></a>     sex age</span>
<span id="cb259-3"><a href="dplyr.html#cb259-3"></a><span class="dv">1</span>   Male  <span class="dv">35</span></span>
<span id="cb259-4"><a href="dplyr.html#cb259-4"></a><span class="dv">2</span>   Male  <span class="dv">33</span></span>
<span id="cb259-5"><a href="dplyr.html#cb259-5"></a><span class="dv">3</span> Female  <span class="dv">32</span></span>
<span id="cb259-6"><a href="dplyr.html#cb259-6"></a><span class="dv">4</span> Female  <span class="dv">34</span></span></code></pre></div>
<p>As you select columns, you can rename them like so:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="dplyr.html#cb260-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(sex, <span class="dt">years =</span> age)</span>
<span id="cb260-2"><a href="dplyr.html#cb260-2"></a>     sex years</span>
<span id="cb260-3"><a href="dplyr.html#cb260-3"></a><span class="dv">1</span>   Male    <span class="dv">35</span></span>
<span id="cb260-4"><a href="dplyr.html#cb260-4"></a><span class="dv">2</span>   Male    <span class="dv">33</span></span>
<span id="cb260-5"><a href="dplyr.html#cb260-5"></a><span class="dv">3</span> Female    <span class="dv">32</span></span>
<span id="cb260-6"><a href="dplyr.html#cb260-6"></a><span class="dv">4</span> Female    <span class="dv">34</span></span></code></pre></div>
<p>You can also select a set of columns using the <code>:</code> notation:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="dplyr.html#cb261-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(who<span class="op">:</span>sex)</span>
<span id="cb261-2"><a href="dplyr.html#cb261-2"></a>     who    sex</span>
<span id="cb261-3"><a href="dplyr.html#cb261-3"></a><span class="dv">1</span>    Joe   Male</span>
<span id="cb261-4"><a href="dplyr.html#cb261-4"></a><span class="dv">2</span>    Ben   Male</span>
<span id="cb261-5"><a href="dplyr.html#cb261-5"></a><span class="dv">3</span>   Xing Female</span>
<span id="cb261-6"><a href="dplyr.html#cb261-6"></a><span class="dv">4</span> Coloma Female</span></code></pre></div>
</div>
<div id="rename" class="section level3 unnumbered">
<h3><code>rename()</code></h3>
<p>The function <code>rename()</code> changes the names of individual variables.</p>
<p>This verb takes the syntax <code>&lt;new_name&gt; = &lt;old_name&gt;</code> syntax.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="dplyr.html#cb262-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename</span>(<span class="dt">gender =</span> sex, <span class="dt">years =</span> age, <span class="dt">first_name =</span> who)</span>
<span id="cb262-2"><a href="dplyr.html#cb262-2"></a>  first_name gender years</span>
<span id="cb262-3"><a href="dplyr.html#cb262-3"></a><span class="dv">1</span>        Joe   Male    <span class="dv">35</span></span>
<span id="cb262-4"><a href="dplyr.html#cb262-4"></a><span class="dv">2</span>        Ben   Male    <span class="dv">33</span></span>
<span id="cb262-5"><a href="dplyr.html#cb262-5"></a><span class="dv">3</span>       Xing Female    <span class="dv">32</span></span>
<span id="cb262-6"><a href="dplyr.html#cb262-6"></a><span class="dv">4</span>     Coloma Female    <span class="dv">34</span></span></code></pre></div>
</div>
<div id="mutate" class="section level3 unnumbered">
<h3><code>mutate()</code></h3>
<p>The function <code>mutate()</code> adds new variables and preserves existing ones.</p>
<p>New variables overwrite existing variables of the same name.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="dplyr.html#cb263-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">agein2020 =</span> age <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb263-2"><a href="dplyr.html#cb263-2"></a>     who    sex age agein2020</span>
<span id="cb263-3"><a href="dplyr.html#cb263-3"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span>        <span class="dv">34</span></span>
<span id="cb263-4"><a href="dplyr.html#cb263-4"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span>        <span class="dv">32</span></span>
<span id="cb263-5"><a href="dplyr.html#cb263-5"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span>        <span class="dv">31</span></span>
<span id="cb263-6"><a href="dplyr.html#cb263-6"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span>        <span class="dv">33</span></span></code></pre></div>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="dplyr.html#cb264-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">is_male =</span> sex <span class="op">==</span><span class="st"> &#39;Male&#39;</span>)</span>
<span id="cb264-2"><a href="dplyr.html#cb264-2"></a>     who    sex age is_male</span>
<span id="cb264-3"><a href="dplyr.html#cb264-3"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span>    <span class="ot">TRUE</span></span>
<span id="cb264-4"><a href="dplyr.html#cb264-4"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span>    <span class="ot">TRUE</span></span>
<span id="cb264-5"><a href="dplyr.html#cb264-5"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span>   <span class="ot">FALSE</span></span>
<span id="cb264-6"><a href="dplyr.html#cb264-6"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span>   <span class="ot">FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="dplyr.html#cb265-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">average_age =</span> <span class="kw">mean</span>(age))</span>
<span id="cb265-2"><a href="dplyr.html#cb265-2"></a>     who    sex age average_age</span>
<span id="cb265-3"><a href="dplyr.html#cb265-3"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span>        <span class="fl">33.5</span></span>
<span id="cb265-4"><a href="dplyr.html#cb265-4"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span>        <span class="fl">33.5</span></span>
<span id="cb265-5"><a href="dplyr.html#cb265-5"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span>        <span class="fl">33.5</span></span>
<span id="cb265-6"><a href="dplyr.html#cb265-6"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span>        <span class="fl">33.5</span></span></code></pre></div>
<p>You can call <code>mutate()</code> multiple times in the same pipe:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="dplyr.html#cb266-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">average_age =</span> <span class="kw">mean</span>(age)) <span class="op">%&gt;%</span></span>
<span id="cb266-2"><a href="dplyr.html#cb266-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">diff_from_avg =</span> age <span class="op">-</span><span class="st"> </span>average_age)</span>
<span id="cb266-3"><a href="dplyr.html#cb266-3"></a>     who    sex age average_age diff_from_avg</span>
<span id="cb266-4"><a href="dplyr.html#cb266-4"></a><span class="dv">1</span>    Joe   Male  <span class="dv">35</span>        <span class="fl">33.5</span>           <span class="fl">1.5</span></span>
<span id="cb266-5"><a href="dplyr.html#cb266-5"></a><span class="dv">2</span>    Ben   Male  <span class="dv">33</span>        <span class="fl">33.5</span>          <span class="fl">-0.5</span></span>
<span id="cb266-6"><a href="dplyr.html#cb266-6"></a><span class="dv">3</span>   Xing Female  <span class="dv">32</span>        <span class="fl">33.5</span>          <span class="fl">-1.5</span></span>
<span id="cb266-7"><a href="dplyr.html#cb266-7"></a><span class="dv">4</span> Coloma Female  <span class="dv">34</span>        <span class="fl">33.5</span>           <span class="fl">0.5</span></span></code></pre></div>
<p>You can also remove variables can be removed by setting their value to NULL.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="dplyr.html#cb267-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">age =</span> <span class="ot">NULL</span>)</span>
<span id="cb267-2"><a href="dplyr.html#cb267-2"></a>     who    sex</span>
<span id="cb267-3"><a href="dplyr.html#cb267-3"></a><span class="dv">1</span>    Joe   Male</span>
<span id="cb267-4"><a href="dplyr.html#cb267-4"></a><span class="dv">2</span>    Ben   Male</span>
<span id="cb267-5"><a href="dplyr.html#cb267-5"></a><span class="dv">3</span>   Xing Female</span>
<span id="cb267-6"><a href="dplyr.html#cb267-6"></a><span class="dv">4</span> Coloma Female</span></code></pre></div>
<p>A similar function, <code>transmute()</code>, adds new variables and drops existing ones, kind of like a combination of <code>select()</code> and <code>mutate()</code>.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="dplyr.html#cb268-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">transmute</span>(<span class="dt">average_age =</span> <span class="kw">mean</span>(age))</span>
<span id="cb268-2"><a href="dplyr.html#cb268-2"></a>  average_age</span>
<span id="cb268-3"><a href="dplyr.html#cb268-3"></a><span class="dv">1</span>        <span class="fl">33.5</span></span>
<span id="cb268-4"><a href="dplyr.html#cb268-4"></a><span class="dv">2</span>        <span class="fl">33.5</span></span>
<span id="cb268-5"><a href="dplyr.html#cb268-5"></a><span class="dv">3</span>        <span class="fl">33.5</span></span>
<span id="cb268-6"><a href="dplyr.html#cb268-6"></a><span class="dv">4</span>        <span class="fl">33.5</span></span></code></pre></div>
</div>
<div id="group_by" class="section level3 unnumbered">
<h3><code>group_by()</code></h3>
<p>Most data operations are done on groups defined by variables. The function <code>group_by()</code> takes an existing table and converts it into a grouped one where operations are performed “by group”.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="dplyr.html#cb269-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb269-2"><a href="dplyr.html#cb269-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb269-3"><a href="dplyr.html#cb269-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">average_age_for_sex =</span> <span class="kw">mean</span>(age)) </span>
<span id="cb269-4"><a href="dplyr.html#cb269-4"></a><span class="co"># A tibble: 4 × 4</span></span>
<span id="cb269-5"><a href="dplyr.html#cb269-5"></a><span class="co"># Groups:   sex [2]</span></span>
<span id="cb269-6"><a href="dplyr.html#cb269-6"></a>  who    sex      age average_age_for_sex</span>
<span id="cb269-7"><a href="dplyr.html#cb269-7"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">               </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb269-8"><a href="dplyr.html#cb269-8"></a><span class="dv">1</span> Joe    Male      <span class="dv">35</span>                  <span class="dv">34</span></span>
<span id="cb269-9"><a href="dplyr.html#cb269-9"></a><span class="dv">2</span> Ben    Male      <span class="dv">33</span>                  <span class="dv">34</span></span>
<span id="cb269-10"><a href="dplyr.html#cb269-10"></a><span class="dv">3</span> Xing   Female    <span class="dv">32</span>                  <span class="dv">33</span></span>
<span id="cb269-11"><a href="dplyr.html#cb269-11"></a><span class="dv">4</span> Coloma Female    <span class="dv">34</span>                  <span class="dv">33</span></span></code></pre></div>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="dplyr.html#cb270-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb270-2"><a href="dplyr.html#cb270-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb270-3"><a href="dplyr.html#cb270-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">average_age_for_sex =</span> <span class="kw">mean</span>(age)) <span class="op">%&gt;%</span></span>
<span id="cb270-4"><a href="dplyr.html#cb270-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">diff_from_avg_for_sex =</span> age <span class="op">-</span><span class="st"> </span>average_age_for_sex)</span>
<span id="cb270-5"><a href="dplyr.html#cb270-5"></a><span class="co"># A tibble: 4 × 5</span></span>
<span id="cb270-6"><a href="dplyr.html#cb270-6"></a><span class="co"># Groups:   sex [2]</span></span>
<span id="cb270-7"><a href="dplyr.html#cb270-7"></a>  who    sex      age average_age_for_sex diff_from_avg_for_sex</span>
<span id="cb270-8"><a href="dplyr.html#cb270-8"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">               </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">                 </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb270-9"><a href="dplyr.html#cb270-9"></a><span class="dv">1</span> Joe    Male      <span class="dv">35</span>                  <span class="dv">34</span>                     <span class="dv">1</span></span>
<span id="cb270-10"><a href="dplyr.html#cb270-10"></a><span class="dv">2</span> Ben    Male      <span class="dv">33</span>                  <span class="dv">34</span>                    <span class="dv">-1</span></span>
<span id="cb270-11"><a href="dplyr.html#cb270-11"></a><span class="dv">3</span> Xing   Female    <span class="dv">32</span>                  <span class="dv">33</span>                    <span class="dv">-1</span></span>
<span id="cb270-12"><a href="dplyr.html#cb270-12"></a><span class="dv">4</span> Coloma Female    <span class="dv">34</span>                  <span class="dv">33</span>                     <span class="dv">1</span></span></code></pre></div>
<p>Note that a similar verb, <code>ungroup()</code>, removes grouping.</p>
</div>
<div id="summarize" class="section level3 unnumbered">
<h3><code>summarize()</code></h3>
<p><code>summarize()</code> or <code>summarize()</code> creates an entirely new data frame. It will have one (or more) rows for each combination of grouping variables; if there are no grouping variables, the output will have a single row summarizing all observations in the input. It will contain one column for each grouping variable and one column for each of the summary statistics that you have specified.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="dplyr.html#cb271-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb271-2"><a href="dplyr.html#cb271-2"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">average_age =</span> <span class="kw">mean</span>(age))</span>
<span id="cb271-3"><a href="dplyr.html#cb271-3"></a>  average_age</span>
<span id="cb271-4"><a href="dplyr.html#cb271-4"></a><span class="dv">1</span>        <span class="fl">33.5</span></span></code></pre></div>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="dplyr.html#cb272-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb272-2"><a href="dplyr.html#cb272-2"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">average_age =</span> <span class="kw">mean</span>(age),</span>
<span id="cb272-3"><a href="dplyr.html#cb272-3"></a>            <span class="dt">standard_dev_of_age =</span> <span class="kw">sd</span>(age),</span>
<span id="cb272-4"><a href="dplyr.html#cb272-4"></a>            <span class="dt">oldest_age =</span> <span class="kw">max</span>(age),</span>
<span id="cb272-5"><a href="dplyr.html#cb272-5"></a>            <span class="dt">youngest_age =</span> <span class="kw">min</span>(age))</span>
<span id="cb272-6"><a href="dplyr.html#cb272-6"></a>  average_age standard_dev_of_age oldest_age youngest_age</span>
<span id="cb272-7"><a href="dplyr.html#cb272-7"></a><span class="dv">1</span>        <span class="fl">33.5</span>            <span class="fl">1.290994</span>         <span class="dv">35</span>           <span class="dv">32</span></span></code></pre></div>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="dplyr.html#cb273-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb273-2"><a href="dplyr.html#cb273-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb273-3"><a href="dplyr.html#cb273-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">avg_age =</span> <span class="kw">mean</span>(age),</span>
<span id="cb273-4"><a href="dplyr.html#cb273-4"></a>            <span class="dt">oldest_age =</span> <span class="kw">max</span>(age),</span>
<span id="cb273-5"><a href="dplyr.html#cb273-5"></a>            <span class="dt">total_years =</span> <span class="kw">sum</span>(age)) </span>
<span id="cb273-6"><a href="dplyr.html#cb273-6"></a><span class="co"># A tibble: 2 × 4</span></span>
<span id="cb273-7"><a href="dplyr.html#cb273-7"></a>  sex    avg_age oldest_age total_years</span>
<span id="cb273-8"><a href="dplyr.html#cb273-8"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb273-9"><a href="dplyr.html#cb273-9"></a><span class="dv">1</span> Female      <span class="dv">33</span>         <span class="dv">34</span>          <span class="dv">66</span></span>
<span id="cb273-10"><a href="dplyr.html#cb273-10"></a><span class="dv">2</span> Male        <span class="dv">34</span>         <span class="dv">35</span>          <span class="dv">68</span></span></code></pre></div>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="dplyr.html#cb274-1"></a>people <span class="op">%&gt;%</span></span>
<span id="cb274-2"><a href="dplyr.html#cb274-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span></span>
<span id="cb274-3"><a href="dplyr.html#cb274-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">sample_size =</span> <span class="kw">n</span>())</span>
<span id="cb274-4"><a href="dplyr.html#cb274-4"></a><span class="co"># A tibble: 2 × 2</span></span>
<span id="cb274-5"><a href="dplyr.html#cb274-5"></a>  sex    sample_size</span>
<span id="cb274-6"><a href="dplyr.html#cb274-6"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb274-7"><a href="dplyr.html#cb274-7"></a><span class="dv">1</span> Female           <span class="dv">2</span></span>
<span id="cb274-8"><a href="dplyr.html#cb274-8"></a><span class="dv">2</span> Male             <span class="dv">2</span></span></code></pre></div>
<p>Note the use of the function, <strong><code>n()</code></strong>. This simple function counts up the number of records in each group.</p>
<div id="tip-text" class="tip">
<p><strong>Instructor tip:</strong></p>
<p>To illustrate these <code>dplyr</code> verbs and re-energize the room, ask everyone to stand. Tell the students that they represent a dataframe called <code>people</code>. Now, write a <code>dplyr</code> command into your R Console and ask them to act out the command. After each command, give them time to move around to act it out. If they move around too slowly, egg them on: “Come on, you all are like the slowest computer ever!” <br><br> <code>people %&gt;% arrange(shoe_size)</code> <br> <code>people %&gt;% arrange(shoe_size) %&gt;% filter(sex == "female")</code> <br> <code>people %&gt;% arrange(hair_length)</code> <br> <code>people %&gt;% arrange(desc(hair_length))</code> <br> <code>people %&gt;% group_by(sex) %&gt;% arrange(hair_length))</code> <br><code>people %&gt;% arrange(country_of_birth, shirt_color, desc(shoe_size))</code> <br><br> etc.</p>
</div>
<div id="exercises-9" class="section level4 unnumbered">
<h4>Exercises</h4>
<p>Answer these questions using the new <code>dplyr</code> verbs you just learned:</p>
<p><strong>Baby names over time</strong></p>
<p><strong>1.</strong> Run the below code to load a dataset about baby names given in the USA since the 1800’s.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="dplyr.html#cb275-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb275-2"><a href="dplyr.html#cb275-2"></a><span class="kw">library</span>(babynames)</span>
<span id="cb275-3"><a href="dplyr.html#cb275-3"></a>bn &lt;-<span class="st"> </span>babynames</span></code></pre></div>
<p><strong>2.</strong> Check out the first and last six rows of <code>bn</code>.</p>
<p><strong>3.</strong> What are the names of the variables in this dataset?</p>
<p><strong>4.</strong> How many rows are in this dataset?</p>
<p><strong>5.</strong> What is the earliest year in this dataset?</p>
<p><strong>6.</strong> Create a dataframe named <code>turn_of_century</code>, which contain data only for the year 1900.</p>
<p><strong>7.</strong> Create a dataframe named <code>boys</code>, containing only boys.</p>
<p><strong>8.</strong> Create a dataframe named <code>moms_gen</code>. This should be females born in the year of birth of your mom.</p>
<p><strong>9.</strong> Order <code>moms_gen</code> by <code>n</code>, in ascending order (i.e., with the least popular name at top). Look at the result; what is the least popular name among women the year your mom was born?</p>
<p><strong>10.</strong> Reverse the order and save the result into an object named <code>moms_gen_ordered</code>.</p>
<p><strong>11.</strong> Create an object named <code>boys2k</code>. This should be all males born in the year 2000.</p>
<p><strong>12.</strong> Arrange <code>boys2k</code> from most to least popular. What was the most popular boys name in 2000?</p>
<p><strong>13.</strong> What percentage of boys were named <code>Joseph</code> in 2000?</p>
<p><strong>14.</strong> Were there more Jims or Matthews in 2020?</p>
<p><strong>15.</strong> Create an object named <code>tot_names_by_year</code>, which contains the total counts for boy and girl names assigned in each year of the dataset. You should have four columns: <code>year</code>, <code>boys</code>, <code>girls</code>, and <code>tot</code>.</p>
<p><strong>16.</strong> How many people were born with <em>your</em> name in 2020?</p>
<p><strong>17.</strong> Was your name more prevalent in 2020 than it was in the year you were born?</p>
<p><strong>18.</strong> What if you account for the changing overall population size? In other words, is the <em>proportional prevalence</em> of your name greater in 2020 or your birth year?</p>
<p><strong>19.</strong> In which year was your name the most prevalent?</p>
<p><strong>20.</strong> Create a basic plot of the proportional prevalence of your name since the earliest year of this dataset.</p>
<p><strong>21.</strong> Update this plot with lines for your parent’s names and your siblings names, if you have any.</p>
<p><strong>22.</strong> Format that plot so that it is gorgeous and well-labelled.</p>
<p><strong>23.</strong> Screenshot it and email it to your family.</p>
<div id="tip-text" class="tip">
<p><strong>Instructor tip:</strong></p>
<p>After completing the exercises here, it is worthwhile devoting time to the Review modules entitled, <strong>“A <code>dplyr</code> mystery”</strong>, <strong>“A <code>dplyr</code> survey”</strong>, and <strong>“Global health and <code>ggplot</code>”</strong>. Once students become comfortable with working with <code>dplyr</code>, they will be ready to work independently on projects, using the modules in the <strong>Deep <code>R</code></strong> section for references.</p>
</div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="distributions-histograms.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/databrew/intro-to-data-science/edit/master/04e-dataframes2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["intro-to-data-science.pdf", "intro-to-data-science.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
