<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 39 Working with text | DataBOOM: the canon for data science</title>
  <meta name="description" content="Data science is just data and science. But it’s better with pizza." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 39 Working with text | DataBOOM: the canon for data science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Data science is just data and science. But it’s better with pizza." />
  <meta name="github-repo" content="databrew/intro-to-data-science" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 39 Working with text | DataBOOM: the canon for data science" />
  
  <meta name="twitter:description" content="Data science is just data and science. But it’s better with pizza." />
  

<meta name="author" content="Databrew" />


<meta name="date" content="2021-09-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="joining-datasets.html"/>
<link rel="next" href="dates.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DataBOOM: the canon for data science </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-this-is-and-what-it-isnt"><i class="fa fa-check"></i>What this is, and what it isn’t</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-this-is-for"><i class="fa fa-check"></i>Who this is for</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-will-learn"><i class="fa fa-check"></i>What you will learn</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
</ul></li>
<li class="part"><span><b>I Core theory</b></span></li>
<li class="chapter" data-level="2" data-path="what-is-data-science.html"><a href="what-is-data-science.html"><i class="fa fa-check"></i><b>2</b> What is data science?</a><ul>
<li class="chapter" data-level="" data-path="what-is-data-science.html"><a href="what-is-data-science.html#what-is-the-data-life-cycle"><i class="fa fa-check"></i>What is the data life cycle?</a></li>
<li class="chapter" data-level="" data-path="what-is-data-science.html"><a href="what-is-data-science.html#data-science-in-the-wild"><i class="fa fa-check"></i>Data science ‘in the wild’</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-reproducibility-crisis.html"><a href="the-reproducibility-crisis.html"><i class="fa fa-check"></i><b>3</b> The reproducibility crisis</a><ul>
<li class="chapter" data-level="" data-path="the-reproducibility-crisis.html"><a href="the-reproducibility-crisis.html#the-crisis"><i class="fa fa-check"></i>The crisis</a></li>
<li class="chapter" data-level="" data-path="the-reproducibility-crisis.html"><a href="the-reproducibility-crisis.html#the-reproducibility-movement"><i class="fa fa-check"></i>The ‘reproducibility’ movement</a></li>
<li><a href="the-reproducibility-crisis.html#why-r">Why <code>R</code>?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-ethics.html"><a href="data-ethics.html"><i class="fa fa-check"></i><b>4</b> Data ethics</a><ul>
<li class="chapter" data-level="" data-path="data-ethics.html"><a href="data-ethics.html#a-few-principles"><i class="fa fa-check"></i>A few principles</a></li>
<li class="chapter" data-level="" data-path="data-ethics.html"><a href="data-ethics.html#warm-up-scenarios"><i class="fa fa-check"></i>Warm up scenarios</a></li>
<li class="chapter" data-level="" data-path="data-ethics.html"><a href="data-ethics.html#case-studies"><i class="fa fa-check"></i>Case studies</a></li>
<li class="chapter" data-level="" data-path="data-ethics.html"><a href="data-ethics.html#more-scenarios"><i class="fa fa-check"></i>More scenarios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>5</b> Visualizing data</a><ul>
<li><a href="dataviz.html#the-value-of-data-viz">The value of <em>data viz</em></a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#plot-gallery"><i class="fa fa-check"></i>Plot gallery</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#chart-junk"><i class="fa fa-check"></i>Chart junk</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#final-thoughts"><i class="fa fa-check"></i>Final thoughts</a></li>
</ul></li>
<li class="part"><span><b>II Getting sta<code>r</code>ted</b></span></li>
<li class="chapter" data-level="6" data-path="setting-up-rstudio.html"><a href="setting-up-rstudio.html"><i class="fa fa-check"></i><b>6</b> Setting up <code>RStudio</code></a></li>
<li class="chapter" data-level="7" data-path="running-r-code.html"><a href="running-r-code.html"><i class="fa fa-check"></i><b>7</b> Running R code</a><ul>
<li><a href="running-r-code.html#running-code-in-the-console">Running code in the <em>Console</em></a></li>
<li class="chapter" data-level="" data-path="running-r-code.html"><a href="running-r-code.html#use-r-like-a-calculator"><i class="fa fa-check"></i>Use R like a calculator</a></li>
<li><a href="running-r-code.html#getting-along-with-r">Getting along with <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html"><i class="fa fa-check"></i><b>8</b> Using <code>RStudio</code> &amp; <code>R</code> scripts</a><ul>
<li><a href="using-rstudio-r-scripts.html#r-and-rstudio-whats-the-difference"><code>R</code> and <code>RStudio</code>: what’s the difference?</a></li>
<li><a href="using-rstudio-r-scripts.html#two-minute-tour-of-rstudio">Two-minute tour of <code>RStudio</code></a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#scripts"><i class="fa fa-check"></i>Scripts</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#wd"><i class="fa fa-check"></i>Your working directory</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-r-scripts.html"><a href="using-rstudio-r-scripts.html#typical-workflows"><i class="fa fa-check"></i>Typical workflows</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="variables.html"><a href="variables.html"><i class="fa fa-check"></i><b>9</b> Variables</a><ul>
<li class="chapter" data-level="" data-path="variables.html"><a href="variables.html#introducing-variables"><i class="fa fa-check"></i>Introducing variables</a></li>
<li><a href="variables.html#types-of-data-in-r">Types of data in <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>10</b> Vectors</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#declaring-and-using-vectors"><i class="fa fa-check"></i>Declaring and using vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#math-with-two-vectors"><i class="fa fa-check"></i>Math with two vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#functions-for-handling-vectors"><i class="fa fa-check"></i>Functions for handling vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#subsetting-vectors"><i class="fa fa-check"></i>Subsetting vectors</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="calling-functions.html"><a href="calling-functions.html"><i class="fa fa-check"></i><b>11</b> Calling functions</a></li>
<li class="chapter" data-level="12" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html"><i class="fa fa-check"></i><b>12</b> Subsetting &amp; filtering</a><ul>
<li class="chapter" data-level="" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html#subsetting-with-indices"><i class="fa fa-check"></i>Subsetting with indices</a></li>
<li class="chapter" data-level="" data-path="subsetting-filtering.html"><a href="subsetting-filtering.html#subsetting-with-booleans"><i class="fa fa-check"></i>Subsetting with booleans</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>13</b> Dataframes</a><ul>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#subsetting-exploring-dataframes"><i class="fa fa-check"></i>Subsetting &amp; exploring dataframes</a></li>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#creating-dataframes"><i class="fa fa-check"></i>Creating dataframes</a></li>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#modifying-dataframes"><i class="fa fa-check"></i>Modifying dataframes</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>14</b> Packages</a><ul>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#packages-you-already-have"><i class="fa fa-check"></i>Packages you already have</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#installing-a-new-package"><i class="fa fa-check"></i>Installing a new package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#loading-an-installed-package"><i class="fa fa-check"></i>Loading an installed package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#calling-functions-from-a-package"><i class="fa fa-check"></i>Calling functions from a package</a></li>
</ul></li>
<li class="part"><span><b>III Basic <code>R</code> workflow</b></span></li>
<li class="chapter" data-level="15" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>15</b> Importing data</a><ul>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#reading-in-data"><i class="fa fa-check"></i>Reading in data</a></li>
<li><a href="importing-data.html#csv-files"><code>.csv</code> files</a></li>
<li><a href="importing-data.html#prepping-your-data-for-r">Prepping your data for <code>R</code></a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#managing-files-folders"><i class="fa fa-check"></i>Managing files &amp; folders</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="base-plots.html"><a href="base-plots.html"><i class="fa fa-check"></i><b>16</b> Base plots</a><ul>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#create-a-basic-plot"><i class="fa fa-check"></i>Create a basic plot</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#most-common-types-of-plots"><i class="fa fa-check"></i>Most common types of plots</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#basic-plot-formatting"><i class="fa fa-check"></i>Basic plot formatting</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#plotting-with-data-frames"><i class="fa fa-check"></i>Plotting with data frames</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>17</b> <code>ggplot</code></a><ul>
<li><a href="ggplot.html#what-is-ggplot2">What is <code>ggplot2</code>?</a></li>
<li class="chapter" data-level="" data-path="ggplot.html"><a href="ggplot.html#scatter-plot"><i class="fa fa-check"></i>Scatter plot</a></li>
<li class="chapter" data-level="" data-path="ggplot.html"><a href="ggplot.html#bar-plot"><i class="fa fa-check"></i>Bar plot</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>18</b> Dataframe wrangling</a><ul>
<li><a href="dplyr.html#the-dplyr-package">The <code>dplyr</code> package</a></li>
<li><a href="dplyr.html#the-pipe">The <code>%&gt;%</code> pipe</a></li>
<li><a href="dplyr.html#dplyr-verbs"><code>dplyr</code> verbs</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="distributions-histograms.html"><a href="distributions-histograms.html"><i class="fa fa-check"></i><b>19</b> Distributions &amp; histograms</a><ul>
<li class="chapter" data-level="" data-path="distributions-histograms.html"><a href="distributions-histograms.html#exploring-distributions"><i class="fa fa-check"></i>Exploring distributions</a></li>
<li class="chapter" data-level="" data-path="distributions-histograms.html"><a href="distributions-histograms.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="significance-statistics.html"><a href="significance-statistics.html"><i class="fa fa-check"></i><b>20</b> Significance statistics</a><ul>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#p-values"><i class="fa fa-check"></i>p-values</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#tests-for-different-data-types"><i class="fa fa-check"></i>Tests for different data types</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#comparison-tests"><i class="fa fa-check"></i>Comparison tests</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#tests-of-association"><i class="fa fa-check"></i>Tests of association</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#reporting-results"><i class="fa fa-check"></i>Reporting results</a></li>
</ul></li>
<li class="part"><span><b>IV Reproducible research</b></span></li>
<li class="chapter" data-level="21" data-path="git-github.html"><a href="git-github.html"><i class="fa fa-check"></i><b>21</b> <code>Git</code> + <code>GitHub</code></a><ul>
<li class="chapter" data-level="" data-path="git-github.html"><a href="git-github.html#why"><i class="fa fa-check"></i>Why?</a></li>
<li><a href="git-github.html#git-set-up"><code>Git</code> set up</a></li>
<li class="chapter" data-level="" data-path="git-github.html"><a href="git-github.html#create-a-new-repository"><i class="fa fa-check"></i>Create a new repository</a></li>
<li class="chapter" data-level="" data-path="git-github.html"><a href="git-github.html#clone-a-repository"><i class="fa fa-check"></i>Clone a repository</a></li>
<li class="chapter" data-level="" data-path="git-github.html"><a href="git-github.html#working-in-a-repository"><i class="fa fa-check"></i>Working in a repository</a></li>
<li><a href="git-github.html#git-workflow-overview"><code>Git</code> workflow: overview</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="markdown-documentation.html"><a href="markdown-documentation.html"><i class="fa fa-check"></i><b>22</b> <code>Markdown</code> documentation</a><ul>
<li><a href="markdown-documentation.html#what-is-markdown">What is <code>Markdown</code>?</a></li>
<li><a href="markdown-documentation.html#raw-markdown-example">Raw <code>Markdown</code> example</a></li>
<li class="chapter" data-level="" data-path="markdown-documentation.html"><a href="markdown-documentation.html#exercises-12"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>23</b> <code>R Markdown</code></a><ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#do-first-explain-later"><i class="fa fa-check"></i>Do first, explain later</a></li>
<li><a href="r-markdown.html#add-an-r-chunk">Add an <code>R</code> chunk</a></li>
<li><a href="r-markdown.html#in-line-r-code">In-line <code>R</code> code</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i>Tables</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#bibliographies"><i class="fa fa-check"></i>Bibliographies</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>24</b> Interactive <code>shiny</code> dashboards</a><ul>
<li class="chapter" data-level="" data-path="shiny.html"><a href="shiny.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li><a href="shiny.html#build-your-first-shiny-app">Build your first <code>shiny</code> app</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>25</b> Interactive maps</a><ul>
<li><a href="interactive-maps.html#mapping-with-leaflet">Mapping with <code>leaflet</code></a></li>
<li class="chapter" data-level="" data-path="interactive-maps.html"><a href="interactive-maps.html#geocoding"><i class="fa fa-check"></i>Geocoding</a></li>
<li class="chapter" data-level="" data-path="interactive-maps.html"><a href="interactive-maps.html#final-thoughts-2"><i class="fa fa-check"></i>Final thoughts</a></li>
</ul></li>
<li class="part"><span><b>V Review exercises</b></span></li>
<li class="chapter" data-level="26" data-path="rms-titanic.html"><a href="rms-titanic.html"><i class="fa fa-check"></i><b>26</b> <em>RMS Titanic</em></a></li>
<li class="chapter" data-level="27" data-path="a-dplyr-survey.html"><a href="a-dplyr-survey.html"><i class="fa fa-check"></i><b>27</b> A <code>dplyr</code> survey</a></li>
<li class="chapter" data-level="28" data-path="global-health-ggplot.html"><a href="global-health-ggplot.html"><i class="fa fa-check"></i><b>28</b> Global health &amp; <code>ggplot</code></a></li>
<li class="chapter" data-level="29" data-path="sewanees-climate.html"><a href="sewanees-climate.html"><i class="fa fa-check"></i><b>29</b> Sewanee’s climate</a></li>
<li class="chapter" data-level="30" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html"><i class="fa fa-check"></i><b>30</b> Cleaning messy data</a></li>
<li class="chapter" data-level="31" data-path="shakespeare-text-mining.html"><a href="shakespeare-text-mining.html"><i class="fa fa-check"></i><b>31</b> Shakespeare text mining</a></li>
<li class="chapter" data-level="32" data-path="trump.html"><a href="trump.html"><i class="fa fa-check"></i><b>32</b> Trump tweets</a></li>
<li class="chapter" data-level="33" data-path="trump-shiny-git.html"><a href="trump-shiny-git.html"><i class="fa fa-check"></i><b>33</b> Trump, <code>Shiny</code>, &amp; <code>Git</code></a></li>
<li class="part"><span><b>VI Presenting research</b></span></li>
<li class="chapter" data-level="34" data-path="writing-a-report.html"><a href="writing-a-report.html"><i class="fa fa-check"></i><b>34</b> Writing a report</a><ul>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#overall-structure"><i class="fa fa-check"></i>Overall structure</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#abstract"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#results"><i class="fa fa-check"></i>Results</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#discussion"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="writing-a-report.html"><a href="writing-a-report.html#other-elements-of-a-report"><i class="fa fa-check"></i>Other elements of a report</a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="style.html"><a href="style.html"><i class="fa fa-check"></i><b>35</b> Good research writing</a><ul>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#core-principles"><i class="fa fa-check"></i>Core principles</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#further-considerations"><i class="fa fa-check"></i>Further considerations</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#logistics-of-scientific-writing"><i class="fa fa-check"></i>Logistics of scientific writing</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#formatting-tables"><i class="fa fa-check"></i>Formatting tables</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#formatting-figures"><i class="fa fa-check"></i>Formatting figures</a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="research-talks.html"><a href="research-talks.html"><i class="fa fa-check"></i><b>36</b> Research talks</a></li>
<li class="part"><span><b>VII Deep <code>R</code></b></span></li>
<li class="chapter" data-level="37" data-path="saving-data-plots.html"><a href="saving-data-plots.html"><i class="fa fa-check"></i><b>37</b> Saving data &amp; plots</a><ul>
<li><a href="saving-data-plots.html#write.csv"><code>write.csv()</code></a></li>
<li><a href="saving-data-plots.html#saverds"><code>saveRDS()</code></a></li>
<li><a href="saving-data-plots.html#pdf-and-png"><code>pdf()</code> and <code>png()</code></a></li>
</ul></li>
<li class="chapter" data-level="38" data-path="joining-datasets.html"><a href="joining-datasets.html"><i class="fa fa-check"></i><b>38</b> Joining datasets</a><ul>
<li><a href="joining-datasets.html#joining-with-dplyr">Joining with <code>dplyr</code></a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>39</b> Working with text</a><ul>
<li class="chapter" data-level="" data-path="text.html"><a href="text.html#most-common-tools"><i class="fa fa-check"></i>Most common tools</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="dates.html"><a href="dates.html"><i class="fa fa-check"></i><b>40</b> Working with dates &amp; times</a><ul>
<li><a href="dates.html#the-lubridate-package">The <code>lubridate()</code> package</a></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#common-tasks"><i class="fa fa-check"></i>Common tasks</a></li>
</ul></li>
<li class="chapter" data-level="41" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>41</b> Writing functions</a><ul>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#first-steps"><i class="fa fa-check"></i>First steps</a></li>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#next-steps"><i class="fa fa-check"></i>Next steps</a></li>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#sourcing-functions"><i class="fa fa-check"></i>Sourcing functions</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>42</b> <code>for</code> loops</a><ul>
<li class="chapter" data-level="" data-path="for-loops.html"><a href="for-loops.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li><a href="for-loops.html#for-loop-exercises"><code>for</code> loop exercises</a></li>
</ul></li>
<li class="chapter" data-level="43" data-path="conditional-statements.html"><a href="conditional-statements.html"><i class="fa fa-check"></i><b>43</b> Conditional statements</a><ul>
<li class="chapter" data-level="" data-path="conditional-statements.html"><a href="conditional-statements.html#first-steps-1"><i class="fa fa-check"></i>First steps</a></li>
<li class="chapter" data-level="" data-path="conditional-statements.html"><a href="conditional-statements.html#next-steps-1"><i class="fa fa-check"></i>Next steps</a></li>
</ul></li>
<li class="chapter" data-level="44" data-path="matrices-lists.html"><a href="matrices-lists.html"><i class="fa fa-check"></i><b>44</b> Matrices &amp; lists</a><ul>
<li class="chapter" data-level="" data-path="matrices-lists.html"><a href="matrices-lists.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="matrices-lists.html"><a href="matrices-lists.html#matrices"><i class="fa fa-check"></i>Matrices</a></li>
</ul></li>
<li class="chapter" data-level="45" data-path="advanced-base-plots-in-r.html"><a href="advanced-base-plots-in-r.html"><i class="fa fa-check"></i><b>45</b> Advanced base plots in <code>R</code></a></li>
<li class="chapter" data-level="46" data-path="geographic-information-systems.html"><a href="geographic-information-systems.html"><i class="fa fa-check"></i><b>46</b> Geographic Information Systems</a><ul>
<li class="chapter" data-level="" data-path="geographic-information-systems.html"><a href="geographic-information-systems.html#geographic-data-structures"><i class="fa fa-check"></i>Geographic data structures</a></li>
<li class="chapter" data-level="" data-path="geographic-information-systems.html"><a href="geographic-information-systems.html#getting-to-work"><i class="fa fa-check"></i>Getting to work</a></li>
<li class="chapter" data-level="" data-path="geographic-information-systems.html"><a href="geographic-information-systems.html#combining-rasters-vectors"><i class="fa fa-check"></i>Combining rasters &amp; vectors</a></li>
<li><a href="geographic-information-systems.html#combining-rasters-vectors-leaflet">Combining rasters, vectors, &amp; <code>leaflet</code></a></li>
</ul></li>
<li class="chapter" data-level="47" data-path="randomization-statistics.html"><a href="randomization-statistics.html"><i class="fa fa-check"></i><b>47</b> Randomization statistics</a><ul>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#basic-idea"><i class="fa fa-check"></i>Basic idea</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#common-use-cases"><i class="fa fa-check"></i>Common use cases</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#review-assignment-5"><i class="fa fa-check"></i>Review assignment</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#c-do-social-bonds-relate-to-kinship"><i class="fa fa-check"></i>(c) Do social bonds relate to kinship?</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/databrew/intro-to-data-science" target="blank">Databrew LLC</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><code>DataBOOM</code>: the canon for data science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="text" class="section level1">
<h1><span class="header-section-number">Module 39</span> Working with text</h1>
<div id="learning-goal-1" class="section level4 unnumbered">
<h4>Learning goal</h4>
<ul>
<li>Learn to apply the most common <code>R</code> tools for working with text.</li>
</ul>
<p> </p>
<p>If you do not learn how to edit and transform text-based fields within datasets, you will quickly get stuck in <code>R</code>. Think of dates, GPS coordinates, user IDs, group names, plot labels, <em>etc.</em> All of these forms of data can contain non-numeric text. Becoming comfortable working with text in <code>R</code> is an essential part of your <code>R</code> toolbag.</p>
<p>Here we will present the most common functions for working with text. Remember that <code>R</code> has a special object class for text, known to as <strong>character</strong> class, and that character objects are often referred to as <strong>strings</strong>.</p>
<p>Most of these functions come pre-installed in <code>R</code>. However, several of the tools we will show here (as well as many other useful tools that we will not detail here) come from the <strong><code>stringr</code> package</strong>. Go ahead an install <code>stringr</code> and load it using <code>library()</code>.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="text.html#cb430-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb430-2"><a href="text.html#cb430-2"></a><span class="kw">library</span>(stringr)</span></code></pre></div>
</div>
<div id="most-common-tools" class="section level2 unnumbered">
<h2>Most common tools</h2>
<div id="paste-paste0" class="section level4 unnumbered">
<h4><code>paste()</code> &amp; <code>paste0()</code></h4>
<p><strong><code>paste()</code></strong> and <strong><code>paste0()</code></strong> combines two ore more strings together into a single object:</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="text.html#cb431-1"></a>i &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb431-2"><a href="text.html#cb431-2"></a>n &lt;-<span class="st"> </span><span class="dv">96</span></span>
<span id="cb431-3"><a href="text.html#cb431-3"></a>file_name &lt;-<span class="st"> &quot;this_file.csv&quot;</span></span>
<span id="cb431-4"><a href="text.html#cb431-4"></a></span>
<span id="cb431-5"><a href="text.html#cb431-5"></a><span class="kw">paste</span>(i,<span class="st">&quot;of&quot;</span>,n,<span class="st">&quot;: Processing&quot;</span>,file_name,<span class="st">&quot;. . . &quot;</span>)</span>
<span id="cb431-6"><a href="text.html#cb431-6"></a>[<span class="dv">1</span>] <span class="st">&quot;10 of 96 : Processing this_file.csv . . . &quot;</span></span></code></pre></div>
<p>Notice that <code>paste()</code> assumes each object is separated by a blank space. " ". <code>paste0()</code> assumes no space between objects. Here’s the same input but with <code>paste0()</code> instead.</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="text.html#cb432-1"></a><span class="kw">paste0</span>(i,<span class="st">&quot;of&quot;</span>,n,<span class="st">&quot;: Processing&quot;</span>,file_name,<span class="st">&quot;. . . &quot;</span>) </span>
<span id="cb432-2"><a href="text.html#cb432-2"></a>[<span class="dv">1</span>] <span class="st">&quot;10of96: Processingthis_file.csv. . . &quot;</span></span></code></pre></div>
<p>To replicate the original output with <code>paste()</code>, you manually add blank spaces like this:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="text.html#cb433-1"></a><span class="kw">paste0</span>(i,<span class="st">&quot; of &quot;</span>,n,<span class="st">&quot;: Processing &quot;</span>,file_name,<span class="st">&quot; . . . &quot;</span>) </span>
<span id="cb433-2"><a href="text.html#cb433-2"></a>[<span class="dv">1</span>] <span class="st">&quot;10 of 96: Processing this_file.csv . . . &quot;</span></span></code></pre></div>
<p>You can also use <code>paste()</code> to <code>collapse</code> multiple objects into a single string.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="text.html#cb434-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb434-2"><a href="text.html#cb434-2"></a><span class="kw">paste</span>(x,<span class="dt">collapse=</span><span class="st">&quot;-&quot;</span>)</span>
<span id="cb434-3"><a href="text.html#cb434-3"></a>[<span class="dv">1</span>] <span class="st">&quot;1-2-3-4-5-6-7-8-9-10&quot;</span></span></code></pre></div>
</div>
<div id="tolower-toupper" class="section level4 unnumbered">
<h4><code>tolower()</code> &amp; <code>toupper()</code></h4>
<p><strong><code>tolower()</code></strong> and <strong><code>toupper()</code></strong> forces all text in a string to lower case or upper case, respectively:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="text.html#cb435-1"></a>x &lt;-<span class="st"> &quot;That Tree Is Far Away.&quot;</span></span>
<span id="cb435-2"><a href="text.html#cb435-2"></a><span class="kw">tolower</span>(x)</span>
<span id="cb435-3"><a href="text.html#cb435-3"></a>[<span class="dv">1</span>] <span class="st">&quot;that tree is far away.&quot;</span></span>
<span id="cb435-4"><a href="text.html#cb435-4"></a><span class="kw">toupper</span>(x)</span>
<span id="cb435-5"><a href="text.html#cb435-5"></a>[<span class="dv">1</span>] <span class="st">&quot;THAT TREE IS FAR AWAY.&quot;</span></span></code></pre></div>
</div>
<div id="nchar" class="section level4 unnumbered">
<h4><code>nchar()</code></h4>
<p><strong><code>nchar()</code></strong> returns the number of characters within a string:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="text.html#cb436-1"></a>x &lt;-<span class="st"> &quot;That Tree Is Far Away.&quot;</span></span>
<span id="cb436-2"><a href="text.html#cb436-2"></a><span class="kw">nchar</span>(x)</span>
<span id="cb436-3"><a href="text.html#cb436-3"></a>[<span class="dv">1</span>] <span class="dv">22</span></span></code></pre></div>
</div>
<div id="substr" class="section level4 unnumbered">
<h4><code>substr()</code></h4>
<p><strong><code>substr()</code></strong> trims a string according to a start and end character position:</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="text.html#cb437-1"></a>dates &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;2021-03-01&quot;</span>,</span>
<span id="cb437-2"><a href="text.html#cb437-2"></a>           <span class="st">&quot;2021-03-02&quot;</span>,</span>
<span id="cb437-3"><a href="text.html#cb437-3"></a>           <span class="st">&quot;2021-03-03&quot;</span>)</span>
<span id="cb437-4"><a href="text.html#cb437-4"></a><span class="kw">substr</span>(dates,<span class="dv">1</span>,<span class="dv">4</span>) <span class="co"># years</span></span>
<span id="cb437-5"><a href="text.html#cb437-5"></a>[<span class="dv">1</span>] <span class="st">&quot;2021&quot;</span> <span class="st">&quot;2021&quot;</span> <span class="st">&quot;2021&quot;</span></span>
<span id="cb437-6"><a href="text.html#cb437-6"></a><span class="kw">substr</span>(dates,<span class="dv">6</span>,<span class="dv">7</span>) <span class="co"># months</span></span>
<span id="cb437-7"><a href="text.html#cb437-7"></a>[<span class="dv">1</span>] <span class="st">&quot;03&quot;</span> <span class="st">&quot;03&quot;</span> <span class="st">&quot;03&quot;</span></span>
<span id="cb437-8"><a href="text.html#cb437-8"></a><span class="kw">substr</span>(dates,<span class="dv">9</span>,<span class="dv">10</span>) <span class="co"># days</span></span>
<span id="cb437-9"><a href="text.html#cb437-9"></a>[<span class="dv">1</span>] <span class="st">&quot;01&quot;</span> <span class="st">&quot;02&quot;</span> <span class="st">&quot;03&quot;</span></span></code></pre></div>
</div>
<div id="grep" class="section level4 unnumbered">
<h4><code>grep()</code></h4>
<p><strong><code>grep()</code></strong> returns the elements in a character vector that contain a given pattern:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="text.html#cb438-1"></a>years &lt;-<span class="st"> </span><span class="dv">1900</span><span class="op">:</span><span class="dv">1999</span></span>
<span id="cb438-2"><a href="text.html#cb438-2"></a></span>
<span id="cb438-3"><a href="text.html#cb438-3"></a><span class="co"># Which elements correspond to the 1980s?</span></span>
<span id="cb438-4"><a href="text.html#cb438-4"></a>eighties &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">&quot;198&quot;</span>,years)</span>
<span id="cb438-5"><a href="text.html#cb438-5"></a></span>
<span id="cb438-6"><a href="text.html#cb438-6"></a>years[eighties]</span>
<span id="cb438-7"><a href="text.html#cb438-7"></a> [<span class="dv">1</span>] <span class="dv">1980</span> <span class="dv">1981</span> <span class="dv">1982</span> <span class="dv">1983</span> <span class="dv">1984</span> <span class="dv">1985</span> <span class="dv">1986</span> <span class="dv">1987</span> <span class="dv">1988</span> <span class="dv">1989</span></span></code></pre></div>
</div>
<div id="gsub" class="section level4 unnumbered">
<h4><code>gsub()</code></h4>
<p><strong><code>gsub()</code></strong> replaces a given pattern with another in a character vector.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="text.html#cb439-1"></a>dates &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;2021-03-01&quot;</span>,<span class="st">&quot;2021-03-02&quot;</span>,<span class="st">&quot;2021-03-03&quot;</span>)</span>
<span id="cb439-2"><a href="text.html#cb439-2"></a><span class="kw">gsub</span>(<span class="st">&quot;-&quot;</span>,<span class="st">&quot;/&quot;</span>,dates)</span>
<span id="cb439-3"><a href="text.html#cb439-3"></a>[<span class="dv">1</span>] <span class="st">&quot;2021/03/01&quot;</span> <span class="st">&quot;2021/03/02&quot;</span> <span class="st">&quot;2021/03/03&quot;</span></span></code></pre></div>
</div>
<div id="str_pad" class="section level4 unnumbered">
<h4><code>str_pad()</code></h4>
<p><strong><code>stringr::str_pad()</code></strong>: standardize the lengths of strings by “padding” it (e.g., with zeroes) :</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="text.html#cb440-1"></a>days &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">15</span>)</span>
<span id="cb440-2"><a href="text.html#cb440-2"></a>days</span>
<span id="cb440-3"><a href="text.html#cb440-3"></a> [<span class="dv">1</span>] <span class="st">&quot;1&quot;</span>  <span class="st">&quot;2&quot;</span>  <span class="st">&quot;3&quot;</span>  <span class="st">&quot;4&quot;</span>  <span class="st">&quot;5&quot;</span>  <span class="st">&quot;6&quot;</span>  <span class="st">&quot;7&quot;</span>  <span class="st">&quot;8&quot;</span>  <span class="st">&quot;9&quot;</span>  <span class="st">&quot;10&quot;</span> <span class="st">&quot;11&quot;</span> <span class="st">&quot;12&quot;</span> <span class="st">&quot;13&quot;</span> <span class="st">&quot;14&quot;</span> <span class="st">&quot;15&quot;</span></span>
<span id="cb440-4"><a href="text.html#cb440-4"></a>stringr<span class="op">::</span><span class="kw">str_pad</span>(days,<span class="dt">width=</span><span class="dv">2</span>,<span class="dt">side=</span><span class="st">&quot;left&quot;</span>,<span class="dt">pad=</span><span class="st">&quot;0&quot;</span>)</span>
<span id="cb440-5"><a href="text.html#cb440-5"></a> [<span class="dv">1</span>] <span class="st">&quot;01&quot;</span> <span class="st">&quot;02&quot;</span> <span class="st">&quot;03&quot;</span> <span class="st">&quot;04&quot;</span> <span class="st">&quot;05&quot;</span> <span class="st">&quot;06&quot;</span> <span class="st">&quot;07&quot;</span> <span class="st">&quot;08&quot;</span> <span class="st">&quot;09&quot;</span> <span class="st">&quot;10&quot;</span> <span class="st">&quot;11&quot;</span> <span class="st">&quot;12&quot;</span> <span class="st">&quot;13&quot;</span> <span class="st">&quot;14&quot;</span> <span class="st">&quot;15&quot;</span></span></code></pre></div>
</div>
<div id="str_split" class="section level4 unnumbered">
<h4><code>str_split()</code></h4>
<p><strong><code>stringr::str_split()</code></strong>: split a string into several strings at the occurrence of a specified character.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="text.html#cb441-1"></a>dates &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;2021-03-01&quot;</span>,<span class="st">&quot;2021-03-02&quot;</span>,<span class="st">&quot;2021-03-03&quot;</span>)</span>
<span id="cb441-2"><a href="text.html#cb441-2"></a>splits &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_split</span>(dates,<span class="st">&quot;-&quot;</span>)</span>
<span id="cb441-3"><a href="text.html#cb441-3"></a>splits</span>
<span id="cb441-4"><a href="text.html#cb441-4"></a>[[<span class="dv">1</span>]]</span>
<span id="cb441-5"><a href="text.html#cb441-5"></a>[<span class="dv">1</span>] <span class="st">&quot;2021&quot;</span> <span class="st">&quot;03&quot;</span>   <span class="st">&quot;01&quot;</span>  </span>
<span id="cb441-6"><a href="text.html#cb441-6"></a></span>
<span id="cb441-7"><a href="text.html#cb441-7"></a>[[<span class="dv">2</span>]]</span>
<span id="cb441-8"><a href="text.html#cb441-8"></a>[<span class="dv">1</span>] <span class="st">&quot;2021&quot;</span> <span class="st">&quot;03&quot;</span>   <span class="st">&quot;02&quot;</span>  </span>
<span id="cb441-9"><a href="text.html#cb441-9"></a></span>
<span id="cb441-10"><a href="text.html#cb441-10"></a>[[<span class="dv">3</span>]]</span>
<span id="cb441-11"><a href="text.html#cb441-11"></a>[<span class="dv">1</span>] <span class="st">&quot;2021&quot;</span> <span class="st">&quot;03&quot;</span>   <span class="st">&quot;03&quot;</span>  </span></code></pre></div>
<p>This function returns a <em>list</em> for every element in the original vector. A common need is to retrieve one item from each of the elements in this list. For example, let’s say you are trying to retrieve the months of each element in the <code>dates</code> vector. The list structure makes this tricky to retrieve.</p>
<p>Here’s the way to do it by drawing upon the <code>apply()</code> family of functions:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="text.html#cb442-1"></a><span class="kw">sapply</span>(splits, <span class="st">&quot;[[&quot;</span>, <span class="dv">1</span>) <span class="co"># years</span></span>
<span id="cb442-2"><a href="text.html#cb442-2"></a>[<span class="dv">1</span>] <span class="st">&quot;2021&quot;</span> <span class="st">&quot;2021&quot;</span> <span class="st">&quot;2021&quot;</span></span>
<span id="cb442-3"><a href="text.html#cb442-3"></a></span>
<span id="cb442-4"><a href="text.html#cb442-4"></a><span class="kw">sapply</span>(splits, <span class="st">&quot;[[&quot;</span>, <span class="dv">2</span>) <span class="co"># Months</span></span>
<span id="cb442-5"><a href="text.html#cb442-5"></a>[<span class="dv">1</span>] <span class="st">&quot;03&quot;</span> <span class="st">&quot;03&quot;</span> <span class="st">&quot;03&quot;</span></span>
<span id="cb442-6"><a href="text.html#cb442-6"></a></span>
<span id="cb442-7"><a href="text.html#cb442-7"></a><span class="kw">sapply</span>(splits, <span class="st">&quot;[[&quot;</span>, <span class="dv">3</span>) <span class="co"># days</span></span>
<span id="cb442-8"><a href="text.html#cb442-8"></a>[<span class="dv">1</span>] <span class="st">&quot;01&quot;</span> <span class="st">&quot;02&quot;</span> <span class="st">&quot;03&quot;</span></span></code></pre></div>
</div>
<div id="as.character" class="section level4 unnumbered">
<h4><code>as.character()</code></h4>
<p><strong><code>as.character()</code></strong>: converts a non-character object into a character string.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="text.html#cb443-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb443-2"><a href="text.html#cb443-2"></a><span class="kw">as.character</span>(x)</span>
<span id="cb443-3"><a href="text.html#cb443-3"></a>[<span class="dv">1</span>] <span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span> <span class="st">&quot;3&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="text.html#cb444-1"></a>x &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="st">&quot;group1&quot;</span>,<span class="st">&quot;group2&quot;</span>,<span class="st">&quot;group3&quot;</span>))</span>
<span id="cb444-2"><a href="text.html#cb444-2"></a><span class="kw">as.character</span>(x)</span>
<span id="cb444-3"><a href="text.html#cb444-3"></a>[<span class="dv">1</span>] <span class="st">&quot;group1&quot;</span> <span class="st">&quot;group2&quot;</span> <span class="st">&quot;group3&quot;</span></span></code></pre></div>
<p>This can be particularly useful when trying to resolve problems caused by factors. One common issue occurs when <code>R</code> mistakes a set of numbers as a set of factors. Using <code>as.character()</code> can set things right:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="text.html#cb445-1"></a>x &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="dv">18</span>,<span class="dv">19</span>,<span class="dv">20</span>))</span>
<span id="cb445-2"><a href="text.html#cb445-2"></a>x</span>
<span id="cb445-3"><a href="text.html#cb445-3"></a>[<span class="dv">1</span>] <span class="dv">18</span> <span class="dv">19</span> <span class="dv">20</span></span>
<span id="cb445-4"><a href="text.html#cb445-4"></a>Levels<span class="op">:</span><span class="st"> </span><span class="dv">18</span> <span class="dv">19</span> <span class="dv">20</span></span></code></pre></div>
<p>If you try to convert straight to numeric, it does not work:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="text.html#cb446-1"></a><span class="kw">as.numeric</span>(x)</span>
<span id="cb446-2"><a href="text.html#cb446-2"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
<p>So convert to character firstL</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="text.html#cb447-1"></a><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(x))</span>
<span id="cb447-2"><a href="text.html#cb447-2"></a>[<span class="dv">1</span>] <span class="dv">18</span> <span class="dv">19</span> <span class="dv">20</span></span></code></pre></div>
</div>
<div id="exercises-16" class="section level3 unnumbered">
<h3>Exercises</h3>
<p>To practice these tools, we will play with the results of a recent survey. View the raw results <a href="&#39;https://docs.google.com/spreadsheets/d/1iVt9FX9J2iv3QFKBM7Gzb9dgva70XrW1lxMV4hpekeo/edit?resourcekey#gid=204634767&#39;">here</a>.</p>
<p>Read the survey into <code>R</code> as follows:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="text.html#cb448-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb448-2"><a href="text.html#cb448-2"></a><span class="kw">library</span>(gsheet)</span>
<span id="cb448-3"><a href="text.html#cb448-3"></a>survey &lt;-<span class="st"> </span><span class="kw">gsheet2tbl</span>(<span class="st">&#39;https://docs.google.com/spreadsheets/d/1iVt9FX9J2iv3QFKBM7Gzb9dgva70XrW1lxMV4hpekeo/edit?resourcekey#gid=204634767&#39;</span>)</span></code></pre></div>
<p>To make this spreadsheet easier to work with, let’s rename the columns. Currently, the columns are:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="text.html#cb449-1"></a><span class="kw">names</span>(survey)</span></code></pre></div>
<pre><code> [1] &quot;Timestamp&quot;                                                    
 [2] &quot;What is your sex?&quot;                                            
 [3] &quot;How old are you (in years)?&quot;                                  
 [4] &quot;How many siblings do you have?&quot;                               
 [5] &quot;Does or did your dad ever have a mustache during your life?&quot;  
 [6] &quot;Have you ever had a mustache?&quot;                                
 [7] &quot;Joe&#39;s mustache is:&quot;                                           
 [8] &quot;My eyesight is&quot;                                               
 [9] &quot;How tall are you in centimeters?&quot;                             
[10] &quot;What is your shoe size (US)?&quot;                                 
[11] &quot;What is your birthday?&quot;                                       
[12] &quot;What matters more: money or love?&quot;                            
[13] &quot;How good do you think you are at rock-paper-scissors?&quot;        
[14] &quot;How many more pandemics do you think you&#39;ll see in your life?&quot;
[15] &quot;What are cooler: cats or dogs?&quot;                               
[16] &quot;first_name&quot;                                                   
[17] &quot;last_name&quot;                                                    </code></pre>
<p>Rename them like so:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="text.html#cb451-1"></a><span class="kw">names</span>(survey) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;time&#39;</span>, <span class="st">&#39;sex&#39;</span>, <span class="st">&#39;age&#39;</span>,<span class="st">&#39;sib&#39;</span>, <span class="st">&#39;dad_mus&#39;</span>, </span>
<span id="cb451-2"><a href="text.html#cb451-2"></a>                   <span class="st">&#39;person_mus&#39;</span>, <span class="st">&#39;joe_mus_is&#39;</span>, <span class="st">&#39;eyesight&#39;</span>, </span>
<span id="cb451-3"><a href="text.html#cb451-3"></a>                   <span class="st">&#39;height&#39;</span>, <span class="st">&#39;shoe_size&#39;</span>, <span class="st">&#39;bday&#39;</span>, <span class="st">&#39;money_or_love&#39;</span>, </span>
<span id="cb451-4"><a href="text.html#cb451-4"></a>                   <span class="st">&#39;rps_skill&#39;</span>, <span class="st">&#39;num_pan&#39;</span>, <span class="st">&#39;cats_dogs&#39;</span>, </span>
<span id="cb451-5"><a href="text.html#cb451-5"></a>                   <span class="st">&#39;first_name&#39;</span>, <span class="st">&#39;last_name&#39;</span>)</span></code></pre></div>
<p><strong>1.</strong> Create a new column named <code>full_name</code> that combines the first and last name of each respondent.</p>
<p><strong>2.</strong> Simplify the <code>sex</code> column so that <code>m</code> (lowercase) stands for males, <code>f</code> (lowercase) stands for females, and <code>p</code> (lowercase) stands for ‘Prefer not to say’.</p>
<p><strong>3.</strong> Modify the column <code>money_or_love</code> such that the first letter is always capitalized.</p>
<p><strong>4.</strong> How many characters is each response in the column <code>eyesight</code>?</p>
<p><strong>5.</strong> How many responses in the column <code>eyesight</code> have 30 characters or more?</p>
<p><strong>6.</strong> Modify the column <code>money_or_love</code> such that all responses are twenty characters or less.</p>
<p><strong>7.</strong> Remove the ‘s’ from the responses in the column <code>cats_dogs</code>.</p>
<p><strong>8.</strong> In the column <code>joe_mus_is</code>, replace ‘Deeply captivating’ with just ‘captivating.’</p>
<p><strong>9.</strong> How many respondents have the last name ‘Brew’?</p>
<p><strong>10.</strong> How many respondents were born in May?</p>
<p><strong>11.</strong> Filter the survey only to respondents born in 2000.</p>
<p><strong>12.</strong> Replace “both” in the <code>money_or_love</code> variable with “Money &amp; Love”.</p>
<p><strong>13.</strong> Get only the first character <code>dad_mus</code> variable.</p>
<p><strong>14.</strong> How many total characters are in the column <code>eyesight</code>?</p>
<p><strong>15.</strong> How many characters did Joe Brew write for the <code>eyesight</code> question?</p>
<p><strong>16.</strong> How many people in the data were born on the 4th day of the month?</p>
<p><strong>17.</strong> Create a new variable called <code>month_born</code> that has only the month of from the <code>bday</code> variable.</p>
<p><strong>18.</strong> Do the same thing for <code>year</code>.</p>
<p><strong>19.</strong> Filter the data set by those born in 2001 and prefer money over love.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="joining-datasets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dates.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/databrew/intro-to-data-science/edit/master/17-working_with_text.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["intro-to-data-science.pdf", "intro-to-data-science.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
