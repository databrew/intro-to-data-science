<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 29 for loops | DataBOOM: the canon for data science</title>
  <meta name="description" content="Data science is just data and science. But it’s better with pizza." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 29 for loops | DataBOOM: the canon for data science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Data science is just data and science. But it’s better with pizza." />
  <meta name="github-repo" content="databrew/intro-to-data-science" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 29 for loops | DataBOOM: the canon for data science" />
  
  <meta name="twitter:description" content="Data science is just data and science. But it’s better with pizza." />
  

<meta name="author" content="Databrew" />


<meta name="date" content="2021-04-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="writing-functions.html"/>
<link rel="next" href="conditional-statements.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DataBOOM: the canon for data science </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!</a></li>
<li class="part"><span><b>I Core theory</b></span></li>
<li class="chapter" data-level="2" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html"><i class="fa fa-check"></i><b>2</b> Principles of data science</a></li>
<li class="chapter" data-level="3" data-path="visualizing-data.html"><a href="visualizing-data.html"><i class="fa fa-check"></i><b>3</b> Visualizing data</a></li>
<li class="chapter" data-level="4" data-path="writing-about-data.html"><a href="writing-about-data.html"><i class="fa fa-check"></i><b>4</b> Writing about data</a></li>
<li class="chapter" data-level="5" data-path="data-ethics.html"><a href="data-ethics.html"><i class="fa fa-check"></i><b>5</b> Data ethics</a></li>
<li class="part"><span><b>II Getting started</b></span></li>
<li class="chapter" data-level="6" data-path="setting-up-rstudio.html"><a href="setting-up-rstudio.html"><i class="fa fa-check"></i><b>6</b> Setting up <code>RStudio</code></a></li>
<li class="chapter" data-level="7" data-path="running-r-code.html"><a href="running-r-code.html"><i class="fa fa-check"></i><b>7</b> Running R code</a></li>
<li class="chapter" data-level="8" data-path="using-rstudio-and-r-scripts.html"><a href="using-rstudio-and-r-scripts.html"><i class="fa fa-check"></i><b>8</b> Using <code>RStudio</code> and <code>R</code> scripts</a></li>
<li class="chapter" data-level="9" data-path="variables-in-r.html"><a href="variables-in-r.html"><i class="fa fa-check"></i><b>9</b> Variables in <code>R</code></a></li>
<li class="chapter" data-level="10" data-path="structures-for-data-in-r.html"><a href="structures-for-data-in-r.html"><i class="fa fa-check"></i><b>10</b> Structures for data in <code>R</code></a></li>
<li class="chapter" data-level="11" data-path="calling-functions.html"><a href="calling-functions.html"><i class="fa fa-check"></i><b>11</b> Calling functions</a></li>
<li class="chapter" data-level="12" data-path="base-plots.html"><a href="base-plots.html"><i class="fa fa-check"></i><b>12</b> Base plots</a></li>
<li class="chapter" data-level="13" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>13</b> Packages</a></li>
<li class="chapter" data-level="14" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html"><i class="fa fa-check"></i><b>14</b> Basics of ggplot</a></li>
<li class="part"><span><b>III Working with data in R</b></span></li>
<li class="chapter" data-level="15" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>15</b> Importing data</a></li>
<li class="chapter" data-level="16" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>16</b> Dataframes</a></li>
<li class="chapter" data-level="17" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>17</b> Data wrangling</a></li>
<li class="part"><span><b>IV Exploring &amp; analyzing data</b></span></li>
<li class="chapter" data-level="18" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>18</b> Exploratory Data Analysis</a></li>
<li class="chapter" data-level="19" data-path="significance-statistics.html"><a href="significance-statistics.html"><i class="fa fa-check"></i><b>19</b> Significance statistics</a></li>
<li class="chapter" data-level="20" data-path="displaying-data.html"><a href="displaying-data.html"><i class="fa fa-check"></i><b>20</b> Displaying data</a></li>
<li class="part"><span><b>V Accessing &amp; managing data</b></span></li>
<li class="chapter" data-level="21" data-path="managing-project-files.html"><a href="managing-project-files.html"><i class="fa fa-check"></i><b>21</b> Managing project files</a></li>
<li class="chapter" data-level="22" data-path="formatting-your-own-data.html"><a href="formatting-your-own-data.html"><i class="fa fa-check"></i><b>22</b> Formatting your own data</a></li>
<li class="chapter" data-level="23" data-path="reading-excel-files.html"><a href="reading-excel-files.html"><i class="fa fa-check"></i><b>23</b> Reading Excel files</a></li>
<li class="chapter" data-level="24" data-path="reading-googlesheets.html"><a href="reading-googlesheets.html"><i class="fa fa-check"></i><b>24</b> Reading GoogleSheets</a></li>
<li class="chapter" data-level="25" data-path="reading-online-data.html"><a href="reading-online-data.html"><i class="fa fa-check"></i><b>25</b> Reading online data</a></li>
<li class="chapter" data-level="26" data-path="exporting-data-plots.html"><a href="exporting-data-plots.html"><i class="fa fa-check"></i><b>26</b> Exporting data &amp; plots</a></li>
<li class="part"><span><b>VI Your R tool bag</b></span></li>
<li class="chapter" data-level="27" data-path="joining-datasets.html"><a href="joining-datasets.html"><i class="fa fa-check"></i><b>27</b> Joining datasets</a></li>
<li class="chapter" data-level="28" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>28</b> Writing functions</a></li>
<li class="chapter" data-level="29" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>29</b> <code>for</code> loops</a></li>
<li class="chapter" data-level="30" data-path="conditional-statements.html"><a href="conditional-statements.html"><i class="fa fa-check"></i><b>30</b> Conditional statements</a></li>
<li class="chapter" data-level="31" data-path="working-with-text.html"><a href="working-with-text.html"><i class="fa fa-check"></i><b>31</b> Working with text</a></li>
<li class="chapter" data-level="32" data-path="working-with-dates-times.html"><a href="working-with-dates-times.html"><i class="fa fa-check"></i><b>32</b> Working with dates &amp; times</a></li>
<li class="chapter" data-level="33" data-path="working-with-factors.html"><a href="working-with-factors.html"><i class="fa fa-check"></i><b>33</b> Working with factors</a></li>
<li class="chapter" data-level="34" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html"><i class="fa fa-check"></i><b>34</b> Cleaning messy data</a></li>
<li class="chapter" data-level="35" data-path="matrices-lists.html"><a href="matrices-lists.html"><i class="fa fa-check"></i><b>35</b> Matrices &amp; lists</a></li>
<li class="chapter" data-level="36" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>36</b> Pipes</a></li>
<li class="part"><span><b>VII Interactive dashboards</b></span></li>
<li class="chapter" data-level="37" data-path="intro-to-shiny-apps.html"><a href="intro-to-shiny-apps.html"><i class="fa fa-check"></i><b>37</b> Intro to Shiny apps</a></li>
<li class="chapter" data-level="38" data-path="shiny-dashboards.html"><a href="shiny-dashboards.html"><i class="fa fa-check"></i><b>38</b> Shiny dashboards</a></li>
<li class="chapter" data-level="39" data-path="data-entry-apps.html"><a href="data-entry-apps.html"><i class="fa fa-check"></i><b>39</b> Data entry apps</a></li>
<li class="part"><span><b>VIII Databases</b></span></li>
<li class="chapter" data-level="40" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>40</b> Introduction</a></li>
<li class="chapter" data-level="41" data-path="platforms.html"><a href="platforms.html"><i class="fa fa-check"></i><b>41</b> Platforms</a></li>
<li class="chapter" data-level="42" data-path="alternatives.html"><a href="alternatives.html"><i class="fa fa-check"></i><b>42</b> Alternatives</a></li>
<li class="chapter" data-level="43" data-path="practices.html"><a href="practices.html"><i class="fa fa-check"></i><b>43</b> Practices</a></li>
<li class="part"><span><b>IX Documenting your work</b></span></li>
<li class="chapter" data-level="44" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>44</b> R Markdown</a></li>
<li class="chapter" data-level="45" data-path="reproducible-research.html"><a href="reproducible-research.html"><i class="fa fa-check"></i><b>45</b> Reproducible research</a></li>
<li class="chapter" data-level="46" data-path="automated-reporting.html"><a href="automated-reporting.html"><i class="fa fa-check"></i><b>46</b> Automated reporting</a></li>
<li class="chapter" data-level="47" data-path="formatting-standards.html"><a href="formatting-standards.html"><i class="fa fa-check"></i><b>47</b> Formatting standards</a></li>
<li class="part"><span><b>X Version control and teamwork</b></span></li>
<li class="chapter" data-level="48" data-path="what-is-version-control.html"><a href="what-is-version-control.html"><i class="fa fa-check"></i><b>48</b> What is version control?</a></li>
<li class="chapter" data-level="49" data-path="what-is-git.html"><a href="what-is-git.html"><i class="fa fa-check"></i><b>49</b> What is Git?</a></li>
<li class="chapter" data-level="50" data-path="standard-git-operations.html"><a href="standard-git-operations.html"><i class="fa fa-check"></i><b>50</b> Standard git operations</a></li>
<li class="chapter" data-level="51" data-path="a-git-workflow.html"><a href="a-git-workflow.html"><i class="fa fa-check"></i><b>51</b> A git workflow</a></li>
<li class="chapter" data-level="52" data-path="other-git-platforms.html"><a href="other-git-platforms.html"><i class="fa fa-check"></i><b>52</b> Other git platforms</a></li>
<li class="part"><span><b>XI Writing about data</b></span></li>
<li class="chapter" data-level="53" data-path="types-of-writing.html"><a href="types-of-writing.html"><i class="fa fa-check"></i><b>53</b> Types of writing</a></li>
<li class="chapter" data-level="54" data-path="elements-of-style.html"><a href="elements-of-style.html"><i class="fa fa-check"></i><b>54</b> Elements of style</a></li>
<li class="chapter" data-level="55" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html"><i class="fa fa-check"></i><b>55</b> Sections of a report</a></li>
<li class="part"><span><b>XII Creating websites</b></span></li>
<li class="part"><span><b>XIII Advanced skills</b></span></li>
<li class="chapter" data-level="56" data-path="mapping.html"><a href="mapping.html"><i class="fa fa-check"></i><b>56</b> Mapping</a></li>
<li class="chapter" data-level="57" data-path="geographic-computing-gis.html"><a href="geographic-computing-gis.html"><i class="fa fa-check"></i><b>57</b> Geographic computing &amp; GIS</a></li>
<li class="chapter" data-level="58" data-path="statistical-modeling.html"><a href="statistical-modeling.html"><i class="fa fa-check"></i><b>58</b> Statistical modeling</a></li>
<li class="chapter" data-level="59" data-path="apply-family.html"><a href="apply-family.html"><i class="fa fa-check"></i><b>59</b> Apply family</a></li>
<li class="chapter" data-level="60" data-path="iterative-statistics.html"><a href="iterative-statistics.html"><i class="fa fa-check"></i><b>60</b> Iterative statistics</a></li>
<li class="chapter" data-level="61" data-path="iterative-simulations.html"><a href="iterative-simulations.html"><i class="fa fa-check"></i><b>61</b> Iterative simulations</a></li>
<li class="chapter" data-level="62" data-path="image-analysis.html"><a href="image-analysis.html"><i class="fa fa-check"></i><b>62</b> Image analysis</a></li>
<li class="chapter" data-level="63" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>63</b> Machine learning</a></li>
<li class="chapter" data-level="64" data-path="template.html"><a href="template.html"><i class="fa fa-check"></i><b>64</b> Template</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/databrew/intro-to-data-science" target="blank">Databrew LLC</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><code>DataBOOM</code>: the canon for data science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="for-loops" class="section level1">
<h1><span class="header-section-number">Module 29</span> <code>for</code> loops</h1>
<div id="learning-goals-9" class="section level2 unnumbered">
<h2>Learning goals</h2>
<ul>
<li>What <code>for</code> loops are, and how to use them yourself</li>
<li>How to use <code>for</code> loops for plots that are tricky but super cool.</li>
<li>How to use <code>for</code> loops to summarize subgroups in your data</li>
<li>How to use nested <code>for</code> loops</li>
</ul>
</div>
<div id="basics" class="section level2 unnumbered">
<h2>Basics</h2>
<p>A <code>for</code> loop is a super powerful coding tool. In a <code>for</code> loop, <code>R</code> loops through a chunk of code for a set number of repititions.</p>
<p>A super basic example:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="for-loops.html#cb275-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb275-2"><a href="for-loops.html#cb275-2"></a><span class="cf">for</span>(i <span class="cf">in</span> x){</span>
<span id="cb275-3"><a href="for-loops.html#cb275-3"></a>  <span class="kw">print</span>(i)</span>
<span id="cb275-4"><a href="for-loops.html#cb275-4"></a>}</span></code></pre></div>
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
<p>Here’s an example of a pretty useless <code>for</code> loop:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="for-loops.html#cb277-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</span>
<span id="cb277-2"><a href="for-loops.html#cb277-2"></a>  <span class="kw">print</span>(<span class="st">&quot;I&#39;m just repeating myself.&quot;</span>)</span>
<span id="cb277-3"><a href="for-loops.html#cb277-3"></a>}</span></code></pre></div>
<pre><code>[1] &quot;I&#39;m just repeating myself.&quot;
[1] &quot;I&#39;m just repeating myself.&quot;
[1] &quot;I&#39;m just repeating myself.&quot;
[1] &quot;I&#39;m just repeating myself.&quot;
[1] &quot;I&#39;m just repeating myself.&quot;</code></pre>
<p><strong>This code is saying:</strong><br />
- For each iteration of this loop, step to the next value in <code>x</code> (first example) or <code>1:5</code> (second example).<br />
- Store that value in an object <code>i</code>,<br />
- and run the code inside the curly brackets.
- Repeat until the end of <code>x</code>.</p>
<p><strong>Look at the basic structure:</strong><br />
- In the<code>for( )</code> parenthetical, you tell R what values to step through (<code>x</code>), and how to refer to the value in each iteration (<code>i</code>).<br />
- Within the curly brackets, you place the chunk of code you want to repeat.</p>
<p>Another basic example, demonsrating that you can update a variable repeatedly in a loop.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="for-loops.html#cb279-1"></a>x &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb279-2"><a href="for-loops.html#cb279-2"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</span>
<span id="cb279-3"><a href="for-loops.html#cb279-3"></a>  x &lt;-<span class="st"> </span>x<span class="op">*</span>x</span>
<span id="cb279-4"><a href="for-loops.html#cb279-4"></a>  <span class="kw">print</span>(x)</span>
<span id="cb279-5"><a href="for-loops.html#cb279-5"></a>}</span></code></pre></div>
<pre><code>[1] 4
[1] 16
[1] 256
[1] 65536
[1] 4294967296</code></pre>
<p>Another silly example:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="for-loops.html#cb281-1"></a>professors &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Keri&quot;</span>,<span class="st">&quot;Deb&quot;</span>,<span class="st">&quot;Ken&quot;</span>) </span>
<span id="cb281-2"><a href="for-loops.html#cb281-2"></a><span class="cf">for</span>(x <span class="cf">in</span> professors){</span>
<span id="cb281-3"><a href="for-loops.html#cb281-3"></a>  <span class="kw">print</span>(<span class="kw">paste0</span>(x,<span class="st">&quot; is pretty cool!&quot;</span>))</span>
<span id="cb281-4"><a href="for-loops.html#cb281-4"></a>}</span></code></pre></div>
<pre><code>[1] &quot;Keri is pretty cool!&quot;
[1] &quot;Deb is pretty cool!&quot;
[1] &quot;Ken is pretty cool!&quot;</code></pre>
<div id="exercise-1-5" class="section level3 unnumbered">
<h3>Exercise 1</h3>
<p>Use this space to practice the basics of <code>for loop</code> formatting.</p>
<p>First, create a vector of names (add at least 3)</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="for-loops.html#cb283-1"></a><span class="co"># Add your names to this vector</span></span>
<span id="cb283-2"><a href="for-loops.html#cb283-2"></a>famous.names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Lady Gaga&quot;</span>,<span class="st">&quot;David Haskell&quot;</span>,<span class="st">&quot;Tom Cruise&quot;</span>)</span></code></pre></div>
<p>Using the examples above as a guide, create a <code>for loop</code> that prints the same silly statement about each of these names.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="for-loops.html#cb284-1"></a><span class="co"># Do your coding here</span></span>
<span id="cb284-2"><a href="for-loops.html#cb284-2"></a><span class="cf">for</span>(i <span class="cf">in</span> famous.names){</span>
<span id="cb284-3"><a href="for-loops.html#cb284-3"></a>  <span class="kw">print</span>(<span class="kw">paste0</span>(i,<span class="st">&quot; has cooties!&quot;</span>))</span>
<span id="cb284-4"><a href="for-loops.html#cb284-4"></a>}</span></code></pre></div>
<pre><code>[1] &quot;Lady Gaga has cooties!&quot;
[1] &quot;David Haskell has cooties!&quot;
[1] &quot;Tom Cruise has cooties!&quot;</code></pre>
</div>
</div>
<div id="for-loops-in-plots" class="section level2 unnumbered">
<h2><code>for</code> loops in plots</h2>
<p>These silly examples above do a poor job of demonstrating how powerful a <code>for loop</code> can be. You can use <code>for</code> loops with data to do really cool things with relatively simple code.</p>
<p>Thinking in <code>for</code> loops, however, can take some getting used to. Learning how to design code with <code>for</code> loops is one of the most important milestones on your way to thinking like a data scientist.</p>
<div id="efficient-multi-panel-plots" class="section level3 unnumbered">
<h3>Efficient multi-panel plots</h3>
<p>For example, a <code>for loop</code> can be a very efficient way of making multi-panel plots.</p>
<p>Let’s use a <code>for loop</code> to get a quick overview of the variables included in the <code>airquality</code> dataset built into R.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="for-loops.html#cb286-1"></a><span class="kw">data</span>(airquality)</span>
<span id="cb286-2"><a href="for-loops.html#cb286-2"></a><span class="kw">head</span>(airquality)</span></code></pre></div>
<pre><code>  Ozone Solar.R Wind Temp Month Day
1    41     190  7.4   67     5   1
2    36     118  8.0   72     5   2
3    12     149 12.6   74     5   3
4    18     313 11.5   62     5   4
5    NA      NA 14.3   56     5   5
6    28      NA 14.9   66     5   6</code></pre>
<p>Looks like the first four columns would be interesting to plot.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="for-loops.html#cb288-1"></a><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="co"># Setup a multi-panel plot # format = c(number of rows, number of columns)</span></span>
<span id="cb288-2"><a href="for-loops.html#cb288-2"></a><span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="fl">4.5</span>,<span class="fl">4.5</span>,<span class="dv">1</span>,<span class="dv">1</span>)) <span class="co"># Set plot margins</span></span>
<span id="cb288-3"><a href="for-loops.html#cb288-3"></a></span>
<span id="cb288-4"><a href="for-loops.html#cb288-4"></a><span class="co"># Loop through the first four columns ...</span></span>
<span id="cb288-5"><a href="for-loops.html#cb288-5"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>){</span>
<span id="cb288-6"><a href="for-loops.html#cb288-6"></a>  y &lt;-<span class="st"> </span>airquality[,i] <span class="co"># Select data in column i</span></span>
<span id="cb288-7"><a href="for-loops.html#cb288-7"></a>  var.name &lt;-<span class="st"> </span><span class="kw">names</span>(airquality)[i] <span class="co"># Get name of that column</span></span>
<span id="cb288-8"><a href="for-loops.html#cb288-8"></a>  <span class="kw">plot</span>(y,<span class="dt">xlab=</span><span class="st">&quot;Day&quot;</span>,<span class="dt">ylab=</span>var.name,<span class="dt">pch=</span><span class="dv">16</span>) <span class="co"># Plot data</span></span>
<span id="cb288-9"><a href="for-loops.html#cb288-9"></a>}</span></code></pre></div>
<p><img src="figures/unnamed-chunk-167-1.png" width="925.44" /></p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="for-loops.html#cb289-1"></a><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) <span class="co"># restore the default single-panel plot</span></span></code></pre></div>
</div>
<div id="using-for-loops-to-plot-subgroups-of-data" class="section level3 unnumbered">
<h3>Using <code>for</code> loops to plot subgroups of data</h3>
<p><code>for loops</code> are also useful for plotting data in tricky ways. Let’s use a different built-in dataset, that shows the performance of various car make/models.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="for-loops.html#cb290-1"></a><span class="kw">data</span>(mtcars)</span>
<span id="cb290-2"><a href="for-loops.html#cb290-2"></a><span class="kw">head</span>(mtcars)</span></code></pre></div>
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>Let’s say we want to see how gas mileage is affected by the number of cylinders a car has. It would be nice to create a plot that shows the raw data as well as the mean mileage for each cylinder number.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="for-loops.html#cb292-1"></a><span class="co"># Let&#39;s see how many different cylinder types there are in the data</span></span>
<span id="cb292-2"><a href="for-loops.html#cb292-2"></a>ucyl &lt;-<span class="st"> </span><span class="kw">unique</span>(mtcars<span class="op">$</span>cyl) ; ucyl</span></code></pre></div>
<pre><code>[1] 6 4 8</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="for-loops.html#cb294-1"></a><span class="co"># Let&#39;s make an empty plot</span></span>
<span id="cb294-2"><a href="for-loops.html#cb294-2"></a><span class="kw">plot</span>(<span class="dv">1</span>,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>, <span class="co"># tell R not to draw anything</span></span>
<span id="cb294-3"><a href="for-loops.html#cb294-3"></a>     <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">10</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">50</span>),</span>
<span id="cb294-4"><a href="for-loops.html#cb294-4"></a>     <span class="dt">xlab=</span><span class="st">&quot;Number of cylinders&quot;</span>,</span>
<span id="cb294-5"><a href="for-loops.html#cb294-5"></a>     <span class="dt">ylab=</span><span class="st">&quot;Gas mileage (mpg)&quot;</span>)</span>
<span id="cb294-6"><a href="for-loops.html#cb294-6"></a></span>
<span id="cb294-7"><a href="for-loops.html#cb294-7"></a><span class="co"># Write your for loop here to add the actual data</span></span>
<span id="cb294-8"><a href="for-loops.html#cb294-8"></a>i=ucyl[<span class="dv">1</span>] <span class="co"># It&#39;s always good to use a known value of i as you build up your for loop</span></span>
<span id="cb294-9"><a href="for-loops.html#cb294-9"></a><span class="cf">for</span>(i <span class="cf">in</span> ucyl){</span>
<span id="cb294-10"><a href="for-loops.html#cb294-10"></a>  </span>
<span id="cb294-11"><a href="for-loops.html#cb294-11"></a>  <span class="co"># Subset the dataframe according to number of cylinders</span></span>
<span id="cb294-12"><a href="for-loops.html#cb294-12"></a>  cari &lt;-<span class="st"> </span>mtcars[mtcars<span class="op">$</span>cyl<span class="op">==</span>i,]</span>
<span id="cb294-13"><a href="for-loops.html#cb294-13"></a>  </span>
<span id="cb294-14"><a href="for-loops.html#cb294-14"></a>  <span class="co"># Plot the raw data</span></span>
<span id="cb294-15"><a href="for-loops.html#cb294-15"></a>  <span class="kw">points</span>(<span class="dt">x=</span>cari<span class="op">$</span>cyl,<span class="dt">y=</span>cari<span class="op">$</span>mpg,<span class="dt">col=</span><span class="st">&quot;grey&quot;</span>)</span>
<span id="cb294-16"><a href="for-loops.html#cb294-16"></a>  </span>
<span id="cb294-17"><a href="for-loops.html#cb294-17"></a>  <span class="co"># Superimpose the mean on top</span></span>
<span id="cb294-18"><a href="for-loops.html#cb294-18"></a>  <span class="kw">points</span>(<span class="dt">x=</span>i,<span class="dt">y=</span><span class="kw">mean</span>(cari<span class="op">$</span>mpg),<span class="dt">col=</span><span class="st">&quot;black&quot;</span>,<span class="dt">pch=</span><span class="st">&quot;-&quot;</span>,<span class="dt">cex=</span><span class="dv">5</span>,)</span>
<span id="cb294-19"><a href="for-loops.html#cb294-19"></a>}</span></code></pre></div>
<p><img src="figures/unnamed-chunk-169-1.png" width="925.44" /></p>
</div>
<div id="exercise-3-5" class="section level3 unnumbered">
<h3>Exercise 3</h3>
<p>Now try to do something similar on your own with the <code>airquality</code> dataset. Use <code>for loops</code> to create a plot with Month on the x axis and Temperature on the y axis. On this plot, depict all the temperatures recorded in each month in the color grey, then superimpose the mean temperature for each month.</p>
<p>We will provide the empty plot, you provide the <code>for loop</code>:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="for-loops.html#cb295-1"></a><span class="kw">plot</span>(<span class="dv">1</span>,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,</span>
<span id="cb295-2"><a href="for-loops.html#cb295-2"></a>     <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">10</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">40</span>,<span class="dv">100</span>),</span>
<span id="cb295-3"><a href="for-loops.html#cb295-3"></a>     <span class="dt">xlab=</span><span class="st">&quot;Month&quot;</span>,</span>
<span id="cb295-4"><a href="for-loops.html#cb295-4"></a>     <span class="dt">ylab=</span><span class="st">&quot;Yemperature&quot;</span>)</span>
<span id="cb295-5"><a href="for-loops.html#cb295-5"></a></span>
<span id="cb295-6"><a href="for-loops.html#cb295-6"></a><span class="co"># Write your for loop here to add the actual data</span></span>
<span id="cb295-7"><a href="for-loops.html#cb295-7"></a><span class="cf">for</span>(i <span class="cf">in</span> airquality<span class="op">$</span>Month){</span>
<span id="cb295-8"><a href="for-loops.html#cb295-8"></a>  airi &lt;-<span class="st"> </span>airquality[airquality<span class="op">$</span>Month<span class="op">==</span>i,]</span>
<span id="cb295-9"><a href="for-loops.html#cb295-9"></a>  <span class="kw">points</span>(<span class="dt">x=</span>airi<span class="op">$</span>Month,<span class="dt">y=</span>airi<span class="op">$</span>Temp,<span class="dt">pch=</span><span class="dv">1</span>,<span class="dt">col=</span><span class="st">&quot;grey&quot;</span>)</span>
<span id="cb295-10"><a href="for-loops.html#cb295-10"></a>  <span class="kw">points</span>(<span class="dt">x=</span>i,<span class="dt">y=</span><span class="kw">mean</span>(airi<span class="op">$</span>Temp),<span class="dt">pch=</span><span class="st">&quot;-&quot;</span>,<span class="dt">cex=</span><span class="dv">5</span>,<span class="dt">col=</span><span class="st">&quot;black&quot;</span>)</span>
<span id="cb295-11"><a href="for-loops.html#cb295-11"></a>}</span></code></pre></div>
<p><img src="figures/unnamed-chunk-170-1.png" width="925.44" /></p>
</div>
<div id="using-for-loops-to-layer-cyclical-or-repetitive-data" class="section level3 unnumbered">
<h3>Using <code>for</code> loops to layer cyclical or repetitive data</h3>
<p>Here’s another good example of the power of a good <code>for loop</code>.</p>
<p>First, read in some cool data.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="for-loops.html#cb296-1"></a>kc &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;./data/keeling-curve.csv&quot;</span>) ; <span class="kw">head</span>(kc)</span></code></pre></div>
<pre><code>  year month day_of_month day_of_year year_dec frac_of_year    CO2
1 1974     5           26    145.4890 1974.399       0.3986 332.95
2 1974     6            2    152.4970 1974.418       0.4178 332.35
3 1974     6            9    159.5050 1974.437       0.4370 332.20
4 1974     6           16    166.5130 1974.456       0.4562 332.37
5 1974     6           23    173.4845 1974.475       0.4753 331.73
6 1974     6           30    180.4925 1974.495       0.4945 331.68</code></pre>
<p>This is the famous Keeling Curve dataset: long-term monitoring of atmospheric CO2 measured at a volcanic observatory in Hawaii.</p>
<p>Try plotting the Keeling Curve:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="for-loops.html#cb298-1"></a><span class="kw">plot</span>(kc<span class="op">$</span>CO2 <span class="op">~</span><span class="st"> </span>kc<span class="op">$</span>year_dec,<span class="dt">type=</span><span class="st">&quot;l&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;Year&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;Atmospheric CO2&quot;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-172-1.png" width="925.44" /></p>
<p>There are some erroneous data points! We clearly can’t have negative CO2 values. Let’s remove those and try again:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="for-loops.html#cb299-1"></a>kc &lt;-<span class="st"> </span>kc[kc<span class="op">$</span>CO2 <span class="op">&gt;</span><span class="dv">0</span>,] </span>
<span id="cb299-2"><a href="for-loops.html#cb299-2"></a><span class="kw">plot</span>(kc<span class="op">$</span>CO2 <span class="op">~</span><span class="st"> </span>kc<span class="op">$</span>year_dec,<span class="dt">type=</span><span class="st">&quot;l&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;Year&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;Atmospheric CO2&quot;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-173-1.png" width="925.44" /></p>
<p><strong>What’s the deal with those squiggles?</strong></p>
<p>They seem to happen every year, cyclically. Let’s investigate!</p>
<p>Let’s look at the data a different way: <em>by layering years on top of one another.</em></p>
<p>To begin, let’s plot data for only a <em>single</em> year:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="for-loops.html#cb300-1"></a><span class="co"># Stage an empty plot for what you are trying to represent</span></span>
<span id="cb300-2"><a href="for-loops.html#cb300-2"></a><span class="kw">plot</span>(<span class="dv">1</span>, <span class="co"># plot a single point</span></span>
<span id="cb300-3"><a href="for-loops.html#cb300-3"></a>     <span class="dt">type=</span><span class="st">&quot;n&quot;</span>,</span>
<span id="cb300-4"><a href="for-loops.html#cb300-4"></a>     <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">365</span>),<span class="dt">xlab=</span><span class="st">&quot;Day of year&quot;</span>,</span>
<span id="cb300-5"><a href="for-loops.html#cb300-5"></a>     <span class="dt">ylim=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">5</span>,<span class="dv">5</span>),<span class="dt">ylab=</span><span class="st">&quot;CO2 anomaly&quot;</span>)</span>
<span id="cb300-6"><a href="for-loops.html#cb300-6"></a><span class="kw">abline</span>(<span class="dt">h=</span><span class="dv">0</span>,<span class="dt">col=</span><span class="st">&quot;grey&quot;</span>) <span class="co"># add nifty horizontal line</span></span>
<span id="cb300-7"><a href="for-loops.html#cb300-7"></a></span>
<span id="cb300-8"><a href="for-loops.html#cb300-8"></a><span class="co"># Reduce the dataset to a single year (any year)</span></span>
<span id="cb300-9"><a href="for-loops.html#cb300-9"></a>kcy &lt;-<span class="st"> </span>kc[kc<span class="op">$</span>year<span class="op">==</span><span class="st">&quot;1990&quot;</span>,] ; <span class="kw">head</span>(kcy)</span></code></pre></div>
<pre><code>    year month day_of_month day_of_year year_dec frac_of_year    CO2
816 1990     1            7      6.4970 1990.018       0.0178 353.58
817 1990     1           14     13.5050 1990.037       0.0370 353.99
818 1990     1           21     20.5130 1990.056       0.0562 353.92
819 1990     1           28     27.4845 1990.075       0.0753 354.39
820 1990     2            4     34.4925 1990.094       0.0945 355.04
821 1990     2           11     41.5005 1990.114       0.1137 355.09</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="for-loops.html#cb302-1"></a><span class="co"># Let&#39;s convert each CO2 reading to an &#39;anomaly&#39; compared to the year&#39;s average.</span></span>
<span id="cb302-2"><a href="for-loops.html#cb302-2"></a>CO2.mean &lt;-<span class="st"> </span><span class="kw">mean</span>(kcy<span class="op">$</span>CO2,<span class="dt">na.rm=</span><span class="ot">TRUE</span>) ; CO2.mean  <span class="co"># Take note of how useful that &#39;na.rm=TRUE&#39; input can be!</span></span></code></pre></div>
<pre><code>[1] 354.4538</code></pre>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="for-loops.html#cb304-1"></a>y &lt;-<span class="st"> </span>kcy<span class="op">$</span>CO2 <span class="op">-</span><span class="st"> </span>CO2.mean ; y <span class="co"># Translate each data point to an anomaly</span></span></code></pre></div>
<pre><code> [1] -0.87384615 -0.46384615 -0.53384615 -0.06384615  0.58615385  0.63615385
 [7]  0.96615385  0.72615385  1.13615385  1.33615385  1.08615385  1.67615385
[13]  1.81615385  1.71615385  1.77615385  2.41615385  2.50615385  3.24615385
[19]  2.79615385  2.87615385  2.92615385  2.52615385  1.79615385  1.72615385
[25]  1.33615385  1.76615385  0.53615385 -0.16384615 -0.08384615 -0.46384615
[31] -1.28384615 -0.99384615 -1.37384615 -2.65384615 -3.29384615 -3.59384615
[37] -2.70384615 -2.99384615 -3.05384615 -2.91384615 -2.88384615 -2.72384615
[43] -2.05384615 -1.74384615 -1.30384615 -1.00384615 -0.76384615 -0.55384615
[49]  0.01615385 -0.11384615  0.37615385  0.34615385          NA</code></pre>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="for-loops.html#cb306-1"></a><span class="co"># Add points to your plot</span></span>
<span id="cb306-2"><a href="for-loops.html#cb306-2"></a><span class="kw">points</span>(y<span class="op">~</span>kcy<span class="op">$</span>day_of_year,<span class="dt">pch=</span><span class="dv">16</span>,<span class="dt">col=</span><span class="kw">adjustcolor</span>(<span class="st">&quot;darkblue&quot;</span>,<span class="dt">alpha.f=</span>.<span class="dv">3</span>))</span></code></pre></div>
<p><img src="figures/unnamed-chunk-174-1.png" width="925.44" /></p>
<p>But this only shows one year of data! How can we include the seasonal squiggle from other years?</p>
<p>Let’s use a <code>for loop</code>!</p>
<p>OK – let’s redo that graph and add a <code>for loop</code> into the mix:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="for-loops.html#cb307-1"></a><span class="co"># First, stage your empty plot:</span></span>
<span id="cb307-2"><a href="for-loops.html#cb307-2"></a><span class="kw">plot</span>(<span class="dv">1</span>,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,</span>
<span id="cb307-3"><a href="for-loops.html#cb307-3"></a>     <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">365</span>),<span class="dt">xlab=</span><span class="st">&quot;Day of year&quot;</span>,</span>
<span id="cb307-4"><a href="for-loops.html#cb307-4"></a>     <span class="dt">ylim=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">5</span>,<span class="dv">5</span>),<span class="dt">ylab=</span><span class="st">&quot;CO2 anomaly&quot;</span>)</span>
<span id="cb307-5"><a href="for-loops.html#cb307-5"></a></span>
<span id="cb307-6"><a href="for-loops.html#cb307-6"></a><span class="kw">abline</span>(<span class="dt">h=</span><span class="dv">0</span>,<span class="dt">col=</span><span class="st">&quot;grey&quot;</span>)</span>
<span id="cb307-7"><a href="for-loops.html#cb307-7"></a></span>
<span id="cb307-8"><a href="for-loops.html#cb307-8"></a><span class="co"># Now we will loop through each year of data. First, get a vector of the years included in the dataset:</span></span>
<span id="cb307-9"><a href="for-loops.html#cb307-9"></a>years &lt;-<span class="st"> </span><span class="kw">unique</span>(kc<span class="op">$</span>year) ; years</span></code></pre></div>
<pre><code> [1] &quot;1974&quot; &quot;1975&quot; &quot;1976&quot; &quot;1977&quot; &quot;1978&quot; &quot;1979&quot; &quot;1980&quot; &quot;1981&quot; &quot;1982&quot; &quot;1983&quot;
[11] &quot;1984&quot; &quot;1985&quot; &quot;1986&quot; &quot;1987&quot; &quot;1988&quot; &quot;1989&quot; &quot;1990&quot; &quot;1991&quot; &quot;1992&quot; &quot;1993&quot;
[21] &quot;1994&quot; &quot;1995&quot; &quot;1996&quot; &quot;1997&quot; &quot;1998&quot; &quot;1999&quot; &quot;2000&quot; &quot;2001&quot; &quot;2002&quot; &quot;2003&quot;
[31] &quot;2004&quot; &quot;2005&quot; &quot;2006&quot; &quot;2007&quot; &quot;2008&quot; &quot;2009&quot; &quot;2010&quot; &quot;2011&quot; &quot;2012&quot; &quot;2013&quot;
[41] &quot;2014&quot; &quot;2015&quot; &quot;2016&quot; &quot;2017&quot; &quot;2018&quot; &quot;2019&quot; &quot;2020&quot; &quot;2021&quot; NA    </code></pre>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="for-loops.html#cb309-1"></a><span class="co"># Now build your for loop. </span></span>
<span id="cb309-2"><a href="for-loops.html#cb309-2"></a><span class="co"># Notice that the contents of the `for loop` are exactly the same </span></span>
<span id="cb309-3"><a href="for-loops.html#cb309-3"></a><span class="co"># as the single plot above --  with one exception. </span></span>
<span id="cb309-4"><a href="for-loops.html#cb309-4"></a><span class="co"># Notice the use of the symbol i</span></span>
<span id="cb309-5"><a href="for-loops.html#cb309-5"></a></span>
<span id="cb309-6"><a href="for-loops.html#cb309-6"></a><span class="cf">for</span>(i <span class="cf">in</span> years){</span>
<span id="cb309-7"><a href="for-loops.html#cb309-7"></a></span>
<span id="cb309-8"><a href="for-loops.html#cb309-8"></a>  <span class="co"># Reduce the dataset to a single year</span></span>
<span id="cb309-9"><a href="for-loops.html#cb309-9"></a>  kcy &lt;-<span class="st"> </span>kc[kc<span class="op">$</span>year<span class="op">==</span>i,] ; <span class="kw">head</span>(kcy)</span>
<span id="cb309-10"><a href="for-loops.html#cb309-10"></a>  </span>
<span id="cb309-11"><a href="for-loops.html#cb309-11"></a>  <span class="co"># Let&#39;s convert each CO2 reading to an &#39;anomaly&#39; compared to the year&#39;s average.</span></span>
<span id="cb309-12"><a href="for-loops.html#cb309-12"></a>  CO2.mean &lt;-<span class="st"> </span><span class="kw">mean</span>(kcy<span class="op">$</span>CO2,<span class="dt">na.rm=</span><span class="ot">TRUE</span>) ; CO2.mean <span class="co"># Get average CO2 for year</span></span>
<span id="cb309-13"><a href="for-loops.html#cb309-13"></a></span>
<span id="cb309-14"><a href="for-loops.html#cb309-14"></a>  y &lt;-<span class="st"> </span>kcy<span class="op">$</span>CO2 <span class="op">-</span><span class="st"> </span>CO2.mean ; y <span class="co"># Translate each data point to an anomaly</span></span>
<span id="cb309-15"><a href="for-loops.html#cb309-15"></a></span>
<span id="cb309-16"><a href="for-loops.html#cb309-16"></a>  <span class="co"># Add points to your plot</span></span>
<span id="cb309-17"><a href="for-loops.html#cb309-17"></a>  <span class="kw">points</span>(y<span class="op">~</span>kcy<span class="op">$</span>day_of_year,<span class="dt">pch=</span><span class="dv">16</span>,<span class="dt">col=</span><span class="kw">adjustcolor</span>(<span class="st">&quot;darkblue&quot;</span>,<span class="dt">alpha.f=</span>.<span class="dv">3</span>))</span>
<span id="cb309-18"><a href="for-loops.html#cb309-18"></a>  </span>
<span id="cb309-19"><a href="for-loops.html#cb309-19"></a>}</span></code></pre></div>
<p><img src="figures/unnamed-chunk-175-1.png" width="925.44" /></p>
<p>Beautiful! So how do you interpret this graph? Why does the squiggle happen every year?</p>
</div>
</div>
<div id="using-for-loops-to-process-summarize-data" class="section level2 unnumbered">
<h2>Using <code>for</code> loops to process &amp; summarize data</h2>
<div id="using-for-loops-to-summarize-data-subgroups" class="section level3 unnumbered">
<h3>Using <code>for</code> loops to summarize data subgroups</h3>
<p>This is one of the most common uses of <code>for</code> loops: you want to summarize information about subgroups in your dataset.</p>
<div id="example-use-cases" class="section level4 unnumbered">
<h4>Example use cases</h4>
<ul>
<li><p>You want to summarize sample counts for each day of fieldwork.</p></li>
<li><p>You want to summarize details for each user in your database.</p></li>
<li><p>You want to summarize weather information for each month of the year.</p></li>
</ul>
</div>
<div id="workflow" class="section level4 unnumbered">
<h4>Workflow</h4>
<p>All of these summaries can be achieved with the same basic workflow.</p>
<ol style="list-style-type: decimal">
<li><p>Determine how to define the basic unit of summarization <em>(e.g., each day of fieldwork, each user in your database, or each month of the year)</em>.</p></li>
<li><p>Stage an empty data object (or multiple objects) in which you will store your summary.</p></li>
<li><p>Build a <code>for</code> loop to iterate through for each unique subgroup value (e.g., each sampling date or each user or each month).</p></li>
<li><p>In each iteration of the loop, subset your data to only the subgroup value of interest.</p></li>
<li><p>At the end of each iteration, update your data objects with the result from that iteration.</p></li>
<li><p>Run your `for loop!</p></li>
<li><p>After the <code>for</code> loop, combine your data objects into a dataframe.</p></li>
</ol>
<p>As you are building for loops, it can be very helpful to first start thinking about what needs to happen in each iteration of the loop. So first think about what needs to happen in <em>Step 4</em>. Then you go through each step of this workflow to build a loop around that core code.</p>
</div>
<div id="example" class="section level4 unnumbered">
<h4>Example</h4>
<p>The following scenario provides a concrete example of how to do this:</p>
<p><strong>Scenario:</strong> You participate in a survey of flightless birds in the forests of New Zealand. You conduct thirty days of fieldwork on four species of bird: the kiwi, the weka, the kakapo (<em>the world’s heaviest parrot</em>), and the kea (<em>the world’s only alpine parrot</em>).</p>
<p>Your data look like this:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="for-loops.html#cb310-1"></a>df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;./data/nz_birds.csv&quot;</span>)</span>
<span id="cb310-2"><a href="for-loops.html#cb310-2"></a><span class="kw">nrow</span>(df)</span></code></pre></div>
<pre><code>[1] 406</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="for-loops.html#cb312-1"></a><span class="kw">head</span>(df)</span></code></pre></div>
<pre><code>  day species group
1   1    Kiwi     3
2   1     Kea     4
3   1  Kakapo     4
4   1    Weka     2
5   1    Kiwi     1
6   1     Kea     3</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="for-loops.html#cb314-1"></a><span class="kw">tail</span>(df)</span></code></pre></div>
<pre><code>    day species group
401  30    Weka     3
402  30    Kiwi     3
403  30    Kiwi     3
404  30  Kakapo     3
405  30  Kakapo     1
406  30     Kea     2</code></pre>
<p>Each row contains the data for a single bird group detection.</p>
<p>Your supervisor has tasked you with writing a report of your findings, and she wants to see a table with the number of each species seen on each day of the fieldwork.</p>
<p>You can use a <code>for</code> loop to make this table.</p>
<p>But first think about what needs to happen in each iteration of your loop. For each date in the dataset, you want to count the number of sightings for each species.</p>
<p>Let’s build our core code using day 10 as a practice date:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="for-loops.html#cb316-1"></a><span class="co"># Subset to day of interest</span></span>
<span id="cb316-2"><a href="for-loops.html#cb316-2"></a>dayi &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb316-3"><a href="for-loops.html#cb316-3"></a>dfi &lt;-<span class="st"> </span>df[df<span class="op">$</span>day <span class="op">==</span><span class="st"> </span>dayi,]</span>
<span id="cb316-4"><a href="for-loops.html#cb316-4"></a></span>
<span id="cb316-5"><a href="for-loops.html#cb316-5"></a><span class="co"># Tally up counts for each species</span></span>
<span id="cb316-6"><a href="for-loops.html#cb316-6"></a>kiwi &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">which</span>(dfi<span class="op">$</span>species<span class="op">==</span><span class="st">&quot;Kiwi&quot;</span>))</span>
<span id="cb316-7"><a href="for-loops.html#cb316-7"></a>weka &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">which</span>(dfi<span class="op">$</span>species<span class="op">==</span><span class="st">&quot;Weka&quot;</span>))</span>
<span id="cb316-8"><a href="for-loops.html#cb316-8"></a>kakapo &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">which</span>(dfi<span class="op">$</span>species<span class="op">==</span><span class="st">&quot;Kakapo&quot;</span>))</span>
<span id="cb316-9"><a href="for-loops.html#cb316-9"></a>kea &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">which</span>(dfi<span class="op">$</span>species<span class="op">==</span><span class="st">&quot;Kea&quot;</span>))</span></code></pre></div>
<p>Okay! So our <code>for</code> loop needs to contain that basic code, with some minor adjustments in order to save the results from all iterations of the loop instead of just one.</p>
<p>Here is the full code for this <code>for</code> loop problem:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="for-loops.html#cb317-1"></a><span class="co"># 1: determine the unique days in the dataset:</span></span>
<span id="cb317-2"><a href="for-loops.html#cb317-2"></a>udays &lt;-<span class="st"> </span><span class="kw">unique</span>(df<span class="op">$</span>day)</span>
<span id="cb317-3"><a href="for-loops.html#cb317-3"></a></span>
<span id="cb317-4"><a href="for-loops.html#cb317-4"></a><span class="co"># 2: stage empty results vectors</span></span>
<span id="cb317-5"><a href="for-loops.html#cb317-5"></a>kiwi &lt;-<span class="st"> </span>weka &lt;-<span class="st"> </span>kakapo &lt;-<span class="st"> </span>kea &lt;-<span class="st"> </span><span class="kw">c</span>()</span>
<span id="cb317-6"><a href="for-loops.html#cb317-6"></a></span>
<span id="cb317-7"><a href="for-loops.html#cb317-7"></a><span class="co"># (create a variable named i to help you test your code as you build it)</span></span>
<span id="cb317-8"><a href="for-loops.html#cb317-8"></a>i=<span class="dv">1</span> </span>
<span id="cb317-9"><a href="for-loops.html#cb317-9"></a></span>
<span id="cb317-10"><a href="for-loops.html#cb317-10"></a><span class="co"># 3: Start for loop. Loop through each unique day</span></span>
<span id="cb317-11"><a href="for-loops.html#cb317-11"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(udays)){</span>
<span id="cb317-12"><a href="for-loops.html#cb317-12"></a>  </span>
<span id="cb317-13"><a href="for-loops.html#cb317-13"></a>  <span class="co"># 4. Subset to day of interest</span></span>
<span id="cb317-14"><a href="for-loops.html#cb317-14"></a>  dayi &lt;-<span class="st"> </span>udays[i] </span>
<span id="cb317-15"><a href="for-loops.html#cb317-15"></a>  dfi &lt;-<span class="st"> </span>df[df<span class="op">$</span>day <span class="op">==</span><span class="st"> </span>dayi,]</span>
<span id="cb317-16"><a href="for-loops.html#cb317-16"></a>  </span>
<span id="cb317-17"><a href="for-loops.html#cb317-17"></a>  <span class="co"># 5. Tally up birds, add to each vector</span></span>
<span id="cb317-18"><a href="for-loops.html#cb317-18"></a>  kiwi[i] &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">which</span>(dfi<span class="op">$</span>species<span class="op">==</span><span class="st">&quot;Kiwi&quot;</span>))</span>
<span id="cb317-19"><a href="for-loops.html#cb317-19"></a>  weka[i] &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">which</span>(dfi<span class="op">$</span>species<span class="op">==</span><span class="st">&quot;Weka&quot;</span>))</span>
<span id="cb317-20"><a href="for-loops.html#cb317-20"></a>  kakapo[i] &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">which</span>(dfi<span class="op">$</span>species<span class="op">==</span><span class="st">&quot;Kakapo&quot;</span>))</span>
<span id="cb317-21"><a href="for-loops.html#cb317-21"></a>  kea[i] &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">which</span>(dfi<span class="op">$</span>species<span class="op">==</span><span class="st">&quot;Kea&quot;</span>))</span>
<span id="cb317-22"><a href="for-loops.html#cb317-22"></a>  </span>
<span id="cb317-23"><a href="for-loops.html#cb317-23"></a>}</span>
<span id="cb317-24"><a href="for-loops.html#cb317-24"></a></span>
<span id="cb317-25"><a href="for-loops.html#cb317-25"></a><span class="co"># 6. Run for loop</span></span>
<span id="cb317-26"><a href="for-loops.html#cb317-26"></a></span>
<span id="cb317-27"><a href="for-loops.html#cb317-27"></a><span class="co"># 7. Combine results into a dataframe</span></span>
<span id="cb317-28"><a href="for-loops.html#cb317-28"></a>results &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">day=</span>udays, kiwi, weka, kakapo, kea)</span>
<span id="cb317-29"><a href="for-loops.html#cb317-29"></a></span>
<span id="cb317-30"><a href="for-loops.html#cb317-30"></a><span class="co"># Check it out!</span></span>
<span id="cb317-31"><a href="for-loops.html#cb317-31"></a>results</span></code></pre></div>
<pre><code>   day kiwi weka kakapo kea
1    1    5    6      3   3
2    2    1    3      1   2
3    3    2    4      5   3
4    4    2    3      2   0
5    5    6    6      3   2
6    6    6    2      3   6
7    7    3    1      3   7
8    8    2    6      2   2
9    9    4    1      1   1
10  10    2    0      3   3
11  11    2    2      3   5
12  12    2    3      4   4
13  13    3    3      5   1
14  14    7    3      4   6
15  15    3    4      4   5
16  16    4    2      1   4
17  17    3    4      6   2
18  18    3    4      1   1
19  19    4    6      1   6
20  20    2    6      3   1
21  21    4    3      5   6
22  22    4    2      5   5
23  23    4    6      2   4
24  24    1    2      5   2
25  25    4    6      3   1
26  26    4    2      3   5
27  27    8    5      6   7
28  28    8    1      0   2
29  29    6    1      1   3
30  30    4    2      3   4</code></pre>
</div>
</div>
<div id="nested-for-loops" class="section level3 unnumbered">
<h3>Nested <code>for</code> loops</h3>
<p>Sometimes you need to summarize your data in such a specific way that you will need to use <em>nested</em> <code>for</code> loops, i.e., one <code>for</code> loop contained within another.</p>
<p>For example, your supervisor for the New Zealand Flightless Birds Survey has now taken an interest in associations among the four bird species you have been monitoring. For example, are kiwis more abundant on the days when you detect a lot of kakapos?</p>
<p>To answer this question, your supervisor wants to see a table with each species combination (Kiwi - Kakapo, Kiwi - Weka, … Kakapo - Kea, etc.) and the number of dates in which both species were seen more than 5 times.</p>
<p>You can produce this table using a nested <code>for</code> loop. Here is how it’s done:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="for-loops.html#cb319-1"></a>uspp &lt;-<span class="st"> </span><span class="kw">unique</span>(df<span class="op">$</span>species) <span class="co"># get set of unique species</span></span>
<span id="cb319-2"><a href="for-loops.html#cb319-2"></a></span>
<span id="cb319-3"><a href="for-loops.html#cb319-3"></a>A &lt;-<span class="st"> </span>B &lt;-<span class="st"> </span><span class="kw">c</span>() <span class="co"># empty vector for names of each species in the pair</span></span>
<span id="cb319-4"><a href="for-loops.html#cb319-4"></a>X &lt;-<span class="st"> </span><span class="kw">c</span>() <span class="co"># empty vector for number of dates in which both species were common</span></span>
<span id="cb319-5"><a href="for-loops.html#cb319-5"></a></span>
<span id="cb319-6"><a href="for-loops.html#cb319-6"></a>i=<span class="dv">1</span> ; j=<span class="dv">2</span></span>
<span id="cb319-7"><a href="for-loops.html#cb319-7"></a></span>
<span id="cb319-8"><a href="for-loops.html#cb319-8"></a><span class="co"># For loop 1</span></span>
<span id="cb319-9"><a href="for-loops.html#cb319-9"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(uspp)){</span>
<span id="cb319-10"><a href="for-loops.html#cb319-10"></a>  spi &lt;-<span class="st"> </span>uspp[i] <span class="co"># species i</span></span>
<span id="cb319-11"><a href="for-loops.html#cb319-11"></a>  dfi &lt;-<span class="st"> </span>df[df<span class="op">$</span>species <span class="op">==</span><span class="st"> </span>spi,] <span class="co"># subset df to only this species</span></span>
<span id="cb319-12"><a href="for-loops.html#cb319-12"></a>  counti &lt;-<span class="st"> </span><span class="kw">table</span>(dfi<span class="op">$</span>day) <span class="co"># get number of sightings on each day</span></span>
<span id="cb319-13"><a href="for-loops.html#cb319-13"></a>  dayi &lt;-<span class="st"> </span><span class="kw">names</span>(counti)[<span class="kw">which</span>(counti <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span>)] ; <span class="co"># get the dates on which this species was seen 5+ times</span></span>
<span id="cb319-14"><a href="for-loops.html#cb319-14"></a>  </span>
<span id="cb319-15"><a href="for-loops.html#cb319-15"></a>  <span class="co"># For loop 2</span></span>
<span id="cb319-16"><a href="for-loops.html#cb319-16"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(uspp)){</span>
<span id="cb319-17"><a href="for-loops.html#cb319-17"></a>    spj &lt;-<span class="st"> </span>uspp[j] <span class="co"># species j</span></span>
<span id="cb319-18"><a href="for-loops.html#cb319-18"></a>    dfj &lt;-<span class="st"> </span>df[df<span class="op">$</span>species <span class="op">==</span><span class="st"> </span>spj,] <span class="co"># subset df to only this species</span></span>
<span id="cb319-19"><a href="for-loops.html#cb319-19"></a>    countj &lt;-<span class="st"> </span><span class="kw">table</span>(dfj<span class="op">$</span>day) <span class="co"># get number of sightings on each day</span></span>
<span id="cb319-20"><a href="for-loops.html#cb319-20"></a>    dayj &lt;-<span class="st"> </span><span class="kw">names</span>(countj)[<span class="kw">which</span>(countj <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span>)] ; <span class="co"># get the dates on which this species was seen 5+ times</span></span>
<span id="cb319-21"><a href="for-loops.html#cb319-21"></a>    </span>
<span id="cb319-22"><a href="for-loops.html#cb319-22"></a>    dates_ij &lt;-<span class="st"> </span><span class="kw">which</span>(dayi  <span class="op">%in%</span><span class="st"> </span>dayj) <span class="co"># get the dates on which both species were seen 5+ times</span></span>
<span id="cb319-23"><a href="for-loops.html#cb319-23"></a>    Xij &lt;-<span class="st"> </span><span class="kw">length</span>(dates_ij) <span class="co"># count the number of these dates</span></span>
<span id="cb319-24"><a href="for-loops.html#cb319-24"></a>    </span>
<span id="cb319-25"><a href="for-loops.html#cb319-25"></a>    <span class="co"># Add results to staged objects</span></span>
<span id="cb319-26"><a href="for-loops.html#cb319-26"></a>    X &lt;-<span class="st"> </span><span class="kw">c</span>(X,Xij) </span>
<span id="cb319-27"><a href="for-loops.html#cb319-27"></a>    A &lt;-<span class="st"> </span><span class="kw">c</span>(A,spi)</span>
<span id="cb319-28"><a href="for-loops.html#cb319-28"></a>    B &lt;-<span class="st"> </span><span class="kw">c</span>(B,spj)</span>
<span id="cb319-29"><a href="for-loops.html#cb319-29"></a>  }</span>
<span id="cb319-30"><a href="for-loops.html#cb319-30"></a></span>
<span id="cb319-31"><a href="for-loops.html#cb319-31"></a>}</span>
<span id="cb319-32"><a href="for-loops.html#cb319-32"></a></span>
<span id="cb319-33"><a href="for-loops.html#cb319-33"></a><span class="co"># Combine results into a dataframe</span></span>
<span id="cb319-34"><a href="for-loops.html#cb319-34"></a>results &lt;-<span class="st"> </span><span class="kw">data.frame</span>(A, B, X)</span>
<span id="cb319-35"><a href="for-loops.html#cb319-35"></a></span>
<span id="cb319-36"><a href="for-loops.html#cb319-36"></a><span class="co"># Check it out!</span></span>
<span id="cb319-37"><a href="for-loops.html#cb319-37"></a>results</span></code></pre></div>
<pre><code>        A      B  X
1    Kiwi   Kiwi  7
2    Kiwi    Kea  3
3    Kiwi Kakapo  1
4    Kiwi   Weka  3
5     Kea   Kiwi  3
6     Kea    Kea 10
7     Kea Kakapo  3
8     Kea   Weka  2
9  Kakapo   Kiwi  1
10 Kakapo    Kea  3
11 Kakapo Kakapo  7
12 Kakapo   Weka  1
13   Weka   Kiwi  3
14   Weka    Kea  2
15   Weka Kakapo  1
16   Weka   Weka  8</code></pre>
<p>Note that the code for adding the results to the staged objects <code>X</code>, <code>A</code>, and <code>B</code> is contained within the second for loop. This is necessary for producing our results; if we put that code in the first for loop <em>after</em> the code for the nested loop, our results would not be complete.</p>
<p>Note that each <code>for</code> loop <em>must</em> use a different variable to represent each iteration. In this example, the first loop uses <code>i</code> and the second uses <code>j</code>. If we used <code>i</code> for both loops, <code>R</code> would get very confused indeed.</p>
<p>Also note that we used <code>i</code> and <code>j</code> in the variables specific to each loop (e.g., <code>dayi</code> and <code>dayj</code>), as a simple way to help us keep track of what each variable is representing.</p>
</div>
<div id="exercise-2-5" class="section level3 unnumbered">
<h3>Exercise 2</h3>
<p>Your supervisor is happy with your pairwise species association dataframe, and wants to use it in an analysis for a publication. However, the <code>R</code> package she wants to use requires that the data be in the format of a square <em>matrix</em> with four rows – one for each species – and four columns. Like this:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="for-loops.html#cb321-1"></a>results_matrix &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA</span>, <span class="dt">nrow=</span><span class="dv">4</span>, <span class="dt">ncol=</span><span class="dv">4</span>, <span class="dt">dimnames=</span><span class="kw">list</span>(uspp,uspp))</span>
<span id="cb321-2"><a href="for-loops.html#cb321-2"></a>results_matrix</span></code></pre></div>
<pre><code>       Kiwi Kea Kakapo Weka
Kiwi     NA  NA     NA   NA
Kea      NA  NA     NA   NA
Kakapo   NA  NA     NA   NA
Weka     NA  NA     NA   NA</code></pre>
<p>You have not yet worked with matrices in this curriculum (you will in a few modules), but for now think of them as simple dataframes with a single type of data (e.g., all numeric values, like this one). You can subset matrices just as you would a dataframe: <code>matrix[row,column]</code>.</p>
<p>The values in this matrix should represent the number of dates in which each species pair was seen 5 times or more. For example, <code>result[1,2]</code> would be 3, since the Kiwi and Kea were seen 5+ times on only 3 dates.</p>
<p>She asks you to use the dataframe you just created to create this matrix. Use a nested for loop to do it.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="for-loops.html#cb323-1"></a><span class="co"># Stage empty results objects</span></span>
<span id="cb323-2"><a href="for-loops.html#cb323-2"></a>results_matrix &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data=</span><span class="ot">NA</span>, <span class="dt">nrow=</span><span class="dv">4</span>, <span class="dt">ncol=</span><span class="dv">4</span>, <span class="dt">dimnames=</span><span class="kw">list</span>(uspp,uspp))</span>
<span id="cb323-3"><a href="for-loops.html#cb323-3"></a></span>
<span id="cb323-4"><a href="for-loops.html#cb323-4"></a><span class="co"># Get unique species</span></span>
<span id="cb323-5"><a href="for-loops.html#cb323-5"></a>uspp &lt;-<span class="st"> </span><span class="kw">unique</span>(<span class="kw">c</span>(results<span class="op">$</span>A,results<span class="op">$</span>B))</span>
<span id="cb323-6"><a href="for-loops.html#cb323-6"></a></span>
<span id="cb323-7"><a href="for-loops.html#cb323-7"></a><span class="co"># Loop 1: each species (row)</span></span>
<span id="cb323-8"><a href="for-loops.html#cb323-8"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(uspp)){</span>
<span id="cb323-9"><a href="for-loops.html#cb323-9"></a>  spi &lt;-<span class="st"> </span>uspp[i]</span>
<span id="cb323-10"><a href="for-loops.html#cb323-10"></a>  resultsi &lt;-<span class="st"> </span>results[results<span class="op">$</span>A<span class="op">==</span>spi,] <span class="co"># subset data to rows where column A equals species i</span></span>
<span id="cb323-11"><a href="for-loops.html#cb323-11"></a>  </span>
<span id="cb323-12"><a href="for-loops.html#cb323-12"></a>  <span class="co"># Loop 2: each species (column)</span></span>
<span id="cb323-13"><a href="for-loops.html#cb323-13"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(uspp)){</span>
<span id="cb323-14"><a href="for-loops.html#cb323-14"></a>    spj &lt;-<span class="st"> </span>uspp[j]</span>
<span id="cb323-15"><a href="for-loops.html#cb323-15"></a>    resultsj &lt;-<span class="st"> </span>resultsi[resultsi<span class="op">$</span>B<span class="op">==</span>spj,] <span class="co"># subset data from i loop where column B equals species j</span></span>
<span id="cb323-16"><a href="for-loops.html#cb323-16"></a>    </span>
<span id="cb323-17"><a href="for-loops.html#cb323-17"></a>    Xij &lt;-<span class="st"> </span>resultsj<span class="op">$</span>X      <span class="co"># Find result</span></span>
<span id="cb323-18"><a href="for-loops.html#cb323-18"></a></span>
<span id="cb323-19"><a href="for-loops.html#cb323-19"></a>    results_matrix[i,j] &lt;-<span class="st"> </span>Xij     <span class="co"># Add result to staged object</span></span>
<span id="cb323-20"><a href="for-loops.html#cb323-20"></a>  }</span>
<span id="cb323-21"><a href="for-loops.html#cb323-21"></a>}</span>
<span id="cb323-22"><a href="for-loops.html#cb323-22"></a></span>
<span id="cb323-23"><a href="for-loops.html#cb323-23"></a>results_matrix</span></code></pre></div>
<pre><code>       Kiwi Kea Kakapo Weka
Kiwi      7   3      1    3
Kea       3  10      3    2
Kakapo    1   3      7    1
Weka      3   2      1    8</code></pre>
<p>Boom!</p>
</div>
</div>
<div id="review-assignment-8" class="section level2 unnumbered">
<h2>Review assignment</h2>
<p>First, read in and format some other cool data. The code for doing so is provided for you here:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="for-loops.html#cb325-1"></a>df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;./data/renewable-energy.csv&quot;</span>)</span></code></pre></div>
<p>This dataset, freely available from World Bank, shows the renewable electricity output for various countries, presented as a percentage of the nation’s total electricity output. They provide this data as a time series.</p>
<div id="summarize-columns-with-a-for-loop" class="section level3 unnumbered">
<h3>Summarize columns with a <code>for loop</code></h3>
<p><strong>Task 1:</strong> Use a <code>for loop</code> to find the change in renewable energy output for each nation in the dataset between 1990 and 2015. Print the difference for each nation in the console.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="for-loops.html#cb326-1"></a><span class="co"># Write your code here</span></span>
<span id="cb326-2"><a href="for-loops.html#cb326-2"></a>i=<span class="dv">2</span></span>
<span id="cb326-3"><a href="for-loops.html#cb326-3"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(df)){</span>
<span id="cb326-4"><a href="for-loops.html#cb326-4"></a>  dfi &lt;-<span class="st"> </span>df[,i] ; dfi</span>
<span id="cb326-5"><a href="for-loops.html#cb326-5"></a>  diffi &lt;-<span class="st"> </span>dfi[<span class="kw">length</span>(dfi)] <span class="op">-</span><span class="st"> </span>dfi[<span class="dv">1</span>] ; diffi</span>
<span id="cb326-6"><a href="for-loops.html#cb326-6"></a>  <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="kw">names</span>(df)[i],<span class="st">&quot; : &quot;</span>,<span class="kw">round</span>(diffi),<span class="st">&quot;% change.&quot;</span>))</span>
<span id="cb326-7"><a href="for-loops.html#cb326-7"></a>}</span></code></pre></div>
<pre><code>[1] &quot;World : 3% change.&quot;
[1] &quot;Australia : 4% change.&quot;
[1] &quot;Canada : 1% change.&quot;
[1] &quot;China : 4% change.&quot;
[1] &quot;Denmark : 62% change.&quot;
[1] &quot;India : -9% change.&quot;
[1] &quot;Japan : 5% change.&quot;
[1] &quot;New_Zealand : 0% change.&quot;
[1] &quot;Sweden : 12% change.&quot;
[1] &quot;Switzerland : 7% change.&quot;
[1] &quot;United_Kingdom : 23% change.&quot;
[1] &quot;United_States : 2% change.&quot;</code></pre>
<p><strong>Task 2:</strong> Re-do this loop, but instead of printing the differences to the console, save them in a vector.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="for-loops.html#cb328-1"></a><span class="co"># Write your code here</span></span>
<span id="cb328-2"><a href="for-loops.html#cb328-2"></a>diffs &lt;-<span class="st"> </span><span class="kw">c</span>()</span>
<span id="cb328-3"><a href="for-loops.html#cb328-3"></a>i=<span class="dv">2</span></span>
<span id="cb328-4"><a href="for-loops.html#cb328-4"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(df)){</span>
<span id="cb328-5"><a href="for-loops.html#cb328-5"></a>  dfi &lt;-<span class="st"> </span>df[,i] ; dfi</span>
<span id="cb328-6"><a href="for-loops.html#cb328-6"></a>  diffi &lt;-<span class="st"> </span>dfi[<span class="kw">length</span>(dfi)] <span class="op">-</span><span class="st"> </span>dfi[<span class="dv">1</span>] ; diffi</span>
<span id="cb328-7"><a href="for-loops.html#cb328-7"></a>  diffs &lt;-<span class="st"> </span><span class="kw">c</span>(diffs,diffi)</span>
<span id="cb328-8"><a href="for-loops.html#cb328-8"></a>}</span>
<span id="cb328-9"><a href="for-loops.html#cb328-9"></a>diffs</span></code></pre></div>
<pre><code> [1]  3.49241703  3.98181045  0.63273122  3.51887728 62.33064943 -9.14624362
 [7]  4.73004321  0.07524008 12.26263811  7.21543884 23.01128298  1.69994636</code></pre>
</div>
<div id="multi-pane-plots-with-for-loops" class="section level3 unnumbered">
<h3>Multi-pane plots with <code>for loops</code></h3>
<div id="practice-with-a-single-plot" class="section level4 unnumbered">
<h4>Practice with a single plot</h4>
<p><strong>Task 3:</strong> First, get your bearings by figuring out how to use the <code>df</code> dataset to plot the time series for the United States, for the years 1990 - 2015. Label the x axis “Year” and the y axis “% Renewable”. Include the full name of the county as the <code>main</code> title for the plot.</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="for-loops.html#cb330-1"></a><span class="co"># Write code here</span></span>
<span id="cb330-2"><a href="for-loops.html#cb330-2"></a>dfi &lt;-<span class="st"> </span>df[,<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">13</span>)] </span>
<span id="cb330-3"><a href="for-loops.html#cb330-3"></a><span class="kw">plot</span>(<span class="dt">x=</span>dfi[,<span class="dv">1</span>],</span>
<span id="cb330-4"><a href="for-loops.html#cb330-4"></a>     <span class="dt">y=</span>dfi[,<span class="dv">2</span>],</span>
<span id="cb330-5"><a href="for-loops.html#cb330-5"></a>     <span class="dt">type=</span><span class="st">&quot;l&quot;</span>,<span class="dt">lwd=</span><span class="dv">2</span>,</span>
<span id="cb330-6"><a href="for-loops.html#cb330-6"></a>     <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">1990</span>,<span class="dv">2015</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">100</span>),</span>
<span id="cb330-7"><a href="for-loops.html#cb330-7"></a>     <span class="dt">xlab=</span><span class="st">&quot;Year&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;% renewable&quot;</span>,</span>
<span id="cb330-8"><a href="for-loops.html#cb330-8"></a>     <span class="dt">main=</span><span class="kw">names</span>(dfi)[<span class="dv">2</span>])</span></code></pre></div>
<p><img src="figures/unnamed-chunk-186-1.png" width="925.44" /></p>
</div>
<div id="now-loop-it" class="section level4 unnumbered">
<h4>Now loop it!</h4>
<p><strong>Task 4:</strong> Use that code as the foundation for building up a <code>for loop</code> that displays the same time series for every country in the dataset on a multi-pane graph that with 4 rows and 3 columns.</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="for-loops.html#cb331-1"></a><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>))</span>
<span id="cb331-2"><a href="for-loops.html#cb331-2"></a>i=<span class="dv">3</span></span>
<span id="cb331-3"><a href="for-loops.html#cb331-3"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(df)){</span>
<span id="cb331-4"><a href="for-loops.html#cb331-4"></a>  dfi &lt;-<span class="st"> </span>df[,<span class="kw">c</span>(<span class="dv">1</span>,i)] ; dfi</span>
<span id="cb331-5"><a href="for-loops.html#cb331-5"></a>  <span class="kw">plot</span>(<span class="dt">x=</span>dfi[,<span class="dv">1</span>],</span>
<span id="cb331-6"><a href="for-loops.html#cb331-6"></a>       <span class="dt">y=</span>dfi[,<span class="dv">2</span>],</span>
<span id="cb331-7"><a href="for-loops.html#cb331-7"></a>       <span class="dt">type=</span><span class="st">&quot;l&quot;</span>,<span class="dt">lwd=</span><span class="dv">2</span>,</span>
<span id="cb331-8"><a href="for-loops.html#cb331-8"></a>       <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">1990</span>,<span class="dv">2015</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">100</span>),</span>
<span id="cb331-9"><a href="for-loops.html#cb331-9"></a>       <span class="dt">xlab=</span><span class="st">&quot;Year&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;% renewable&quot;</span>,</span>
<span id="cb331-10"><a href="for-loops.html#cb331-10"></a>       <span class="dt">main=</span><span class="kw">names</span>(dfi)[<span class="dv">2</span>])</span>
<span id="cb331-11"><a href="for-loops.html#cb331-11"></a>}</span></code></pre></div>
<p><img src="figures/unnamed-chunk-187-1.png" width="768" /></p>
</div>
<div id="now-loop-it-in-layers" class="section level4 unnumbered">
<h4>Now loop it <em>in layers!</em></h4>
<p><strong>Task 5:</strong> Now try a different presentation. Instead of producing 12 different plots, superimpose the time series for each country on the <em>same single plot</em>.</p>
<p>To add some flare, highlight the USA curve by coloring it red and making it thicker.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="for-loops.html#cb332-1"></a><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb332-2"><a href="for-loops.html#cb332-2"></a><span class="kw">plot</span>(<span class="dv">1</span>,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,<span class="dt">lwd=</span><span class="dv">2</span>,</span>
<span id="cb332-3"><a href="for-loops.html#cb332-3"></a>     <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">1990</span>,<span class="dv">2015</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">100</span>),</span>
<span id="cb332-4"><a href="for-loops.html#cb332-4"></a>     <span class="dt">xlab=</span><span class="st">&quot;Year&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;% Renewable&quot;</span>)</span>
<span id="cb332-5"><a href="for-loops.html#cb332-5"></a></span>
<span id="cb332-6"><a href="for-loops.html#cb332-6"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(df)){</span>
<span id="cb332-7"><a href="for-loops.html#cb332-7"></a>  dfi &lt;-<span class="st"> </span>df[,<span class="kw">c</span>(<span class="dv">1</span>,i)] ; dfi</span>
<span id="cb332-8"><a href="for-loops.html#cb332-8"></a>  <span class="kw">lines</span>(dfi[,<span class="dv">2</span>]<span class="op">~</span>dfi[,<span class="dv">1</span>],<span class="dt">lwd=</span><span class="dv">2</span>,<span class="dt">col=</span><span class="kw">adjustcolor</span>(<span class="st">&quot;black&quot;</span>,<span class="dt">alpha.f=</span>.<span class="dv">4</span>))</span>
<span id="cb332-9"><a href="for-loops.html#cb332-9"></a>}</span>
<span id="cb332-10"><a href="for-loops.html#cb332-10"></a></span>
<span id="cb332-11"><a href="for-loops.html#cb332-11"></a><span class="kw">lines</span>(df<span class="op">$</span>United_States<span class="op">~</span>df<span class="op">$</span>year,<span class="dt">lwd=</span><span class="dv">4</span>,<span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-188-1.png" width="925.44" /></p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="writing-functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conditional-statements.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/databrew/intro-to-data-science/edit/master/07c-for_loops.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["intro-to-data-science.pdf", "intro-to-data-science.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
