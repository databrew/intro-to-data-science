<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 20 Writing functions | DataBOOM: the canon for data science</title>
  <meta name="description" content="Data science is just data and science. But it’s better with pizza." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 20 Writing functions | DataBOOM: the canon for data science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Data science is just data and science. But it’s better with pizza." />
  <meta name="github-repo" content="databrew/intro-to-data-science" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 20 Writing functions | DataBOOM: the canon for data science" />
  
  <meta name="twitter:description" content="Data science is just data and science. But it’s better with pizza." />
  

<meta name="author" content="Databrew" />


<meta name="date" content="2021-06-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="joining-datasets.html"/>
<link rel="next" href="for-loops.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DataBOOM: the canon for data science </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-this-is-and-what-it-isnt"><i class="fa fa-check"></i>What this is, and what it isn’t</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-this-is-for"><i class="fa fa-check"></i>Who this is for</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-will-learn"><i class="fa fa-check"></i>What you will learn</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-we-are"><i class="fa fa-check"></i>Who we are</a></li>
</ul></li>
<li class="part"><span><b>I Core theory</b></span></li>
<li class="chapter" data-level="2" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html"><i class="fa fa-check"></i><b>2</b> Principles of data science</a>
<ul>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#what-is-data-science"><i class="fa fa-check"></i>What is data science?</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#data-scientist-vs-data-analysist-vs-data-engineer"><i class="fa fa-check"></i>Data scientist vs data analysist vs data engineer</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#what-is-the-data-life-cycle"><i class="fa fa-check"></i>What is the data life cycle?</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#data-science-in-the-wild"><i class="fa fa-check"></i>Data science ‘in the wild’</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-science.html"><a href="principles-of-data-science.html#the-reproducibility-crisis"><i class="fa fa-check"></i>The reproducibility crisis</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>3</b> Visualizing data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dataviz.html"><a href="dataviz.html#the-importance-of-visualization"><i class="fa fa-check"></i><b>3.1</b> The importance of visualization</a></li>
<li class="chapter" data-level="3.2" data-path="dataviz.html"><a href="dataviz.html#bad-examples"><i class="fa fa-check"></i><b>3.2</b> Bad examples</a></li>
<li class="chapter" data-level="3.3" data-path="dataviz.html"><a href="dataviz.html#good-exaples"><i class="fa fa-check"></i><b>3.3</b> Good exaples</a></li>
<li class="chapter" data-level="3.4" data-path="dataviz.html"><a href="dataviz.html#quick-video"><i class="fa fa-check"></i><b>3.4</b> Quick video</a></li>
</ul></li>
<li class="part"><span><b>II Getting sta<code>r</code>ted</b></span></li>
<li class="chapter" data-level="4" data-path="setting-up-rstudio.html"><a href="setting-up-rstudio.html"><i class="fa fa-check"></i><b>4</b> Setting up <code>RStudio</code></a></li>
<li class="chapter" data-level="5" data-path="running-r-code.html"><a href="running-r-code.html"><i class="fa fa-check"></i><b>5</b> Running R code</a>
<ul>
<li><a href="running-r-code.html#rstudios-console">RStudio’s <em>Console</em></a></li>
<li><a href="running-r-code.html#running-code-in-the-console">Running code in the <em>Console</em></a></li>
<li class="chapter" data-level="" data-path="running-r-code.html"><a href="running-r-code.html#use-r-like-a-calculator"><i class="fa fa-check"></i>Use R like a calculator</a></li>
<li class="chapter" data-level="" data-path="running-r-code.html"><a href="running-r-code.html#using-operators-in-r"><i class="fa fa-check"></i>Using operators in R</a></li>
<li class="chapter" data-level="" data-path="running-r-code.html"><a href="running-r-code.html#use-built-in-functions-within-r"><i class="fa fa-check"></i>Use built-in functions within R</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="using-rstudio-and-r-scripts.html"><a href="using-rstudio-and-r-scripts.html"><i class="fa fa-check"></i><b>6</b> Using <code>RStudio</code> and <code>R</code> scripts</a>
<ul>
<li><a href="using-rstudio-and-r-scripts.html#r-and-rstudio-whats-the-difference"><code>R</code> and <code>RStudio</code>: what’s the difference?</a></li>
<li><a href="using-rstudio-and-r-scripts.html#two-minute-tour-of-rstudio">Two-minute tour of <code>RStudio</code></a></li>
<li class="chapter" data-level="" data-path="using-rstudio-and-r-scripts.html"><a href="using-rstudio-and-r-scripts.html#scripts"><i class="fa fa-check"></i>Scripts</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-and-r-scripts.html"><a href="using-rstudio-and-r-scripts.html#your-working-directory"><i class="fa fa-check"></i>Your working directory</a></li>
<li class="chapter" data-level="" data-path="using-rstudio-and-r-scripts.html"><a href="using-rstudio-and-r-scripts.html#typical-workflows"><i class="fa fa-check"></i>Typical workflows</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="variables-in-r.html"><a href="variables-in-r.html"><i class="fa fa-check"></i><b>7</b> Variables in <code>R</code></a>
<ul>
<li class="chapter" data-level="" data-path="variables-in-r.html"><a href="variables-in-r.html#introducing-variables"><i class="fa fa-check"></i>Introducing variables</a></li>
<li><a href="variables-in-r.html#types-of-data-in-r">Types of data in <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="structures-for-data-in-r.html"><a href="structures-for-data-in-r.html"><i class="fa fa-check"></i><b>8</b> Structures for data in <code>R</code></a>
<ul>
<li class="chapter" data-level="" data-path="structures-for-data-in-r.html"><a href="structures-for-data-in-r.html#introducing-data-structures"><i class="fa fa-check"></i>Introducing data structures</a></li>
<li class="chapter" data-level="" data-path="structures-for-data-in-r.html"><a href="structures-for-data-in-r.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="calling-functions.html"><a href="calling-functions.html"><i class="fa fa-check"></i><b>9</b> Calling functions</a>
<ul>
<li><a href="calling-functions.html#introducing-r-functions">Introducing <code>R</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>10</b> Subsetting and filtering</a>
<ul>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#a-quick-review-of-booleans"><i class="fa fa-check"></i>A quick review of booleans</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="base-plots.html"><a href="base-plots.html"><i class="fa fa-check"></i><b>11</b> Base plots</a>
<ul>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#create-a-basic-plot"><i class="fa fa-check"></i>Create a basic plot</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#most-common-types-of-plots"><i class="fa fa-check"></i>Most common types of plots</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#basic-plot-formatting"><i class="fa fa-check"></i>Basic plot formatting</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#plotting-with-data-frames"><i class="fa fa-check"></i>Plotting with data frames</a></li>
<li class="chapter" data-level="" data-path="base-plots.html"><a href="base-plots.html#next-level-plotting"><i class="fa fa-check"></i>Next-level plotting</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>12</b> Packages</a>
<ul>
<li><a href="packages.html#introducing-r-packages">Introducing <code>R</code> packages</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#finding-the-packages-already-on-your-computer"><i class="fa fa-check"></i>Finding the packages already on your computer</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#installing-a-new-package"><i class="fa fa-check"></i>Installing a new package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#loading-an-installed-package"><i class="fa fa-check"></i>Loading an installed package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#calling-functions-from-a-package"><i class="fa fa-check"></i>Calling functions from a package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#review-the-workflow-for-using-a-package"><i class="fa fa-check"></i>Review: the workflow for using a package</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#a-note-on-package-dependencies"><i class="fa fa-check"></i>A note on package dependencies</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#a-note-on-package-versions"><i class="fa fa-check"></i>A note on package versions</a></li>
<li class="chapter" data-level="" data-path="packages.html"><a href="packages.html#review-assigment-lets-install-some-packages"><i class="fa fa-check"></i>Review assigment: let’s install some packages</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html"><i class="fa fa-check"></i><b>13</b> Basics of <code>ggplot</code></a>
<ul>
<li class="chapter" data-level="13.1" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html#thinking-about-data-visualization"><i class="fa fa-check"></i><b>13.1</b> Thinking about data visualization</a></li>
<li><a href="basics-of-ggplot.html#what-is-ggplot">What is <code>ggplot</code>?</a></li>
<li class="chapter" data-level="" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html#the-name-and-concept"><i class="fa fa-check"></i>The name and concept</a></li>
<li class="chapter" data-level="" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html#practice"><i class="fa fa-check"></i>Practice</a></li>
<li class="chapter" data-level="" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html#scatter-plot"><i class="fa fa-check"></i>Scatter plot</a></li>
<li class="chapter" data-level="" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html#barplot"><i class="fa fa-check"></i>Barplot</a></li>
<li class="chapter" data-level="" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html#practice-1"><i class="fa fa-check"></i>Practice 1</a></li>
<li class="chapter" data-level="" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html#practice-exercises-1"><i class="fa fa-check"></i>Practice exercises 1</a></li>
<li class="chapter" data-level="" data-path="basics-of-ggplot.html"><a href="basics-of-ggplot.html#practice-exercises-2"><i class="fa fa-check"></i>Practice exercises 2</a></li>
</ul></li>
<li class="part"><span><b>III Basic <code>R</code> workflow</b></span></li>
<li class="chapter" data-level="14" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>14</b> Importing data</a>
<ul>
<li><a href="importing-data.html#csv-files"><code>.csv</code> files</a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#data-format-requirements"><i class="fa fa-check"></i>Data format requirements</a></li>
<li class="chapter" data-level="" data-path="importing-data.html"><a href="importing-data.html#reading-in-data"><i class="fa fa-check"></i>Reading in data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>15</b> Dataframes</a>
<ul>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#subsetting-exploring-dataframes"><i class="fa fa-check"></i>Subsetting &amp; exploring dataframes</a></li>
<li class="chapter" data-level="" data-path="dataframes.html"><a href="dataframes.html#dplyr"><i class="fa fa-check"></i>dplyr</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="exporting-data-plots.html"><a href="exporting-data-plots.html"><i class="fa fa-check"></i><b>16</b> Exporting data &amp; plots</a>
<ul>
<li><a href="exporting-data-plots.html#write.csv"><code>write.csv()</code></a></li>
<li><a href="exporting-data-plots.html#saverds"><code>saveRDS()</code></a></li>
<li><a href="exporting-data-plots.html#pdf-and-png"><code>pdf()</code> and <code>png()</code></a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="exploring-data.html"><a href="exploring-data.html"><i class="fa fa-check"></i><b>17</b> Exploring data</a>
<ul>
<li class="chapter" data-level="" data-path="exploring-data.html"><a href="exploring-data.html#exploring-distributions"><i class="fa fa-check"></i>Exploring distributions</a></li>
<li class="chapter" data-level="" data-path="exploring-data.html"><a href="exploring-data.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="significance-statistics.html"><a href="significance-statistics.html"><i class="fa fa-check"></i><b>18</b> Significance statistics</a>
<ul>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#p-values"><i class="fa fa-check"></i>p-values</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#tests-for-different-data-types"><i class="fa fa-check"></i>Tests for different data types</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#comparison-tests"><i class="fa fa-check"></i>Comparison tests</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#tests-of-association"><i class="fa fa-check"></i>Tests of association</a></li>
<li class="chapter" data-level="" data-path="significance-statistics.html"><a href="significance-statistics.html#reporting-results"><i class="fa fa-check"></i>Reporting results</a></li>
</ul></li>
<li class="part"><span><b>IV Essential <code>R</code> skills</b></span></li>
<li class="chapter" data-level="19" data-path="joining-datasets.html"><a href="joining-datasets.html"><i class="fa fa-check"></i><b>19</b> Joining datasets</a>
<ul>
<li class="chapter" data-level="" data-path="joining-datasets.html"><a href="joining-datasets.html#joining-the-basics"><i class="fa fa-check"></i>Joining: the basics</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>20</b> Writing functions</a>
<ul>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#first-steps"><i class="fa fa-check"></i>First steps</a></li>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#next-steps"><i class="fa fa-check"></i>Next steps</a></li>
<li class="chapter" data-level="" data-path="writing-functions.html"><a href="writing-functions.html#sourcing-functions"><i class="fa fa-check"></i>Sourcing functions</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>21</b> <code>for</code> loops</a>
<ul>
<li class="chapter" data-level="" data-path="for-loops.html"><a href="for-loops.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li><a href="for-loops.html#for-loops-in-plots"><code>for</code> loops in plots</a></li>
<li><a href="for-loops.html#using-for-loops-to-process-summarize-data">Using <code>for</code> loops to process &amp; summarize data</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="conditional-statements.html"><a href="conditional-statements.html"><i class="fa fa-check"></i><b>22</b> Conditional statements</a>
<ul>
<li class="chapter" data-level="" data-path="conditional-statements.html"><a href="conditional-statements.html#first-steps-1"><i class="fa fa-check"></i>First steps</a></li>
<li class="chapter" data-level="" data-path="conditional-statements.html"><a href="conditional-statements.html#next-steps-1"><i class="fa fa-check"></i>Next steps</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>23</b> Working with text</a>
<ul>
<li class="chapter" data-level="" data-path="text.html"><a href="text.html#basics-1"><i class="fa fa-check"></i>Basics</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="trump.html"><a href="trump.html"><i class="fa fa-check"></i><b>24</b> Trump tweets</a></li>
<li class="chapter" data-level="25" data-path="dates.html"><a href="dates.html"><i class="fa fa-check"></i><b>25</b> Working with dates &amp; times</a>
<ul>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#first-steps-2"><i class="fa fa-check"></i>First steps</a></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#lubridate"><i class="fa fa-check"></i>Lubridate</a></li>
<li><a href="dates.html#getting-familiar-with-the-date-type">Getting familiar with the <code>date</code> type</a></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#converting-dates-from-strings"><i class="fa fa-check"></i>Converting dates from strings</a></li>
<li><a href="dates.html#getting-familiar-with-the-datetime-type">Getting familiar with the <code>datetime</code> type</a></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#extracting-components-from-date-and-datetime-objects"><i class="fa fa-check"></i>Extracting components from date and datetime objects</a></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#cough-data-exercise"><i class="fa fa-check"></i>Cough data exercise</a></li>
<li class="chapter" data-level="" data-path="dates.html"><a href="dates.html#weather-data-exercise"><i class="fa fa-check"></i>Weather data exercise</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="working-with-factors.html"><a href="working-with-factors.html"><i class="fa fa-check"></i><b>26</b> Working with factors</a></li>
<li class="chapter" data-level="27" data-path="matrices-lists.html"><a href="matrices-lists.html"><i class="fa fa-check"></i><b>27</b> Matrices &amp; lists</a>
<ul>
<li class="chapter" data-level="" data-path="matrices-lists.html"><a href="matrices-lists.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="matrices-lists.html"><a href="matrices-lists.html#matrices"><i class="fa fa-check"></i>Matrices</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="cleaning-messy-data.html"><a href="cleaning-messy-data.html"><i class="fa fa-check"></i><b>28</b> Cleaning messy data</a></li>
<li class="chapter" data-level="29" data-path="excel-files-googlesheets.html"><a href="excel-files-googlesheets.html"><i class="fa fa-check"></i><b>29</b> Excel files &amp; GoogleSheets</a></li>
<li class="part"><span><b>V Interactive dashboards</b></span></li>
<li class="chapter" data-level="30" data-path="intro-to-shiny-apps.html"><a href="intro-to-shiny-apps.html"><i class="fa fa-check"></i><b>30</b> Intro to Shiny apps</a></li>
<li class="chapter" data-level="31" data-path="shiny-dashboards.html"><a href="shiny-dashboards.html"><i class="fa fa-check"></i><b>31</b> Shiny dashboards</a></li>
<li class="chapter" data-level="32" data-path="data-entry-apps.html"><a href="data-entry-apps.html"><i class="fa fa-check"></i><b>32</b> Data entry apps</a></li>
<li class="part"><span><b>VI Databases</b></span></li>
<li class="chapter" data-level="33" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>33</b> Introduction</a>
<ul>
<li class="chapter" data-level="33.1" data-path="introduction-1.html"><a href="introduction-1.html#what"><i class="fa fa-check"></i><b>33.1</b> What</a></li>
<li class="chapter" data-level="33.2" data-path="introduction-1.html"><a href="introduction-1.html#why"><i class="fa fa-check"></i><b>33.2</b> Why</a></li>
<li class="chapter" data-level="33.3" data-path="introduction-1.html"><a href="introduction-1.html#when"><i class="fa fa-check"></i><b>33.3</b> When</a></li>
<li class="chapter" data-level="33.4" data-path="introduction-1.html"><a href="introduction-1.html#when-not"><i class="fa fa-check"></i><b>33.4</b> When not</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="platforms.html"><a href="platforms.html"><i class="fa fa-check"></i><b>34</b> Platforms</a>
<ul>
<li class="chapter" data-level="34.1" data-path="platforms.html"><a href="platforms.html#postgresql"><i class="fa fa-check"></i><b>34.1</b> PostgreSQL</a></li>
<li class="chapter" data-level="34.2" data-path="platforms.html"><a href="platforms.html#mysql"><i class="fa fa-check"></i><b>34.2</b> mySQL</a></li>
<li class="chapter" data-level="34.3" data-path="platforms.html"><a href="platforms.html#sqlite"><i class="fa fa-check"></i><b>34.3</b> SQLite</a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="alternatives.html"><a href="alternatives.html"><i class="fa fa-check"></i><b>35</b> Alternatives</a>
<ul>
<li class="chapter" data-level="35.1" data-path="alternatives.html"><a href="alternatives.html#nosql"><i class="fa fa-check"></i><b>35.1</b> NoSQL</a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="practices.html"><a href="practices.html"><i class="fa fa-check"></i><b>36</b> Practices</a></li>
<li class="part"><span><b>VII Documenting your work</b></span></li>
<li class="chapter" data-level="37" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>37</b> R Markdown</a></li>
<li class="chapter" data-level="38" data-path="reproducible-research.html"><a href="reproducible-research.html"><i class="fa fa-check"></i><b>38</b> Reproducible research</a></li>
<li class="chapter" data-level="39" data-path="automated-reporting.html"><a href="automated-reporting.html"><i class="fa fa-check"></i><b>39</b> Automated reporting</a></li>
<li class="chapter" data-level="40" data-path="formatting-standards.html"><a href="formatting-standards.html"><i class="fa fa-check"></i><b>40</b> Formatting standards</a>
<ul>
<li class="chapter" data-level="40.1" data-path="formatting-standards.html"><a href="formatting-standards.html#tables"><i class="fa fa-check"></i><b>40.1</b> Tables</a></li>
<li class="chapter" data-level="40.2" data-path="formatting-standards.html"><a href="formatting-standards.html#figures"><i class="fa fa-check"></i><b>40.2</b> Figures</a></li>
<li class="chapter" data-level="40.3" data-path="formatting-standards.html"><a href="formatting-standards.html#captions"><i class="fa fa-check"></i><b>40.3</b> Captions</a></li>
</ul></li>
<li class="chapter" data-level="41" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>41</b> Git</a>
<ul>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#there-is-a-better-way"><i class="fa fa-check"></i>There is a better way</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#what-is-git"><i class="fa fa-check"></i>What is git?</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#why-1"><i class="fa fa-check"></i>Why?</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#get-ready-for-git"><i class="fa fa-check"></i>Get ready for git</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#getting-to-know-git-bash"><i class="fa fa-check"></i>Getting to know git bash</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#configuration"><i class="fa fa-check"></i>Configuration</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#github"><i class="fa fa-check"></i>Github</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#a-bit-more-practice"><i class="fa fa-check"></i>A bit more practice</a></li>
<li class="chapter" data-level="" data-path="git.html"><a href="git.html#advanced-git"><i class="fa fa-check"></i>Advanced git</a></li>
</ul></li>
<li class="part"><span><b>VIII Sharing research</b></span></li>
<li class="chapter" data-level="42" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html"><i class="fa fa-check"></i><b>42</b> Sections of a report</a>
<ul>
<li class="chapter" data-level="" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html#overall-structure"><i class="fa fa-check"></i>Overall structure</a></li>
<li class="chapter" data-level="" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html#abstract"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html#introduction-2"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html#results"><i class="fa fa-check"></i>Results</a></li>
<li class="chapter" data-level="" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html#discussion"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="sections-of-a-report.html"><a href="sections-of-a-report.html#other-elements-of-a-report"><i class="fa fa-check"></i>Other elements of a report</a></li>
</ul></li>
<li class="chapter" data-level="43" data-path="style.html"><a href="style.html"><i class="fa fa-check"></i><b>43</b> Formatting, structure &amp; style</a>
<ul>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#core-principles"><i class="fa fa-check"></i>Core principles</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#further-considerations"><i class="fa fa-check"></i>Further considerations</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#logistics-of-scientific-writing"><i class="fa fa-check"></i>Logistics of scientific writing</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#formatting-tables"><i class="fa fa-check"></i>Formatting tables</a></li>
<li class="chapter" data-level="" data-path="style.html"><a href="style.html#formatting-figures"><i class="fa fa-check"></i>Formatting figures</a></li>
</ul></li>
<li class="chapter" data-level="44" data-path="presentations.html"><a href="presentations.html"><i class="fa fa-check"></i><b>44</b> Presentations</a></li>
<li class="chapter" data-level="" data-path="creating-websites.html"><a href="creating-websites.html"><i class="fa fa-check"></i>Creating websites</a></li>
<li class="part"><span><b>IX Advanced skills</b></span></li>
<li class="chapter" data-level="45" data-path="mapping.html"><a href="mapping.html"><i class="fa fa-check"></i><b>45</b> Mapping</a></li>
<li class="chapter" data-level="46" data-path="geographic-computing-gis.html"><a href="geographic-computing-gis.html"><i class="fa fa-check"></i><b>46</b> Geographic computing &amp; GIS</a></li>
<li class="chapter" data-level="47" data-path="statistical-modeling.html"><a href="statistical-modeling.html"><i class="fa fa-check"></i><b>47</b> Statistical modeling</a></li>
<li class="chapter" data-level="48" data-path="apply-family.html"><a href="apply-family.html"><i class="fa fa-check"></i><b>48</b> Apply family</a></li>
<li class="chapter" data-level="49" data-path="randomization-statistics.html"><a href="randomization-statistics.html"><i class="fa fa-check"></i><b>49</b> Randomization statistics</a>
<ul>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#basic-idea"><i class="fa fa-check"></i>Basic idea</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#common-use-cases"><i class="fa fa-check"></i>Common use cases</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#review-assignment-10"><i class="fa fa-check"></i>Review assignment</a></li>
<li class="chapter" data-level="" data-path="randomization-statistics.html"><a href="randomization-statistics.html#c-do-social-bonds-relate-to-kinship"><i class="fa fa-check"></i>(c) Do social bonds relate to kinship?</a></li>
</ul></li>
<li class="chapter" data-level="50" data-path="iterative-simulations.html"><a href="iterative-simulations.html"><i class="fa fa-check"></i><b>50</b> Iterative simulations</a></li>
<li class="chapter" data-level="51" data-path="image-analysis.html"><a href="image-analysis.html"><i class="fa fa-check"></i><b>51</b> Image analysis</a></li>
<li class="chapter" data-level="52" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>52</b> Machine learning</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/databrew/intro-to-data-science" target="blank">Databrew LLC</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><code>DataBOOM</code>: the canon for data science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="writing-functions" class="section level1" number="20">
<h1><span class="header-section-number">Module 20</span> Writing functions</h1>
<div id="learning-goals-15" class="section level4 unnumbered">
<h4>Learning goals</h4>
<ul>
<li>Be able to write your own functions</li>
<li>Be able to use functions to make your work more efficient, effective, and organized</li>
</ul>
</div>
<div id="first-steps" class="section level2 unnumbered">
<h2>First steps</h2>
<p>You’ve already used dozens of functions during your learning in <code>R</code> so far. As you start applying <code>R</code> to your own projects, you will inevitably encounter a puzzle that could be solved by a custom function you write yourself. This module shows you how.</p>
<p>As explained in the <strong>Calling Functions</strong> module, most functions have three key components:</p>
<ol style="list-style-type: decimal">
<li>one or more inputs,<br />
</li>
<li>a process that is applied to those inputs, and<br />
</li>
<li>an output of the result.</li>
</ol>
<p>When you define your own custom function, these are the three pieces you must be sure to include.</p>
<p>Here is a basic example:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="writing-functions.html#cb256-1" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb256-2"><a href="writing-functions.html#cb256-2" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fl">1.3</span><span class="sc">*</span>x <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb256-3"><a href="writing-functions.html#cb256-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb256-4"><a href="writing-functions.html#cb256-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now use your function:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="writing-functions.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="at">x=</span><span class="dv">2</span>) <span class="co"># example 1</span></span>
<span id="cb257-2"><a href="writing-functions.html#cb257-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">12.6</span></span>
<span id="cb257-3"><a href="writing-functions.html#cb257-3" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="at">x=</span><span class="dv">4</span>) <span class="co"># example 2</span></span>
<span id="cb257-4"><a href="writing-functions.html#cb257-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">15.2</span></span></code></pre></div>
<p>Let’s break this down.</p>
<ul>
<li><code>my_function</code> is the name you are giving your function. It is the command you will use to call your function.</li>
<li>The <code>function()</code> command is what you use to define a function.</li>
<li><code>x</code> is the variable you are using to represent your input.</li>
<li><code>y &lt;- 1.3x + 10</code> is the process that you are applying to your input.</li>
<li><code>return(y)</code> is the command you use to define what the function’s output will be.</li>
</ul>
<p>Note that you are not <em>required</em> to write out <code>x=2</code> in full when you are calling your function. Just providing <code>2</code> can also work:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="writing-functions.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="dv">2</span>)</span>
<span id="cb258-2"><a href="writing-functions.html#cb258-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">12.6</span></span></code></pre></div>
<div id="exercise-1-5" class="section level3 unnumbered">
<h3>Exercise 1</h3>
<p>Define your own basic function and run it to make sure it works.</p>
</div>
</div>
<div id="next-steps" class="section level2 unnumbered">
<h2>Next steps</h2>
<div id="multiple-inputs" class="section level3 unnumbered">
<h3>Multiple inputs</h3>
<p>You can define a function with multiple inputs. Just separate each input with a comma.</p>
<p>To demonstrate this, let’s modify the function above to allow you to define any linear regression you wish:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="writing-functions.html#cb259-1" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x,a,b){</span>
<span id="cb259-2"><a href="writing-functions.html#cb259-2" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> a<span class="sc">*</span>x <span class="sc">+</span> b</span>
<span id="cb259-3"><a href="writing-functions.html#cb259-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb259-4"><a href="writing-functions.html#cb259-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now call your function:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="writing-functions.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="at">x=</span><span class="dv">2</span>,<span class="at">a=</span><span class="fl">1.3</span>,<span class="at">b=</span><span class="dv">10</span>) <span class="co"># example 1</span></span>
<span id="cb260-2"><a href="writing-functions.html#cb260-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">12.6</span></span>
<span id="cb260-3"><a href="writing-functions.html#cb260-3" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="at">x=</span><span class="dv">4</span>,<span class="at">a=</span><span class="dv">5</span>,<span class="at">b=</span><span class="dv">100</span>) <span class="co"># example 2</span></span>
<span id="cb260-4"><a href="writing-functions.html#cb260-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">120</span></span></code></pre></div>
<p>Note that you do not need to write out the name of each input, as long as you provide inputs in the correct order.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="writing-functions.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="dv">2</span>, <span class="fl">1.3</span>, <span class="dv">10</span>) <span class="co"># example 1</span></span>
<span id="cb261-2"><a href="writing-functions.html#cb261-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">12.6</span></span>
<span id="cb261-3"><a href="writing-functions.html#cb261-3" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">100</span>) <span class="co"># example 2</span></span>
<span id="cb261-4"><a href="writing-functions.html#cb261-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">120</span></span></code></pre></div>
<p>But note that it is usually best practice to name each input in your function call, to prevent the possibility of any confusion or mistakes. Also, when you name each input you can provide inputs in whatever order you wish:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="writing-functions.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="at">x=</span><span class="dv">2</span>, <span class="at">a=</span><span class="fl">1.3</span>, <span class="at">b=</span><span class="dv">10</span>)</span>
<span id="cb262-2"><a href="writing-functions.html#cb262-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">12.6</span></span>
<span id="cb262-3"><a href="writing-functions.html#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="at">a=</span><span class="fl">1.3</span>, <span class="at">b=</span><span class="dv">10</span>, <span class="at">x=</span><span class="dv">2</span>) <span class="co"># different inout order, same output value</span></span>
<span id="cb262-4"><a href="writing-functions.html#cb262-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">12.6</span></span></code></pre></div>
</div>
<div id="providing-defaults-for-inputs" class="section level3 unnumbered">
<h3>Providing defaults for inputs</h3>
<p>Just as <code>R</code>’s base functions include default values for some inputs (think <code>na.rm=FALSE</code> for <code>mean()</code> and <code>sd()</code>), you can define defaults in your own functions.</p>
<p>This version of <code>my_function</code> includes default values for inputs <code>a</code> and <code>b</code>.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="writing-functions.html#cb263-1" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x,<span class="at">a=</span><span class="fl">1.3</span>,<span class="at">b=</span><span class="dv">10</span>){</span>
<span id="cb263-2"><a href="writing-functions.html#cb263-2" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> a<span class="sc">*</span>x <span class="sc">+</span> b</span>
<span id="cb263-3"><a href="writing-functions.html#cb263-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb263-4"><a href="writing-functions.html#cb263-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>When you provide default values, you no longer need to specify those inputs in your function call:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="writing-functions.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="at">x=</span><span class="dv">2</span>)</span>
<span id="cb264-2"><a href="writing-functions.html#cb264-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">12.6</span></span></code></pre></div>
</div>
<div id="adding-plots" class="section level3 unnumbered">
<h3>Adding plots</h3>
<p>Plots can be included in the function commands just as in any other context:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="writing-functions.html#cb265-1" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x,<span class="at">a=</span><span class="fl">1.3</span>,<span class="at">b=</span><span class="dv">10</span>){</span>
<span id="cb265-2"><a href="writing-functions.html#cb265-2" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> a<span class="sc">*</span>x <span class="sc">+</span> b</span>
<span id="cb265-3"><a href="writing-functions.html#cb265-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(y <span class="sc">~</span> x, <span class="at">type=</span><span class="st">&quot;b&quot;</span>)</span>
<span id="cb265-4"><a href="writing-functions.html#cb265-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb265-5"><a href="writing-functions.html#cb265-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="writing-functions.html#cb266-1" aria-hidden="true" tabindex="-1"></a>my_input <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb266-2"><a href="writing-functions.html#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(<span class="at">x=</span>my_input)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-290-1.png" width="925.44" /></p>
<pre><code> [1] 11.3 12.6 13.9 15.2 16.5 17.8 19.1 20.4 21.7 23.0 24.3 25.6 26.9 28.2 29.5
[16] 30.8 32.1 33.4 34.7 36.0</code></pre>
<p>Adding plots to functions can be super useful if you want to make multiple plots with the same formatting specifications. Rather than retyping the same long plot commands multiple times, just write a single function and call the function as many times as you wish.</p>
<p>Let’s add some fancy formatting to our plot. Note that we will modify the name of the function to make it more descriptive and helpful. The <code>lm</code> in <code>plot_my_lm</code> stands for <em>linear model</em>, which is what is being defined with the <code>y=ax+b</code> equation.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="writing-functions.html#cb268-1" aria-hidden="true" tabindex="-1"></a>plot_my_lm <span class="ot">&lt;-</span> <span class="cf">function</span>(x,<span class="at">a=</span><span class="fl">1.3</span>,<span class="at">b=</span><span class="dv">10</span>,<span class="at">plot_only=</span><span class="cn">TRUE</span>){</span>
<span id="cb268-2"><a href="writing-functions.html#cb268-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb268-3"><a href="writing-functions.html#cb268-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process</span></span>
<span id="cb268-4"><a href="writing-functions.html#cb268-4" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> a<span class="sc">*</span>x <span class="sc">+</span> b</span>
<span id="cb268-5"><a href="writing-functions.html#cb268-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb268-6"><a href="writing-functions.html#cb268-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Plot</span></span>
<span id="cb268-7"><a href="writing-functions.html#cb268-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="fl">4.2</span>,<span class="fl">4.2</span>,<span class="dv">3</span>,.<span class="dv">5</span>)) <span class="co"># set plot margins</span></span>
<span id="cb268-8"><a href="writing-functions.html#cb268-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(y <span class="sc">~</span> x, <span class="at">type=</span><span class="st">&quot;o&quot;</span>,<span class="at">axes=</span><span class="cn">FALSE</span>,<span class="at">ann=</span><span class="cn">FALSE</span>,<span class="at">pch=</span><span class="dv">16</span>,<span class="at">col=</span><span class="st">&quot;firebrick&quot;</span>,<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">20</span>,<span class="dv">20</span>),<span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">20</span>,<span class="dv">20</span>)) <span class="co"># define basic plot</span></span>
<span id="cb268-9"><a href="writing-functions.html#cb268-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">title</span>(<span class="at">main=</span><span class="fu">paste</span>(<span class="st">&quot;y =&quot;</span>,a,<span class="st">&quot;x +&quot;</span>,b)) <span class="co"># print a dynamic main title</span></span>
<span id="cb268-10"><a href="writing-functions.html#cb268-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">title</span>(<span class="at">xlab=</span><span class="st">&quot;x&quot;</span>,<span class="at">ylab=</span><span class="st">&quot;y&quot;</span>)  <span class="co"># print axis labels</span></span>
<span id="cb268-11"><a href="writing-functions.html#cb268-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">axis</span>(<span class="dv">1</span>) <span class="co"># print the X axis</span></span>
<span id="cb268-12"><a href="writing-functions.html#cb268-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">axis</span>(<span class="dv">2</span>,<span class="at">las=</span><span class="dv">2</span>) <span class="co"># print the Y axis and turn its labels right-side-up</span></span>
<span id="cb268-13"><a href="writing-functions.html#cb268-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">abline</span>(<span class="at">h=</span><span class="dv">0</span>,<span class="at">v=</span><span class="dv">0</span>,<span class="at">col=</span><span class="st">&quot;grey70&quot;</span>) <span class="co"># add grey lines indicating x=0 and y=0</span></span>
<span id="cb268-14"><a href="writing-functions.html#cb268-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb268-15"><a href="writing-functions.html#cb268-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return</span></span>
<span id="cb268-16"><a href="writing-functions.html#cb268-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(plot_only<span class="sc">==</span><span class="cn">FALSE</span>){</span>
<span id="cb268-17"><a href="writing-functions.html#cb268-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(y)</span>
<span id="cb268-18"><a href="writing-functions.html#cb268-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb268-19"><a href="writing-functions.html#cb268-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Note that we added a parameter, <code>plot_only</code>. When it is set to <code>TRUE</code>, the function will not return any numbers.</p>
<p>Now let’s call this fancy function a bunch of times:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="writing-functions.html#cb269-1" aria-hidden="true" tabindex="-1"></a>my_input <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">20</span><span class="sc">:</span><span class="dv">20</span> <span class="co"># define a common x input value</span></span>
<span id="cb269-2"><a href="writing-functions.html#cb269-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-3"><a href="writing-functions.html#cb269-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>)) <span class="co"># stage a multi-paned plot</span></span>
<span id="cb269-4"><a href="writing-functions.html#cb269-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_my_lm</span>(<span class="at">x=</span>my_input,<span class="at">a=</span><span class="dv">2</span>,<span class="at">b=</span><span class="dv">15</span>)</span>
<span id="cb269-5"><a href="writing-functions.html#cb269-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_my_lm</span>(<span class="at">x=</span>my_input,<span class="at">a=</span><span class="dv">1</span>,<span class="at">b=</span><span class="dv">10</span>)</span>
<span id="cb269-6"><a href="writing-functions.html#cb269-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_my_lm</span>(<span class="at">x=</span>my_input,<span class="at">a=</span>.<span class="dv">5</span>,<span class="at">b=</span><span class="dv">5</span>)</span>
<span id="cb269-7"><a href="writing-functions.html#cb269-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_my_lm</span>(<span class="at">x=</span>my_input,<span class="at">a=</span><span class="dv">0</span>,<span class="at">b=</span><span class="dv">0</span>)</span>
<span id="cb269-8"><a href="writing-functions.html#cb269-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_my_lm</span>(<span class="at">x=</span>my_input,<span class="at">a=</span><span class="sc">-</span><span class="dv">1</span>,<span class="at">b=</span><span class="sc">-</span><span class="dv">5</span>)</span>
<span id="cb269-9"><a href="writing-functions.html#cb269-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_my_lm</span>(<span class="at">x=</span>my_input,<span class="at">a=</span><span class="sc">-</span><span class="dv">2</span>,<span class="at">b=</span><span class="dv">15</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-292-1.png" width="672" /></p>
<p>Think about how many lines of code would have been needed to write out all of these fancy plots if you did not use a custom function! Think about how cluttered and dizzying your code would look! And think about how many opportunities for errors and inconsistencies there would have been! That is the advantage of writing your own functions: it makes your work more efficient, more organized, and less prone to errors.</p>
<p>Another major advantage of this approach comes into play when you decide you want to tweak the formatting of your plot. Rather than going through each <code>plot(...)</code> command and modifying the inputs in each one, when you write a custom plotting function you just have to make those changes once. Again, using a custom function saves you time and removes the possibility of inconsistencies or mistakes in the plots you are creating.</p>
</div>
<div id="exercise-2-6" class="section level3 unnumbered">
<h3>Exercise 2</h3>
<p>Modify the most recent version of <code>plot_my_lm</code> above such that you can specify the color for the plotted line as an input in the function. Then reproduce the multi-paned plot using a different color in each plot. (Here is a good reference for <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">color options in R</a>).</p>
<div id="exercises-with-names-data" class="section level4 unnumbered">
<h4>Exercises with names data</h4>
<p><img src="img/baby_names.png" /></p>
<p>In this exercise, you will investigate annual trends in the prevalence of six names for babies born in the United States.</p>
<p><strong>Step 1.</strong> Decide upon five names of interest to you, in addition to your own. Create a vector of these six names.</p>
<p><strong>Step 2.</strong> Install and load the package <code>babynames</code>, which includes the names of each child born in the United States from 1880 to 2017, according to the Social Security Administration.</p>
<p><strong>Step 3.</strong> Make an object named <code>bn</code> like this: <code>bn &lt;- babynames::babynames</code>.</p>
<p><strong>Step 4.</strong> Write a function that takes any name and plots its proportional prevalence from 1880 to 2017. Format the plot beautifully. Provide the name as the title of the plot.</p>
<p><strong>Step 5.</strong> Modify your function so that it takes multiple names (instead of just one) and generates a multi-pane plot, one for each of the names passed to the function. Then, test that function on the object you created in number one.</p>
<p><strong>Step 6.</strong> Create a function called <code>first_letter</code>. This should take any vector as an argument and return the first letter only. You will need to use the <code>substr</code> function.</p>
<p><strong>Step 7.</strong> Use your <code>first_letter</code> function to make a new variable in the babynames dataset called <code>fl</code>. This should be the first letter of all names.</p>
<p><strong>Step 8.</strong> What was the most popular first letter of boys names in 1900?</p>
<p><strong>Step 9.</strong> What was the least popular first letter of girls names in 2017?</p>
<p><strong>Step 10.</strong> Make a function called <code>letter_plot</code>. This should take two arguments, <code>letter</code> and <code>m_or_f</code>, and then create a plot showing the popularity of that letter for the letter/sex combination inputted over time.</p>
<p><strong>Step 11.</strong> Make a function called <code>letter_compare</code>. This should take two arguments: <code>y</code> (the year) and <code>gender</code> (sex). This should make a plot of the popularity of each letter being used as the first letter for a name, for the sex in question, for the year provided.</p>
</div>
<div id="exercises-with-trees-data" class="section level4 unnumbered">
<h4>Exercises with trees data</h4>
<ol style="list-style-type: decimal">
<li><p>Define an object named <code>trees</code> using the built-in <code>trees</code> dataset: <code>trees &lt;- trees</code> (weird, right?)</p></li>
<li><p>How many rows are there?</p></li>
<li><p>How many columns are there?</p></li>
<li><p>“Girth” is the same thing as “circumference.” Make a function named <code>girth_to_diameter</code>. It should do exactly what it says.</p></li>
<li><p>Create a new variable called <code>diameter</code>. Use your new function to populate it.</p></li>
<li><p>Create a scatterplot showing the association between <code>diameter</code> and <code>Volume</code>.</p></li>
<li><p>Create a histogram of <code>Height</code>.</p></li>
<li><p>Create a function named <code>diameter_to_area</code>. It should do what it says it does. Create a new variable named <code>area</code> using this function. This should be the area of a cross-sectional cut of the tree.</p></li>
<li><p>Create a dataset named <code>oranges</code> by reading in the built-in <code>Orange</code> dataset like this: <code>oranges &lt;- Orange</code>.</p></li>
<li><p>Create a plot showing circumference as a function of age, faceted by tree number.</p></li>
<li><p>Create a function called <code>plot_tree</code>. This should take only one argument, <code>tree_number</code>, and generate a plot of that tree’s growth over time.</p></li>
<li><p>Create a function called <code>circumference_to_radius</code>. It should do what it says. Use it to create a new variable in the <code>oranges</code> data named <code>radius</code>.</p></li>
<li><p>Create a function called <code>double_it</code>. It should double it. Use it to create a variable named <code>diameter</code>.</p></li>
<li><p>Assume that the measurements of the trees are in inches, and that the age of the trees is in days. Create (a) a function for converting inches to centimeters and (b) a function for converting days to weeks. Create new variables in the data, using these functions, named <code>circumference_cm</code> and <code>age_weeks</code>.</p></li>
<li><p>Plot the association between age in weeks and circumference in centimeters. Facet by tree number.</p></li>
<li><p>Do trees get bigger as they get older?</p></li>
</ol>
</div>
</div>
</div>
<div id="sourcing-functions" class="section level2 unnumbered">
<h2>Sourcing functions</h2>
<p>As you advance in your coding, you will likely be writing multiple custom functions within a single <code>R</code> script. It is usually useful to group these functions into the same section of code near the top of your script.</p>
<p>But for even <em>better</em> script organization and simplification, you should <em>source</em> your functions from a separate <code>R</code> script. This means placing your function code in a separate <code>R</code> script and calling that file from the script in which you are carrying out your analyses. In addition to simplifying your analysis script, keeping your functions in a separate file allows them to be shared or sourced from any number of other scripts, which further organizes and simplifies your project’s code and increases the reproducibility of your work.</p>
<p>Here is how sourcing functions can work:</p>
<ol style="list-style-type: decimal">
<li><p>Open a new <code>R</code> script. Save it as <code>functions.R</code> and save it in the same working directory as the script you are using to work through this module.</p></li>
<li><p>Copy and paste the <code>plot_my_lm()</code> function into your <code>functions.R</code> script. Save that script to ensure your code is safe.</p></li>
<li><p>Now remove the code defining <code>plot_my_lm()</code> from your module <code>R</code> script.</p></li>
<li><p>In its place, type this command:</p></li>
</ol>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="writing-functions.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;functions.R&quot;</span>)</span></code></pre></div>
<p>This command tells <code>R</code> to run the code in <code>functions.R</code> and store the objects and outputs from it in its active memory. You can now call <code>plot_my_lm()</code> from your module script.</p>
<div id="exercise" class="section level3 unnumbered">
<h3>Exercise</h3>
<p>Carry out the above instructions to ensure that you know how to source a function from a separate <code>R</code> script.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="joining-datasets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="for-loops.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/databrew/intro-to-data-science/edit/master/07b-writing_functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["intro-to-data-science.pdf", "intro-to-data-science.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
